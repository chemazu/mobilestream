{"ast":null,"code":"import { createComputation, read, write, isFunction, onDispose, update, dispose } from './core.js';\nimport { SCOPE } from './symbols.js';\nfunction signal(initialValue, options) {\n  const node = createComputation(initialValue, null, options),\n    signal2 = read.bind(node);\n  signal2.node = node;\n  signal2[SCOPE] = true;\n  signal2.set = write.bind(node);\n  return signal2;\n}\nfunction isReadSignal(fn) {\n  return isFunction(fn) && SCOPE in fn;\n}\nfunction computed(compute, options) {\n  const node = createComputation(options?.initial, compute, options),\n    signal2 = read.bind(node);\n  signal2[SCOPE] = true;\n  signal2.node = node;\n  return signal2;\n}\nfunction effect(effect2, options) {\n  const signal2 = createComputation(null, function runEffect() {\n    let effectResult = effect2();\n    isFunction(effectResult) && onDispose(effectResult);\n    return null;\n  }, {\n    id: options?.id ?? \"effect\"\n  });\n  signal2._effect = true;\n  update(signal2);\n  {\n    return function stopEffect() {\n      dispose.call(signal2, true);\n    };\n  }\n}\nfunction readonly(signal2) {\n  const readonly2 = () => signal2();\n  readonly2[SCOPE] = true;\n  readonly2.node = signal2.node;\n  return readonly2;\n}\nfunction isWriteSignal(fn) {\n  return isReadSignal(fn) && \"set\" in fn;\n}\nexport { computed, effect, isReadSignal, isWriteSignal, readonly, signal };","map":{"version":3,"names":["createComputation","read","write","isFunction","onDispose","update","dispose","SCOPE","signal","initialValue","options","node","signal2","bind","set","isReadSignal","fn","computed","compute","initial","effect","effect2","runEffect","effectResult","id","_effect","stopEffect","call","readonly","readonly2","isWriteSignal"],"sources":["/Users/user/Documents/mobilestreamapp/client/node_modules/@maverick-js/signals/dist/dev/signals.js"],"sourcesContent":["import { createComputation, read, write, isFunction, onDispose, update, dispose } from './core.js';\nimport { SCOPE } from './symbols.js';\n\nfunction signal(initialValue, options) {\n  const node = createComputation(initialValue, null, options), signal2 = read.bind(node);\n  signal2.node = node;\n  signal2[SCOPE] = true;\n  signal2.set = write.bind(node);\n  return signal2;\n}\nfunction isReadSignal(fn) {\n  return isFunction(fn) && SCOPE in fn;\n}\nfunction computed(compute, options) {\n  const node = createComputation(\n    options?.initial,\n    compute,\n    options\n  ), signal2 = read.bind(node);\n  signal2[SCOPE] = true;\n  signal2.node = node;\n  return signal2;\n}\nfunction effect(effect2, options) {\n  const signal2 = createComputation(\n    null,\n    function runEffect() {\n      let effectResult = effect2();\n      isFunction(effectResult) && onDispose(effectResult);\n      return null;\n    },\n    { id: options?.id ?? \"effect\" } \n  );\n  signal2._effect = true;\n  update(signal2);\n  {\n    return function stopEffect() {\n      dispose.call(signal2, true);\n    };\n  }\n}\nfunction readonly(signal2) {\n  const readonly2 = () => signal2();\n  readonly2[SCOPE] = true;\n  readonly2.node = signal2.node;\n  return readonly2;\n}\nfunction isWriteSignal(fn) {\n  return isReadSignal(fn) && \"set\" in fn;\n}\n\nexport { computed, effect, isReadSignal, isWriteSignal, readonly, signal };\n"],"mappings":"AAAA,SAASA,iBAAiB,EAAEC,IAAI,EAAEC,KAAK,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,OAAO,QAAQ,WAAW;AAClG,SAASC,KAAK,QAAQ,cAAc;AAEpC,SAASC,MAAMA,CAACC,YAAY,EAAEC,OAAO,EAAE;EACrC,MAAMC,IAAI,GAAGX,iBAAiB,CAACS,YAAY,EAAE,IAAI,EAAEC,OAAO,CAAC;IAAEE,OAAO,GAAGX,IAAI,CAACY,IAAI,CAACF,IAAI,CAAC;EACtFC,OAAO,CAACD,IAAI,GAAGA,IAAI;EACnBC,OAAO,CAACL,KAAK,CAAC,GAAG,IAAI;EACrBK,OAAO,CAACE,GAAG,GAAGZ,KAAK,CAACW,IAAI,CAACF,IAAI,CAAC;EAC9B,OAAOC,OAAO;AAChB;AACA,SAASG,YAAYA,CAACC,EAAE,EAAE;EACxB,OAAOb,UAAU,CAACa,EAAE,CAAC,IAAIT,KAAK,IAAIS,EAAE;AACtC;AACA,SAASC,QAAQA,CAACC,OAAO,EAAER,OAAO,EAAE;EAClC,MAAMC,IAAI,GAAGX,iBAAiB,CAC5BU,OAAO,EAAES,OAAO,EAChBD,OAAO,EACPR,OACF,CAAC;IAAEE,OAAO,GAAGX,IAAI,CAACY,IAAI,CAACF,IAAI,CAAC;EAC5BC,OAAO,CAACL,KAAK,CAAC,GAAG,IAAI;EACrBK,OAAO,CAACD,IAAI,GAAGA,IAAI;EACnB,OAAOC,OAAO;AAChB;AACA,SAASQ,MAAMA,CAACC,OAAO,EAAEX,OAAO,EAAE;EAChC,MAAME,OAAO,GAAGZ,iBAAiB,CAC/B,IAAI,EACJ,SAASsB,SAASA,CAAA,EAAG;IACnB,IAAIC,YAAY,GAAGF,OAAO,CAAC,CAAC;IAC5BlB,UAAU,CAACoB,YAAY,CAAC,IAAInB,SAAS,CAACmB,YAAY,CAAC;IACnD,OAAO,IAAI;EACb,CAAC,EACD;IAAEC,EAAE,EAAEd,OAAO,EAAEc,EAAE,IAAI;EAAS,CAChC,CAAC;EACDZ,OAAO,CAACa,OAAO,GAAG,IAAI;EACtBpB,MAAM,CAACO,OAAO,CAAC;EACf;IACE,OAAO,SAASc,UAAUA,CAAA,EAAG;MAC3BpB,OAAO,CAACqB,IAAI,CAACf,OAAO,EAAE,IAAI,CAAC;IAC7B,CAAC;EACH;AACF;AACA,SAASgB,QAAQA,CAAChB,OAAO,EAAE;EACzB,MAAMiB,SAAS,GAAGA,CAAA,KAAMjB,OAAO,CAAC,CAAC;EACjCiB,SAAS,CAACtB,KAAK,CAAC,GAAG,IAAI;EACvBsB,SAAS,CAAClB,IAAI,GAAGC,OAAO,CAACD,IAAI;EAC7B,OAAOkB,SAAS;AAClB;AACA,SAASC,aAAaA,CAACd,EAAE,EAAE;EACzB,OAAOD,YAAY,CAACC,EAAE,CAAC,IAAI,KAAK,IAAIA,EAAE;AACxC;AAEA,SAASC,QAAQ,EAAEG,MAAM,EAAEL,YAAY,EAAEe,aAAa,EAAEF,QAAQ,EAAEpB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}