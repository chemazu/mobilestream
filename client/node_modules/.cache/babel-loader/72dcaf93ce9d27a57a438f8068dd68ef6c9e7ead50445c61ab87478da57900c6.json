{"ast":null,"code":"import { createComment, DOMEvent, listenEvent, isDOMNode, createFragment, attachDeclarativeShadowDOM, setAttribute, toggleClass, setStyle, camelToKebabCase, trimTrailingSemicolon, flattenArray, runAll, isDOMElement } from './chunk-VABDA4SA.js';\nimport { root, isFunction, isArray, isString, isNumber, noop, unwrapDeep, effect, isUndefined, peek, scoped, computed, provideContext, isNull, isBoolean } from './chunk-NQ7TQAU7.js';\nimport { root as root$1, scoped as scoped$1, getScope, isFunction as isFunction$1, effect as effect$1, onDispose, tick, signal, untrack } from '@maverick-js/signals';\n\n// src/std/html.ts\nfunction escape(value, isAttr = false) {\n  const type = typeof value;\n  if (type !== \"string\") {\n    if (!isAttr && type === \"function\") return escape(value());\n    if (isAttr && type === \"boolean\") return value + \"\";\n    return value;\n  }\n  const delimeter = isAttr ? '\"' : \"<\",\n    escapeDelimeter = isAttr ? \"&quot;\" : \"&lt;\";\n  let iDelimeter = value.indexOf(delimeter),\n    isAmpersand = value.indexOf(\"&\");\n  if (iDelimeter < 0 && isAmpersand < 0) return value;\n  let left = 0,\n    out = \"\";\n  while (iDelimeter >= 0 && isAmpersand >= 0) {\n    if (iDelimeter < isAmpersand) {\n      if (left < iDelimeter) out += value.substring(left, iDelimeter);\n      out += escapeDelimeter;\n      left = iDelimeter + 1;\n      iDelimeter = value.indexOf(delimeter, left);\n    } else {\n      if (left < isAmpersand) out += value.substring(left, isAmpersand);\n      out += \"&amp;\";\n      left = isAmpersand + 1;\n      isAmpersand = value.indexOf(\"&\", left);\n    }\n  }\n  if (iDelimeter >= 0) {\n    do {\n      if (left < iDelimeter) out += value.substring(left, iDelimeter);\n      out += escapeDelimeter;\n      left = iDelimeter + 1;\n      iDelimeter = value.indexOf(delimeter, left);\n    } while (iDelimeter >= 0);\n  } else while (isAmpersand >= 0) {\n    if (left < isAmpersand) out += value.substring(left, isAmpersand);\n    out += \"&amp;\";\n    left = isAmpersand + 1;\n    isAmpersand = value.indexOf(\"&\", left);\n  }\n  return left < value.length ? out + value.substring(left) : out;\n}\n\n// src/runtime/ssr/render.ts\nfunction renderToString(root4) {\n  const result = root(dispose => {\n    const value = root4();\n    dispose();\n    return value;\n  });\n  return {\n    code: resolve(escape(result))\n  };\n}\nvar SSR_TEMPLATE = /* @__PURE__ */Symbol();\nfunction resolve(node) {\n  if (isFunction(node)) {\n    return resolve(node());\n  } else if (isArray(node)) {\n    let result = \"\";\n    const flattened = node.flat(10);\n    for (let i = 0; i < flattened.length; i++) {\n      result += resolve(escape(flattened[i]));\n    }\n    return result + \"<!/[]>\";\n  } else if (isString(node) || isNumber(node)) {\n    return node + \"\";\n  } else if (node?.[SSR_TEMPLATE]) {\n    return node[SSR_TEMPLATE];\n  }\n  return \"\";\n}\nfunction injectHTML(html) {\n  return {\n    [SSR_TEMPLATE]: html\n  };\n}\n\n// src/element/controller.ts\nvar ComponentController = class {\n  /**\n   * The custom element this component is attached to. This is safe to use server-side with the\n   * limited API listed below.\n   *\n   * **Important:** Only specific DOM APIs are safe to call server-side. This includes:\n   *\n   * - Attributes: `getAttribute`, `setAttribute`, `removeAttribute`, and `hasAttribute`\n   * - Classes: `classList` API\n   * - Styles: `style` API\n   * - Events (noop): `addEventListener`, `removeEventListener`, and `dispatchEvent`\n   */\n  get el() {\n    return this.instance._el;\n  }\n  /**\n   * Reactive component properties.\n   */\n  get $props() {\n    return this.instance._props;\n  }\n  /**\n   * Reactive component store.\n   */\n  get $store() {\n    return this.instance._store;\n  }\n  constructor(instance) {\n    this.instance = instance;\n    if (this.onAttach) instance._attachCallbacks.push(this.onAttach.bind(this));\n    if (this.onConnect) instance._connectCallbacks.push(this.onConnect.bind(this));\n    if (this.onDisconnect) instance._disconnectCallbacks.push(this.onDisconnect.bind(this));\n    if (this.onDestroy) instance._destroyCallbacks.push(this.onDestroy.bind(this));\n  }\n  /**\n   * This method can be used to specify attributes that should be set on the host element. Any\n   * attributes that are assigned to a function will be considered a signal and updated accordingly.\n   */\n  setAttributes(attributes) {\n    if (this.instance._attrs) Object.assign(this.instance._attrs, attributes);\n  }\n  /**\n   * This method can be used to specify styles that should set be set on the host element. Any\n   * styles that are assigned to a function will be considered a signal and updated accordingly.\n   */\n  setStyles(styles) {\n    if (this.instance._styles) Object.assign(this.instance._styles, styles);\n  }\n  /**\n   * This method is used to satisfy the CSS variables contract specified on the current\n   * custom element definition. Other CSS variables can be set via the `setStyles` method.\n   */\n  setCSSVars(vars) {\n    this.setStyles(vars);\n  }\n  /**\n   * Type-safe utility for creating component DOM events.\n   */\n  createEvent(type, ...init) {\n    return new DOMEvent(type, init[0]);\n  }\n  /**\n   * Creates a `DOMEvent` and dispatches it from the host element. This method is typed to\n   * match all component events.\n   */\n  dispatch(type, ...init) {\n    if (!this.el) return;\n    const event = new DOMEvent(type, init[0]);\n    this.el.dispatchEvent(event);\n  }\n  /**\n   * Adds an event listener for the given `type` and returns a function which can be invoked to\n   * remove the event listener.\n   *\n   * - The listener is removed if the current scope is disposed.\n   * - This method is safe to use on the server (noop).\n   */\n  listen(type, handler, options) {\n    if (!this.el) return noop;\n    return listenEvent(this.el, type, handler, options);\n  }\n};\n\n// src/element/component.ts\nvar Component = class extends ComponentController {\n  constructor(instance) {\n    super(instance);\n    if (this.render && !instance._innerHTML && !instance._renderer) {\n      instance._renderer = this.render.bind(this);\n    }\n  }\n  destroy() {\n    this.instance._destroy();\n  }\n};\n\n// src/runtime/dom/reconcile.ts\nfunction reconcile(parent, nodesA, nodesB) {\n  let lengthB = nodesB.length,\n    endA = nodesA.length,\n    endB = lengthB,\n    startA = 0,\n    startB = 0,\n    after = nodesA[endA - 1].nextSibling,\n    map = null;\n  while (startA < endA || startB < endB) {\n    if (nodesA[startA] === nodesB[startB]) {\n      startA++;\n      startB++;\n      continue;\n    }\n    while (nodesA[endA - 1] === nodesB[endB - 1]) {\n      endA--;\n      endB--;\n    }\n    if (endA === startA) {\n      const node = endB < lengthB ? startB ? nodesB[startB - 1].nextSibling : nodesB[endB - startB] : after;\n      while (startB < endB) parent.insertBefore(nodesB[startB++], node);\n    } else if (endB === startB) {\n      while (startA < endA) {\n        if (!map || !map.has(nodesA[startA])) nodesA[startA].remove();\n        startA++;\n      }\n    } else if (nodesA[startA] === nodesB[endB - 1] && nodesB[startB] === nodesA[endA - 1]) {\n      const node = nodesA[--endA].nextSibling;\n      parent.insertBefore(nodesB[startB++], nodesA[startA++].nextSibling);\n      parent.insertBefore(nodesB[--endB], node);\n      nodesA[endA] = nodesB[endB];\n    } else {\n      if (!map) {\n        map = /* @__PURE__ */new Map();\n        let i = startB;\n        while (i < endB) map.set(nodesB[i], i++);\n      }\n      const index = map.get(nodesA[startA]);\n      if (index != null) {\n        if (startB < index && index < endB) {\n          let i = startA,\n            sequence = 1,\n            t;\n          while (++i < endA && i < endB) {\n            if ((t = map.get(nodesA[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - startB) {\n            const node = nodesA[startA];\n            while (startB < index) parent.insertBefore(nodesB[startB++], node);\n          } else parent.replaceChild(nodesB[startB++], nodesA[startA++]);\n        } else startA++;\n      } else nodesA[startA++].remove();\n    }\n  }\n}\n\n// src/runtime/dom/walker.ts\nvar createMarkerWalker = root4 =>\n// @ts-expect-error - filter accepts `boolean` but not typed.\ndocument.createTreeWalker(root4, NodeFilter.SHOW_COMMENT, node => node.nodeValue === \"$\");\n\n// src/runtime/dom/render.ts\nvar hydration = null;\nfunction hydrate(root4, options) {\n  return runHydration(() => render(root4, options), options);\n}\nfunction runHydration(run, options) {\n  const prev = hydration;\n  hydration = {\n    w: createMarkerWalker(options.target)\n  };\n  const result = run();\n  hydration = prev;\n  return result;\n}\nfunction render(root4, options) {\n  return root(dispose => {\n    if (!hydration) {\n      insert(options.target, root4(), options.before);\n    } else {\n      unwrapDeep(root4);\n    }\n    return dispose;\n  });\n}\n\n// src/runtime/dom/insert.ts\nfunction insert(parent, value, marker) {\n  let isSignal = isFunction(value);\n  if (isSignal && value[$$CHILDREN]) {\n    value = value();\n    isSignal = isFunction(value);\n  }\n  if (isSignal) {\n    let current;\n    effect(() => void (current = insertExpression(parent, unwrapDeep(value()), marker, current, true)));\n    return;\n  } else if (hydration) {\n    marker.remove();\n  } else insertExpression(parent, value, marker);\n}\nfunction insertExpression(parent, value, marker, current, isSignal = false) {\n  if (value === current) return current;\n  if (isArray(value)) {\n    const newNodes = [],\n      currentNodes = hydration && marker ? claimArray(marker) : current && isArray(current) ? current : [];\n    if (value.length && resolveArray(newNodes, value, currentNodes, isSignal)) {\n      effect(() => void (current = insertExpression(parent, newNodes, marker, currentNodes, true)));\n      return () => current;\n    }\n    if (hydration && marker) return currentNodes;\n    if (newNodes.length === 0) {\n      updateDOM(parent, current);\n    } else if (currentNodes.length) {\n      reconcile(parent, currentNodes, newNodes);\n    } else {\n      current && updateDOM(parent, current, marker);\n      appendArray(parent, newNodes, marker);\n    }\n    return newNodes;\n  } else if (isString(value) || isNumber(value)) {\n    if (!isUndefined(marker)) {\n      if (isDOMNode(current) && current.nodeType === 3) {\n        current.data = value + \"\";\n      } else if (!hydration) {\n        return updateDOM(parent, current, marker, document.createTextNode(value + \"\"));\n      } else {\n        return marker.nextSibling;\n      }\n    } else if (current !== \"\" && isString(current)) {\n      return parent.firstChild.data = value + \"\";\n    } else return parent.textContent = value + \"\";\n  } else if (isDOMNode(value)) {\n    if (hydration) ;else if (marker || isArray(current)) {\n      if (!isUndefined(marker)) return current = updateDOM(parent, current, marker, value);\n      updateDOM(parent, current, null, value);\n    } else if (!current || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    return value;\n  } else {\n    return updateDOM(parent, current, marker);\n  }\n  return current;\n}\nfunction appendArray(parent, nodes, marker) {\n  if (isUndefined(marker)) {\n    for (let i = 0; i < nodes.length; i++) parent.appendChild(nodes[i]);\n  } else {\n    for (let i = 0; i < nodes.length; i++) parent.insertBefore(nodes[i], marker);\n  }\n}\nfunction resolveArray(nodes, values, current, computed2) {\n  let value,\n    prev,\n    effect4 = false;\n  for (let i = 0; i < values.length; i++) {\n    value = values[i], prev = current[i];\n    if (isDOMNode(value)) {\n      nodes.push(value);\n    } else if (isArray(value)) {\n      effect4 = resolveArray(nodes, value, isArray(prev) ? prev : [], computed2) || effect4;\n    } else if (isFunction(value)) {\n      if (computed2) {\n        value = value();\n        effect4 = resolveArray(nodes, isArray(value) ? value : [value], isArray(prev) ? prev : [prev], true) || effect4;\n      } else {\n        nodes.push(value);\n        effect4 = true;\n      }\n    } else if (value || value === 0) {\n      const text = value + \"\";\n      if (prev && prev.nodeType === 3 && prev.data === text) {\n        nodes.push(prev);\n      } else {\n        nodes.push(document.createTextNode(text));\n      }\n    }\n  }\n  return effect4;\n}\nvar ARRAY_END_MARKER = \"/[]\";\nfunction claimArray(marker) {\n  let node = marker.nextSibling,\n    nodes = [];\n  while (node) {\n    if (node.nodeType !== 8) {\n      nodes.push(node);\n    } else if (node.nodeValue === ARRAY_END_MARKER) {\n      node.remove();\n      break;\n    }\n    node = node.nextSibling;\n  }\n  return nodes;\n}\nfunction updateDOM(parent, current, marker, replace) {\n  if (isUndefined(marker)) {\n    parent.textContent = \"\";\n    return;\n  }\n  const node = replace || createComment(\"~\");\n  if (isArray(current) && current.length) {\n    let el,\n      inserted = false,\n      isParent = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      el = current[i];\n      if (el !== node) {\n        isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && parent.removeChild(el);\n      } else inserted = true;\n    }\n  } else if (isDOMNode(current)) {\n    parent.replaceChild(node, current);\n  } else {\n    parent.insertBefore(node, marker);\n  }\n  return node;\n}\n\n// src/runtime/dom/insert-lite.ts\nvar CONNECTED = /* @__PURE__ */Symbol(\"CONNECTED\");\nvar INSERT_MARKER_NODE = createComment(\"$$\");\nvar END_MARKER = /* @__PURE__ */Symbol(\"END_MARKER\");\nvar END_MARKER_NODE = /* @__PURE__ */createComment(\"/$\");\nvar ARRAY_END_MARKER_VALUE = \"/[]\";\nfunction insertLite(parent, value, before) {\n  let isSignal = isFunction(value);\n  if (isSignal && value[$$CHILDREN]) {\n    value = value();\n    isSignal = isFunction(value);\n  }\n  if (isSignal) {\n    insertEffect(parent, value, before);\n  } else if (!hydration && (value || value === 0)) {\n    addChild(parent, isArray(value) ? resolveArray2(value) : isDOMNode(value) ? value : document.createTextNode(value + \"\"), before);\n  }\n}\nfunction addChild(parent, node, before) {\n  if (!node) return;\n  if (before) parent.insertBefore(node, before);else parent.appendChild(node);\n}\nfunction insertEffect(parent, value, before) {\n  const marker = before && before.nodeType === 8 ? before : INSERT_MARKER_NODE.cloneNode();\n  if (marker !== before) addChild(parent, marker, before);\n  effect(() => void insertExpression2(marker, unwrapDeep(value)));\n}\nfunction insertExpression2(start, value) {\n  const end = start[END_MARKER];\n  if (isArray(value)) {\n    if (hydration) {\n      start[END_MARKER] = findArrayEndMarker(start);\n    } else {\n      if (end) removeOldNodes(start, end);\n      const fragment = resolveArray2(value);\n      if (!fragment) return;\n      if (!end) fragment.appendChild(createEndMarker(start));\n      start.after(fragment);\n    }\n  } else if (isDOMNode(value)) {\n    if (end) removeOldNodes(start, end);\n    if (!hydration) start.after(value);\n    if (!end) value.after(createEndMarker(start));\n  } else if (isString(value) || isNumber(value)) {\n    if (start[CONNECTED]) {\n      start.nextSibling.data = value + \"\";\n      return;\n    }\n    if (end) removeOldNodes(start, end);\n    let text;\n    if (!hydration) {\n      text = document.createTextNode(value + \"\");\n      start.after(text);\n    } else {\n      text = start.nextSibling;\n    }\n    start[CONNECTED] = true;\n    if (!end) text.after(createEndMarker(start));\n  } else if (end) {\n    removeOldNodes(start, end);\n  }\n}\nfunction createEndMarker(start) {\n  return start[END_MARKER] = END_MARKER_NODE.cloneNode();\n}\nfunction findArrayEndMarker(node) {\n  while (node) {\n    if (node.nodeType === 8 && node.nodeValue === ARRAY_END_MARKER_VALUE) return node;\n    node = node.nextSibling;\n  }\n}\nfunction removeOldNodes(start, end) {\n  while (start.nextSibling !== end) start.nextSibling.remove();\n  start[CONNECTED] = false;\n}\nfunction resolveArray2(value) {\n  const flattened = flattenArray(value);\n  if (!flattened.length) return null;\n  const fragment = createFragment();\n  for (let i = 0; i < flattened.length; i++) {\n    const child = flattened[i];\n    if (isFunction(child)) {\n      insertEffect(fragment, child);\n    } else {\n      fragment.append(child);\n    }\n  }\n  return fragment;\n}\n\n// src/element/css.ts\nvar CSS = /* @__PURE__ */Symbol();\nvar sheetCache = /* @__PURE__ */new WeakMap();\nvar supported;\nvar supportsAdoptedStyleSheets = () => !isUndefined(supported) ? supported : supported = ShadowRoot && \"adoptedStyleSheets\" in Document.prototype && \"replace\" in CSSStyleSheet.prototype;\nfunction injectCSS(value) {\n  return createCSS(value + \"\");\n}\nfunction css(strings, ...values) {\n  let css2 = strings[0] ?? \"\";\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    if (value?.[CSS]) {\n      css2 += value.text;\n    } else if (typeof value === \"number\") {\n      css2 += value;\n    } else {\n      throw new Error(`[maverick] value passed to \\`css\\` function must be a \\`css\\` function result: ${value}. Use \\`injectCSS\\` to pass non-literal values, but take care to ensure page security.`);\n    }\n    css2 += strings[i + 1];\n  }\n  return createCSS(css2, strings);\n}\nfunction createCSS(css2, strings) {\n  let styleSheet;\n  return {\n    [CSS]: true,\n    get text() {\n      return css2;\n    },\n    get sheet() {\n      if (styleSheet) {\n        return styleSheet;\n      } else if (strings && sheetCache.has(strings)) {\n        return sheetCache.get(strings);\n      } else if (supportsAdoptedStyleSheets()) {\n        (styleSheet = new CSSStyleSheet()).replaceSync(css2);\n        if (strings) sheetCache.set(strings, styleSheet);\n        return styleSheet;\n      }\n      return;\n    },\n    toString() {\n      return css2;\n    }\n  };\n}\nfunction adoptCSS(root4, css2) {\n  if (supportsAdoptedStyleSheets()) {\n    root4.adoptedStyleSheets = css2.map(css3 => css3.sheet);\n  } else {\n    const style = document.createElement(\"style\");\n    style.textContent = css2.map(css3 => css3.text).join(\"\");\n    root4.appendChild(style);\n  }\n}\n\n// src/element/register.ts\nfunction registerCustomElement(Component2) {\n  register(Component2, {\n    insert,\n    adoptCSS\n  });\n}\nfunction registerLiteCustomElement(Component2) {\n  register(Component2, {\n    insert: insertLite\n  });\n}\nfunction registerHeadlessCustomElement(Component2) {\n  register(Component2);\n}\nvar DOM_ELEMENT_REGISTRY = Symbol(\"MAVERICK_REGISTRY\");\nvar serverElementRegistry = void 0;\nfunction register(Component2, init) {\n  const tagName = Component2.el.tagName;\n  if (!window.customElements.get(tagName)) {\n    if (!window[DOM_ELEMENT_REGISTRY]) window[DOM_ELEMENT_REGISTRY] = /* @__PURE__ */new Map();\n    window[DOM_ELEMENT_REGISTRY].set(tagName, Component2);\n    window.customElements.define(tagName, createHTMLElement(Component2, init));\n  }\n}\n\n// src/runtime/dom/internal.ts\nfunction $$_create_template(html) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = html;\n  return template.content;\n}\nvar $$_create_fragment = createFragment;\nfunction $$_create_walker(fragment, walker = hydration?.w) {\n  try {\n    return [$$_next_element(walker), walker];\n  } catch (e) {\n    return $$_create_walker(fragment, createMarkerWalker(document.importNode(fragment, true)));\n  }\n}\nfunction $$_next_template(fragment) {\n  return $$_create_walker(fragment)[0];\n}\nfunction $$_next_element(walker) {\n  let element = walker.nextNode().nextSibling;\n  if (element.localName.indexOf(\"-\") > 0 && element.firstChild && element.firstChild.nodeName === \"SHADOW-ROOT\") {\n    let node = element.firstChild.nextSibling || element.nextSibling;\n    if (node) walker.currentNode = node;\n  }\n  return element;\n}\nvar $$_hydrating = hydration;\nfunction $$_setup_custom_element(host, props) {\n  const Component2 = window[DOM_ELEMENT_REGISTRY]?.get(host.localName);\n  if (!Component2) {\n    throw Error(`[maverick] custom element not registered: ${host.localName}`);\n  }\n  const component = createComponent(Component2, {\n    props\n  });\n  host.attachComponent(component);\n  return component.instance._scope;\n}\nfunction $$_clone(fragment) {\n  const clone = document.importNode(fragment, true);\n  return clone.firstElementChild;\n}\nfunction $$_create_element(tagName) {\n  return document.createElement(tagName);\n}\nfunction $$_attach_declarative_shadow_dom(element) {\n  if (element.firstChild?.nodeName === \"TEMPLATE\") {\n    if (element.firstChild.hasAttribute(\"shadowroot\")) {\n      attachDeclarativeShadowDOM(element);\n    } else {\n      element.firstChild.remove();\n    }\n  }\n}\nvar $$_insert = insert;\nfunction $$_insert_at_marker(marker, value) {\n  insert(marker.parentElement, value, marker);\n}\nvar $$_insert_lite = insertLite;\nfunction $$_insert_at_marker_lite(marker, value) {\n  insertLite(marker.parentElement, value, marker);\n}\nfunction $$_create_component(component, props = {}) {\n  return peek(() => component(props));\n}\nvar $$CHILDREN = /* @__PURE__ */Symbol(\"$$CHILDREN\");\nfunction $$_children(fn) {\n  fn[$$CHILDREN] = true;\n  return fn;\n}\nfunction $$_ref(element, ref) {\n  if (isArray(ref)) {\n    ref.filter(isFunction).forEach(ref2 => ref2(element));\n  } else if (isFunction(ref)) {\n    ref(element);\n  }\n}\nfunction $$_directive(element, directive, args) {\n  if (isFunction(directive)) directive(element, ...args);\n}\nvar $$_attr = setAttribute;\nvar $$_class = toggleClass;\nvar $$_style = setStyle;\nfunction $$_spread(element, props) {\n  const keys = Object.keys(props);\n  for (let i = 0; i < keys.length; i++) {\n    const prop2 = keys[i];\n    if (prop2 in element) {\n      if (isFunction(props[prop2])) {\n        effect(() => void (element[prop2] = props[prop2]()));\n      } else {\n        element[prop2] = props[prop2];\n      }\n    } else if (isFunction(props[prop2])) {\n      effect(() => void $$_attr(element, prop2, props[prop2]()));\n    } else {\n      $$_attr(element, prop2, props[prop2]);\n    }\n  }\n}\nfunction $$_merge_props(...sources) {\n  const target = sources[0] || {};\n  for (let i = 1; i < sources.length; i++) {\n    const source = sources[i];\n    if (source) Object.assign(target, source);\n  }\n  return target;\n}\nfunction $$_listen(target, type, handler, capture = false) {\n  if (isFunction(handler)) {\n    listenEvent(target, type, handler, {\n      capture\n    });\n  }\n}\nvar DELEGATED_EVENTS = /* @__PURE__ */Symbol(\"DELEGATED_EVENTS\");\nfunction $$_delegate_events(types, document2 = window.document) {\n  const events = document2[DELEGATED_EVENTS] ??= /* @__PURE__ */new Set();\n  for (let i = 0, len = types.length; i < len; i++) {\n    const type = types[i];\n    if (!events.has(type)) {\n      events.add(type);\n      document2.addEventListener(type, delegated_event_handler);\n    }\n  }\n}\nfunction delegated_event_handler(event) {\n  const eventKey = `$$${event.type}`,\n    dataKey = `$$${event.type}Data`;\n  let node = event.composedPath && event.composedPath()[0] || event.target;\n  if (event.target !== node) {\n    Object.defineProperty(event, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(event, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  let handler, data;\n  while (node) {\n    handler = node[eventKey];\n    if (handler && !node.disabled && isFunction(handler)) {\n      data = node[dataKey];\n      !isUndefined(data) ? handler.call(node, data, event) : handler.call(node, event);\n    }\n    node = node.parentNode || node.host;\n  }\n}\nvar $$_peek = peek;\nvar $$_scoped = scoped;\nvar $$_effect = effect;\nvar $$_computed = computed;\nfunction hydrateLite(root4, options) {\n  return runHydration(() => renderLite(root4, options), options);\n}\nfunction renderLite(root4, options) {\n  return root$1(dispose => {\n    if (!hydration) {\n      insertLite(options.target, root4());\n    } else {\n      unwrapDeep(root4);\n    }\n    return dispose;\n  });\n}\n\n// src/element/internal.ts\nvar CONNECT = /* @__PURE__ */Symbol(\"CONNECT\");\nvar PROPS = /* @__PURE__ */Symbol(\"PROPS\");\nvar METHODS = /* @__PURE__ */Symbol(\"METHODS\");\nfunction createComponent(Component2, init) {\n  const instance = new ComponentInstance(Component2, init);\n  return scoped$1(() => new Component2(instance), instance._scope);\n}\nvar ComponentInstance = class {\n  constructor(Component2, init = {}) {\n    this._el = null;\n    this._renderer = null;\n    this._innerHTML = false;\n    this._destroyed = false;\n    this._attrs = {};\n    this._styles = {};\n    this._props = {};\n    // these props cause type issues - don't type them.\n    this._state = null;\n    this._store = null;\n    this._attachCallbacks = [];\n    this._connectCallbacks = [];\n    this._disconnectCallbacks = [];\n    this._destroyCallbacks = [];\n    root$1(dispose => {\n      this._scope = getScope();\n      this._dispose = dispose;\n      if (init.scope) init.scope.append(this._scope);\n      const store = Component2.el.store;\n      if (store) {\n        this._store = store.create();\n        this._state = new Proxy(this._store, {\n          get: (_, prop2) => this._store[prop2]()\n        });\n        provideContext(store, this._store);\n      }\n      const props = Component2.el.props;\n      if (props) {\n        this._props = createInstanceProps(props);\n        if (init.props) {\n          for (const prop2 of Object.keys(init.props)) {\n            if (prop2 in props) {\n              const value = init.props[prop2];\n              if (isFunction$1(value)) {\n                effect$1(() => void this._props[prop2].set(value()));\n              } else {\n                this._props[prop2].set(value);\n              }\n            }\n          }\n        }\n      }\n      if (init.props?.innerHTML) {\n        this._innerHTML = true;\n      }\n      onDispose(this._destroy.bind(this));\n    });\n  }\n  _destroy() {\n    if (this._destroyed) return;\n    this._destroyed = true;\n    for (const destroy of this._destroyCallbacks) {\n      scoped$1(() => destroy(this._el), this._scope);\n    }\n    this._el?.destroy();\n    this._attachCallbacks.length = 0;\n    this._connectCallbacks.length = 0;\n    this._disconnectCallbacks.length = 0;\n    this._destroyCallbacks.length = 0;\n    tick();\n    this._dispose();\n    this._el = null;\n    this._renderer = null;\n  }\n};\nfunction createInstanceProps(defs) {\n  const props = {};\n  for (const name of Object.keys(defs)) {\n    const def = defs[name];\n    props[name] = signal(def.value, def);\n  }\n  return props;\n}\n\n// src/element/setup.ts\nasync function setup(host) {\n  const parent = findParent(host);\n  const hostCtor = host.constructor,\n    componentCtor = hostCtor._component;\n  if (parent) {\n    await customElements.whenDefined(parent.localName);\n    parent[CONNECT] === true || (await new Promise(res => parent[CONNECT].push(res)));\n  }\n  if (host.isConnected) {\n    if (parent?.keepAlive) host.keepAlive = true;\n    host.attachComponent(createComponent(componentCtor, {\n      scope: parent?.component?.instance._scope\n    }));\n  }\n}\nfunction resolvePropsFromAttrs(host) {\n  const hostCtor = host.constructor,\n    componentCtor = hostCtor._component,\n    props = {};\n  if (!hostCtor._attrs) return props;\n  for (const attr of host.attributes) {\n    let propName = hostCtor._attrs.get(attr.name),\n      convert = propName && componentCtor.el.props[propName].type?.from;\n    if (convert) {\n      let attrValue = host.getAttribute(attr.name);\n      props[propName] = convert(attrValue);\n    }\n  }\n  return props;\n}\nfunction findParent(host) {\n  let hostCtor = host.constructor,\n    componentCtor = hostCtor._component,\n    node = host.parentNode,\n    prefix = componentCtor.el.tagName.split(\"-\", 1)[0] + \"-\";\n  while (node) {\n    if (node.nodeType === 1 && node.localName.startsWith(prefix)) {\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return null;\n}\n\n// src/element/create-html-element.ts\nfunction createHTMLElement(Component2, init) {\n  const _register = Component2.register;\n  if (Component2.register) {\n    const result = isArray(_register) ? _register : _register?.();\n    if (isArray(result)) for (const Component3 of result) register(Component3, init);\n  }\n  let attrs;\n  if (Component2.el.props) {\n    attrs = /* @__PURE__ */new Map();\n    for (const propName of Object.keys(Component2.el.props)) {\n      const def = Component2.el.props[propName];\n      const attr = def.attribute;\n      if (attr !== false) {\n        const attrName = attr ?? camelToKebabCase(propName);\n        attrs.set(attrName, propName);\n      }\n    }\n  }\n  class MaverickElement extends HTMLCustomElement {\n    static get _component() {\n      return Component2;\n    }\n  }\n  MaverickElement._init = init;\n  MaverickElement._attrs = attrs;\n  const proto = MaverickElement.prototype,\n    componentProto = Component2.prototype;\n  if (Component2.el.props) {\n    for (const prop2 of Object.keys(Component2.el.props)) {\n      Object.defineProperty(proto, prop2, {\n        enumerable: true,\n        configurable: true,\n        get() {\n          return !this.component ? Component2.el.props[prop2].value : this.component.instance._props[prop2]();\n        },\n        set(value) {\n          const fn = () => this.component.instance._props[prop2].set(value);\n          if (!this.component) {\n            this._queuedActions.delete(prop2);\n            this._queuedActions.set(prop2, fn);\n            return;\n          }\n          fn();\n        }\n      });\n    }\n  }\n  if (componentProto[PROPS]) {\n    for (const name of componentProto[PROPS]) {\n      Object.defineProperty(proto, name, {\n        enumerable: true,\n        configurable: true,\n        get() {\n          return this.component ? this.component[name] : void 0;\n        },\n        set(value) {\n          if (!this.component) {\n            this._queuedActions.delete(name);\n            this._queuedActions.set(name, () => {\n              this.component[name] = value;\n            });\n            return;\n          }\n          this.component[name] = value;\n        }\n      });\n    }\n  }\n  if (componentProto[METHODS]) {\n    for (const name of componentProto[METHODS]) {\n      proto[name] = function (...args) {\n        if (!this.component) this._throwAttachError([`el.${name}(...)`]);\n        return this.component[name](...args);\n      };\n    }\n  }\n  return MaverickElement;\n}\nvar HTML_ELEMENT = HTMLElement;\nvar _a;\nvar HTMLCustomElement = class extends HTML_ELEMENT {\n  constructor() {\n    super(...arguments);\n    this._connected = false;\n    this._destroyed = false;\n    this._component = null;\n    this._connectScope = null;\n    this._attachCallbacks = /* @__PURE__ */new Set();\n    this._disconnectCallbacks = [];\n    this._queuedActions = /* @__PURE__ */new Map();\n    this.keepAlive = false;\n    /** @internal */\n    this[_a] = [];\n    this._pendingSetup = false;\n  }\n  get _delegate() {\n    return this.hasAttribute(\"mk-d\");\n  }\n  get component() {\n    return this._component;\n  }\n  get $store() {\n    return this._component?.instance._store;\n  }\n  get state() {\n    if (!this._component) {\n      this._throwAttachError([\"el.state.foo\"]);\n    }\n    return this._component.instance._state;\n  }\n  static get observedAttributes() {\n    return this._attrs ? Array.from(this._attrs.keys()) : [];\n  }\n  attributeChangedCallback(name, _, newValue) {\n    const ctor = this.constructor;\n    if (!this._component || !ctor._attrs) return;\n    const propName = ctor._attrs.get(name);\n    const from = ctor._component.el.props[propName]?.type?.from;\n    if (from) this._component.instance._props[propName].set(from(newValue));\n  }\n  connectedCallback() {\n    const instance = this._component?.instance;\n    if (!this._delegate && !instance) return this._setup();\n    if (!instance || !this.isConnected || this._connected) return;\n    if (this._destroyed) {\n      {\n        throw Error(\"[maverick] attempting to connect an element that has been destroyed\");\n      }\n    }\n    if (this.hasAttribute(\"keep-alive\")) this.keepAlive = true;\n    this._connected = true;\n    if (instance._connectCallbacks.length) {\n      scoped$1(() => {\n        root$1(dispose => {\n          this._connectScope = getScope();\n          for (const connectCallback of instance._connectCallbacks) {\n            scoped$1(() => {\n              const disconnectCallback = connectCallback(this);\n              if (isFunction$1(disconnectCallback)) {\n                this._disconnectCallbacks.push(disconnectCallback);\n              }\n            }, this._connectScope);\n          }\n          this._disconnectCallbacks.push(dispose);\n        });\n      }, instance._scope);\n    }\n    if (isArray(this[CONNECT])) {\n      runAll(this[CONNECT], this);\n      this[CONNECT] = true;\n    }\n    return;\n  }\n  disconnectedCallback() {\n    const instance = this._component?.instance;\n    if (!this._connected || this._destroyed) return;\n    this._connected = false;\n    for (const callback of this._disconnectCallbacks) {\n      scoped$1(callback, this._connectScope);\n    }\n    if (instance?._disconnectCallbacks.length) {\n      for (const callback of instance._disconnectCallbacks) {\n        scoped$1(() => callback(this), instance._scope);\n      }\n    }\n    this._connectScope = null;\n    if (!this._delegate && !this.keepAlive) {\n      requestAnimationFrame(() => {\n        if (!this.isConnected) {\n          instance?._destroy();\n          this._destroyed = true;\n        }\n      });\n    }\n  }\n  attachComponent(component) {\n    const instance = component.instance,\n      ctor = this.constructor,\n      def = ctor._component.el,\n      init = ctor._init;\n    if (this._component) {\n      console.warn(`[maverick] element \\`${def.tagName}\\` already has attached component`);\n    }\n    if (this._destroyed) {\n      console.warn(`[maverick] attempted attaching to destroyed element \\`${def.tagName}\\``);\n    }\n    if (this._component || this._destroyed) return;\n    scoped$1(() => {\n      this._root = instance._renderer ? def.shadowRoot ? this.shadowRoot ?? this.attachShadow(isBoolean(def.shadowRoot) ? {\n        mode: \"open\"\n      } : def.shadowRoot) : resolveShadowRootElement(this) : null;\n      if (def.css && !init?.adoptCSS) {\n        console.warn(`[maverick] \\`css\\` was provided for \\`${def.tagName}\\` but element registration doesn't support adopting stylesheets. Resolve this by registering element with \\`registerElement\\` instead of lite or headless.`);\n      }\n      if (!hydration && def.shadowRoot && def.css && init?.adoptCSS) {\n        init.adoptCSS(this._root, def.css);\n      }\n      instance._el = this;\n      this._component = component;\n      const attrValues = resolvePropsFromAttrs(this);\n      for (const name of Object.keys(attrValues)) {\n        instance._props[name].set(attrValues[name]);\n      }\n      if (this._queuedActions?.size) {\n        for (const action of this._queuedActions.values()) action();\n      }\n      this._queuedActions = null;\n      for (const callback of [...instance._attachCallbacks, ...this._attachCallbacks]) {\n        scoped$1(() => callback(this), instance._scope);\n      }\n      instance._attachCallbacks.length = 0;\n      this._attachCallbacks = null;\n      const $attrs = instance._attrs,\n        $styles = instance._styles;\n      if ($attrs) {\n        for (const name of Object.keys($attrs)) {\n          if (isFunction$1($attrs[name])) {\n            effect$1(() => setAttribute(this, name, $attrs[name]()));\n          } else {\n            setAttribute(this, name, $attrs[name]);\n          }\n        }\n      }\n      if ($styles) {\n        for (const name of Object.keys($styles)) {\n          if (isFunction$1($styles[name])) {\n            effect$1(() => setStyle(this, name, $styles[name]()));\n          } else {\n            setStyle(this, name, $styles[name]);\n          }\n        }\n      }\n      this.dispatchEvent(new Event(\"attached\"));\n      if (this._root && init && instance._renderer) {\n        const insert2 = () => init.insert(this._root, instance._renderer);\n        if (this.hasAttribute(\"mk-h\") && !ctor._component.el.nohydrate) {\n          runHydration(insert2, {\n            target: this._root\n          });\n        } else {\n          insert2();\n        }\n      }\n      this.connectedCallback();\n    }, instance._scope);\n  }\n  subscribe(callback) {\n    if (!this._component) {\n      this._throwAttachError([\"el.subscribe(({ foo, bar }) => {\", \"  // ...\", \"});\"]);\n    }\n    if (!this._component?.instance._state) {\n      const ctor = this.constructor;\n      const tagName = ctor._component.el.tagName;\n      throw Error(`[maverick] \\`${tagName}\\` element does not have a store to subscribe to`);\n    }\n    return scoped$1(() => {\n      return effect$1(() => callback(this._component.instance._state));\n    }, this._component.instance._scope);\n  }\n  onAttach(callback) {\n    if (this._component) {\n      callback(this);\n      return noop;\n    } else {\n      this._attachCallbacks.add(callback);\n      return () => this._attachCallbacks?.delete(callback);\n    }\n  }\n  onEventDispatch(callback) {\n    const ctor = this.constructor;\n    if (ctor._dispatchedEvents) for (const eventType of ctor._dispatchedEvents) callback(eventType);\n    this._onEventDispatch = callback;\n  }\n  destroy() {\n    this.disconnectedCallback();\n    this._component?.destroy();\n    this._component = null;\n    this._destroyed = true;\n  }\n  dispatchEvent(event) {\n    if (this._delegate) {\n      const ctor = this.constructor;\n      if (!ctor._dispatchedEvents) ctor._dispatchedEvents = /* @__PURE__ */new Set();\n      if (!ctor._dispatchedEvents.has(event.type)) {\n        this._onEventDispatch?.(event.type);\n        ctor._dispatchedEvents.add(event.type);\n      }\n    }\n    return untrack(() => super.dispatchEvent(event));\n  }\n  async _setup() {\n    if (this._pendingSetup) return;\n    this._pendingSetup = true;\n    await setup(this);\n    this._pendingSetup = false;\n  }\n  _throwAttachError(code) {\n    {\n      const ctor = this.constructor;\n      const tagName = ctor._component.el.tagName;\n      throw Error(`[maverick] component instance has not attached yet, wait for event like so:\n\nconst el = document.querySelector('${tagName}');\nel.addEventListener('attached', () => {\n` + (\"  \" + code.join(\"\\n  \")) + `\n}, { once: true });\n`);\n    }\n  }\n};\n_a = CONNECT;\nfunction resolveShadowRootElement(root4) {\n  if (root4.firstChild && isDOMElement(root4.firstChild) && root4.firstChild.localName === \"shadow-root\") {\n    return root4.firstChild;\n  } else {\n    const shadowRoot = $$_create_element(\"shadow-root\");\n    root4.prepend(shadowRoot);\n    return shadowRoot;\n  }\n}\nvar registry = /* @__PURE__ */new Map();\nfunction createServerElement(Component2) {\n  if (registry.has(Component2)) return registry.get(Component2);\n  const register2 = Component2.register;\n  if (Component2.register) {\n    const result = isArray(register2) ? register2 : register2?.();\n    if (isArray(result)) {\n      for (const Component3 of result) {\n        serverElementRegistry.set(Component3.el.tagName, Component3);\n      }\n    }\n  }\n  class MaverickElement extends ServerCustomElement {\n    static get _component() {\n      return Component2;\n    }\n  }\n  registry.set(Component2, MaverickElement);\n  return MaverickElement;\n}\nvar ServerCustomElement = class {\n  constructor() {\n    this.keepAlive = false;\n    this._component = null;\n    this._rendered = false;\n    this._attachCallbacks = /* @__PURE__ */new Set();\n    this.attributes = new Attributes();\n    this.style = new Style();\n    this.classList = new ClassList();\n  }\n  get component() {\n    return this._component;\n  }\n  get $store() {\n    return this._component?.instance._store;\n  }\n  get state() {\n    return {};\n  }\n  attachComponent(component) {\n    scoped$1(() => {\n      this.setAttribute(\"mk-h\", \"\");\n      this.setAttribute(\"mk-d\", \"\");\n      if (this.hasAttribute(\"class\")) {\n        parseClassAttr(this.classList.tokens, this.getAttribute(\"class\"));\n      }\n      if (this.hasAttribute(\"style\")) {\n        parseStyleAttr(this.style.tokens, this.getAttribute(\"style\"));\n      }\n      const instance = component.instance;\n      instance._el = this;\n      this._component = component;\n      for (const callback of [...instance._attachCallbacks, ...this._attachCallbacks]) {\n        callback(this);\n      }\n      this._attachCallbacks = null;\n      const $attrs = instance._attrs,\n        $styles = instance._styles;\n      if ($attrs) {\n        for (const name of Object.keys($attrs)) setAttribute(this, name, unwrapDeep($attrs[name]));\n      }\n      if ($styles) {\n        for (const name of Object.keys($styles)) setStyle(this, name, unwrapDeep($styles[name]));\n      }\n      this._rendered = !!instance._renderer;\n      this._ssr = instance._renderer ? renderToString(instance._renderer).code : \"\";\n      if (this.classList.length > 0) {\n        this.setAttribute(\"class\", this.classList.toString());\n      }\n      if (this.style.length > 0) {\n        this.setAttribute(\"style\", this.style.toString());\n      }\n    }, component.instance._scope);\n  }\n  render() {\n    if (typeof this._ssr !== \"string\") {\n      throw Error(\"[maverick] called `render` before attaching component\");\n    }\n    const innerHTML = this.renderInnerHTML(),\n      def = this.constructor._component.el;\n    return this._rendered || def.shadowRoot && def.css ? def.shadowRoot ? `<template shadowroot=\"${this.getShadowRootMode()}\">${innerHTML}</template>` : `<shadow-root>${innerHTML}</shadow-root>` : innerHTML;\n  }\n  renderInnerHTML() {\n    if (typeof this._ssr !== \"string\") {\n      throw Error(\"[maverick] called `renderInnerHTML` before attaching component\");\n    }\n    const def = this.constructor._component.el,\n      styleTag = def.shadowRoot && def.css ? `<style>${def.css.map(css2 => css2.text).join(\"\")}</style>` : \"\";\n    return styleTag + this._ssr;\n  }\n  getShadowRootMode() {\n    const def = this.constructor._component.el;\n    return def.shadowRoot ? isBoolean(def.shadowRoot) ? \"open\" : def.shadowRoot.mode : \"open\";\n  }\n  getAttribute(name) {\n    return this.attributes.getAttribute(name);\n  }\n  setAttribute(name, value) {\n    this.attributes.setAttribute(name, value);\n  }\n  hasAttribute(name) {\n    return this.attributes.hasAttribute(name);\n  }\n  removeAttribute(name) {\n    return this.attributes.removeAttribute(name);\n  }\n  dispatchEvent() {\n    return false;\n  }\n  onEventDispatch() {}\n  addEventListener() {}\n  removeEventListener() {}\n  subscribe() {\n    return noop;\n  }\n  onAttach(callback) {\n    if (this._component) {\n      callback(this);\n      return noop;\n    } else {\n      this._attachCallbacks.add(callback);\n      return () => this._attachCallbacks?.delete(callback);\n    }\n  }\n  destroy() {\n    this._component?.destroy();\n  }\n};\nvar Attributes = class {\n  constructor() {\n    this._tokens = /* @__PURE__ */new Map();\n  }\n  get length() {\n    return this._tokens.size;\n  }\n  get tokens() {\n    return this._tokens;\n  }\n  getAttribute(name) {\n    return this._tokens.get(name) ?? null;\n  }\n  hasAttribute(name) {\n    return this._tokens.has(name);\n  }\n  setAttribute(name, value) {\n    this._tokens.set(name, value + \"\");\n  }\n  removeAttribute(name) {\n    this._tokens.delete(name);\n  }\n  toString() {\n    if (this._tokens.size === 0) return \"\";\n    let result = \"\";\n    for (const [name, value] of this._tokens) {\n      result += ` ${name}=\"${escape(value, true)}\"`;\n    }\n    return result;\n  }\n};\nvar Style = class {\n  constructor() {\n    this._tokens = /* @__PURE__ */new Map();\n  }\n  get length() {\n    return this._tokens.size;\n  }\n  get tokens() {\n    return this._tokens;\n  }\n  getPropertyValue(prop2) {\n    return this._tokens.get(prop2) ?? \"\";\n  }\n  setProperty(prop2, value) {\n    this._tokens.set(prop2, value ?? \"\");\n  }\n  removeProperty(prop2) {\n    const value = this._tokens.get(prop2);\n    this._tokens.delete(prop2);\n    return value ?? \"\";\n  }\n  toString() {\n    if (this._tokens.size === 0) return \"\";\n    let result = \"\";\n    for (const [name, value] of this._tokens) {\n      result += `${name}: ${value};`;\n    }\n    return result;\n  }\n};\nvar ClassList = class {\n  constructor() {\n    this._tokens = /* @__PURE__ */new Set();\n  }\n  get length() {\n    return this._tokens.size;\n  }\n  get tokens() {\n    return this._tokens;\n  }\n  add(...tokens) {\n    for (const token of tokens) {\n      this._tokens.add(token);\n    }\n  }\n  contains(token) {\n    return this._tokens.has(token);\n  }\n  remove(token) {\n    this._tokens.delete(token);\n  }\n  replace(token, newToken) {\n    if (!this._tokens.has(token)) return false;\n    this._tokens.delete(token);\n    this._tokens.add(newToken);\n    return true;\n  }\n  toggle(token, force) {\n    if (force !== true && (this._tokens.has(token) || force === false)) {\n      this._tokens.delete(token);\n      return false;\n    } else {\n      this._tokens.add(token);\n      return true;\n    }\n  }\n  toString() {\n    return Array.from(this._tokens).join(\" \");\n  }\n};\n\n// src/element/props.ts\nvar PROP_DEF = Symbol(\"PROP_DEF\");\nfunction defineProp(definition) {\n  return {\n    [PROP_DEF]: true,\n    ...definition\n  };\n}\n\n// src/element/define.ts\nfunction defineElement(declaration) {\n  if (\"props\" in declaration) {\n    const props = declaration.props;\n    for (const name of Object.keys(props)) {\n      const def = props[name]?.[PROP_DEF] ? props[name] : {\n        [PROP_DEF]: true,\n        value: props[name]\n      };\n      if (def.attribute !== false && !def.type) def.type = inferAttributeType(def.value);\n      props[name] = def;\n    }\n  }\n  return declaration;\n}\nvar STRING = {\n  from: v => v === null ? \"\" : v + \"\"\n};\nvar NUMBER = {\n  from: v => v === null ? 0 : Number(v)\n};\nvar BOOLEAN = {\n  from: v => v !== null,\n  to: v => v ? \"\" : null\n};\nvar FUNCTION = {\n  from: false,\n  to: () => null\n};\nvar ARRAY = {\n  from: v => v === null ? [] : JSON.parse(v),\n  to: v => JSON.stringify(v)\n};\nvar OBJECT = {\n  from: v => v === null ? {} : JSON.parse(v),\n  to: v => JSON.stringify(v)\n};\nfunction inferAttributeType(value) {\n  if (value === null) return STRING;\n  switch (typeof value) {\n    case \"undefined\":\n      return STRING;\n    case \"string\":\n      return STRING;\n    case \"boolean\":\n      return BOOLEAN;\n    case \"number\":\n      return NUMBER;\n    case \"function\":\n      return FUNCTION;\n    case \"object\":\n      return isArray(value) ? ARRAY : OBJECT;\n    default:\n      return STRING;\n  }\n}\n\n// src/element/decorators.ts\nfunction prop(target, propertyKey, descriptor) {\n  if (!target[PROPS]) target[PROPS] = /* @__PURE__ */new Set();\n  target[PROPS].add(propertyKey);\n}\nfunction method(target, propertyKey, descriptor) {\n  if (!target[METHODS]) target[METHODS] = /* @__PURE__ */new Set();\n  target[METHODS].add(propertyKey);\n}\n\n// src/runtime/ssr/internal.ts\nfunction $$_ssr(template, ...parts) {\n  let result = \"\";\n  for (let i = 0; i < template.length; i++) {\n    result += template[i];\n    result += resolve(escape(parts[i]));\n  }\n  return {\n    [SSR_TEMPLATE]: result\n  };\n}\nfunction $$_custom_element(tagName, props, spreads) {\n  const Component2 = serverElementRegistry.get(tagName);\n  if (!Component2) {\n    throw Error(`[maverick] custom element not registered: ${tagName}`);\n  }\n  const host = new (createServerElement(Component2))();\n  if (spreads && spreads.length > 0) {\n    const spread = $$_merge_spreads(spreads);\n    for (const [key, value] of spread.attributes) {\n      host.setAttribute(key, value);\n    }\n    for (const token of spread.classList) {\n      host.classList.add(token);\n    }\n    for (const [key, value] of spread.styles) {\n      host.style.setProperty(key, value);\n    }\n  }\n  const component = createComponent(Component2, {\n    props\n  });\n  host.attachComponent(component);\n  const children = !props?.innerHTML && props?.$children ? scoped(() => props.$children(), component.instance._scope) : [];\n  return [host.attributes + \">\", injectHTML(!props?.innerHTML ? host.render() : props.innerHTML), ...children];\n}\nfunction $$_attr2(name, value) {\n  const attrValue = resolveAtrr(value);\n  return isString(attrValue) ? ` ${name}=\"${escape(attrValue, true)}\"` : \"\";\n}\nfunction resolveAtrr(value) {\n  if (isFunction(value)) return resolveAtrr(value());\n  if (!value && value !== \"\" && value !== 0) {\n    return null;\n  } else {\n    return value + \"\";\n  }\n}\nfunction $$_classes(base, tokens) {\n  let baseValue = unwrapDeep(base),\n    result = isString(baseValue) ? baseValue : \"\";\n  if (tokens && Object.keys(tokens).length > 0) {\n    const classList = /* @__PURE__ */new Set();\n    parseClassAttr(classList, result);\n    resolveClasses(classList, tokens);\n    result = Array.from(classList).join(\" \");\n  }\n  result = result.trim();\n  return result.length ? ` class=\"${escape(result, true)}\"` : \"\";\n}\nvar classSplitRE = /\\s+/;\nfunction parseClassAttr(tokens, attrValue) {\n  const classes = attrValue.trim().split(classSplitRE);\n  for (const token of classes) tokens.add(token);\n}\nfunction resolveClasses(classList, tokens) {\n  for (const name of Object.keys(tokens)) {\n    if (unwrapDeep(tokens[name])) {\n      classList.add(name);\n    } else {\n      classList.delete(name);\n    }\n  }\n}\nfunction $$_styles(base, tokens) {\n  let baseValue = unwrapDeep(base),\n    result = isString(baseValue) ? trimTrailingSemicolon(baseValue) : \"\";\n  if (Object.keys(tokens).length > 0) {\n    const styleMap = /* @__PURE__ */new Map();\n    parseStyleAttr(styleMap, result);\n    resolveStyles(styleMap, tokens);\n    result = \"\";\n    for (const [name, value] of styleMap) result += `${name}: ${value};`;\n  }\n  result = result.trim();\n  return result.length ? ` style=\"${escape(result, true)}\"` : result;\n}\nvar styleSplitRE = /\\s*:\\s*/;\nvar stylesDelimeterRE = /\\s*;\\s*/;\nfunction parseStyleAttr(tokens, attrValue) {\n  const styles = attrValue.trim().split(stylesDelimeterRE);\n  for (let i = 0; i < styles.length; i++) {\n    if (styles[i] === \"\") continue;\n    const [name, value] = styles[i].split(styleSplitRE);\n    tokens.set(name, value);\n  }\n}\nfunction resolveStyles(tokens, styles) {\n  for (const name of Object.keys(styles)) {\n    const value = unwrapDeep(styles[name]);\n    if (!value && value !== 0) {\n      tokens.delete(name);\n    } else {\n      tokens.set(name, value + \"\");\n    }\n  }\n}\nvar propNameRE = /[A-Z]/;\nfunction $$_merge_spreads(spreads) {\n  let attributes = /* @__PURE__ */new Map(),\n    classList = /* @__PURE__ */new Set(),\n    styles = /* @__PURE__ */new Map();\n  for (let i = 0; i < spreads.length; i++) {\n    const {\n      $$class,\n      $$style,\n      class: classBase,\n      style: styleBase,\n      ...attrs\n    } = spreads[i];\n    const attrNames = Object.keys(attrs);\n    for (let j = 0; j < attrNames.length; j++) {\n      const attrName = attrNames[j];\n      if (!propNameRE.test(attrName)) {\n        const attrValue = resolveAtrr(attrs[attrName]);\n        if (isString(attrValue)) {\n          attributes.set(attrName, attrValue);\n        } else {\n          attributes.delete(attrName);\n        }\n      }\n    }\n    if (\"class\" in spreads[i]) {\n      const base = unwrapDeep(classBase);\n      if (isNull(base) || base === false) {\n        classList.clear();\n      } else if (isString(base) && base.length) {\n        parseClassAttr(classList, base + \"\");\n      }\n    }\n    if ($$class) resolveClasses(classList, $$class);\n    if (\"style\" in spreads[i]) {\n      const base = unwrapDeep(styleBase);\n      if (isNull(base) || base === false) {\n        styles.clear();\n      } else if (isString(base) && base.length) {\n        parseStyleAttr(styles, base);\n      }\n    }\n    if ($$style) resolveStyles(styles, $$style);\n  }\n  return {\n    attributes,\n    classList,\n    styles\n  };\n}\nfunction $$_spread2(spreads) {\n  const {\n    attributes,\n    classList,\n    styles\n  } = $$_merge_spreads(spreads);\n  let result = \"\";\n  if (classList.size > 0) {\n    let _class = Array.from(classList).join(\" \");\n    result += `class=\"${escape(_class.trim(), true)}\"`;\n  }\n  for (const [name, value] of attributes) {\n    result += ` ${name}=\"${escape(value, true)}\"`;\n  }\n  if (styles.size > 0) {\n    let _styles = \"\";\n    for (const [name, value] of styles) _styles += `${name}: ${value};`;\n    result += ` style=\"${escape(_styles.trim(), true)}\"`;\n  }\n  return result.trim();\n}\nfunction $$_inject_html(value) {\n  return injectHTML(resolve(value));\n}\nvar $$_scoped2 = scoped;\n/**\n * The code below this comment was adapted from Lit: https://github.dev/lit/lit\n *\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nexport { $$CHILDREN, $$_attach_declarative_shadow_dom, $$_attr2 as $$_attr, $$_attr as $$_attr2, $$_children, $$_class, $$_classes, $$_clone, $$_computed, $$_create_component, $$_create_element, $$_create_fragment, $$_create_template, $$_create_walker, $$_custom_element, $$_delegate_events, $$_directive, $$_effect, $$_hydrating, $$_inject_html, $$_insert, $$_insert_at_marker, $$_insert_at_marker_lite, $$_insert_lite, $$_listen, $$_merge_props, $$_merge_spreads, $$_next_element, $$_next_template, $$_peek, $$_ref, $$_scoped2 as $$_scoped, $$_scoped as $$_scoped2, $$_setup_custom_element, $$_spread2 as $$_spread, $$_spread as $$_spread2, $$_ssr, $$_style, $$_styles, ARRAY, BOOLEAN, Component, ComponentController, ComponentInstance, FUNCTION, NUMBER, OBJECT, PROP_DEF, SSR_TEMPLATE, STRING, adoptCSS, createComponent, createHTMLElement, createServerElement, css, defineElement, defineProp, hydrate, hydrateLite, hydration, inferAttributeType, injectCSS, injectHTML, method, parseClassAttr, parseStyleAttr, prop, registerCustomElement, registerHeadlessCustomElement, registerLiteCustomElement, render, renderLite, renderToString, resolve, runHydration };","map":{"version":3,"names":["createComment","DOMEvent","listenEvent","isDOMNode","createFragment","attachDeclarativeShadowDOM","setAttribute","toggleClass","setStyle","camelToKebabCase","trimTrailingSemicolon","flattenArray","runAll","isDOMElement","root","isFunction","isArray","isString","isNumber","noop","unwrapDeep","effect","isUndefined","peek","scoped","computed","provideContext","isNull","isBoolean","root$1","scoped$1","getScope","isFunction$1","effect$1","onDispose","tick","signal","untrack","escape","value","isAttr","type","delimeter","escapeDelimeter","iDelimeter","indexOf","isAmpersand","left","out","substring","length","renderToString","root4","result","dispose","code","resolve","SSR_TEMPLATE","Symbol","node","flattened","flat","i","injectHTML","html","ComponentController","el","instance","_el","$props","_props","$store","_store","constructor","onAttach","_attachCallbacks","push","bind","onConnect","_connectCallbacks","onDisconnect","_disconnectCallbacks","onDestroy","_destroyCallbacks","setAttributes","attributes","_attrs","Object","assign","setStyles","styles","_styles","setCSSVars","vars","createEvent","init","dispatch","event","dispatchEvent","listen","handler","options","Component","render","_innerHTML","_renderer","destroy","_destroy","reconcile","parent","nodesA","nodesB","lengthB","endA","endB","startA","startB","after","nextSibling","map","insertBefore","has","remove","Map","set","index","get","sequence","t","replaceChild","createMarkerWalker","document","createTreeWalker","NodeFilter","SHOW_COMMENT","nodeValue","hydration","hydrate","runHydration","run","prev","w","target","insert","before","marker","isSignal","$$CHILDREN","current","insertExpression","newNodes","currentNodes","claimArray","resolveArray","updateDOM","appendArray","nodeType","data","createTextNode","firstChild","textContent","appendChild","nodes","values","computed2","effect4","text","ARRAY_END_MARKER","replace","inserted","isParent","parentNode","removeChild","CONNECTED","INSERT_MARKER_NODE","END_MARKER","END_MARKER_NODE","ARRAY_END_MARKER_VALUE","insertLite","insertEffect","addChild","resolveArray2","cloneNode","insertExpression2","start","end","findArrayEndMarker","removeOldNodes","fragment","createEndMarker","child","append","CSS","sheetCache","WeakMap","supported","supportsAdoptedStyleSheets","ShadowRoot","Document","prototype","CSSStyleSheet","injectCSS","createCSS","css","strings","css2","Error","styleSheet","sheet","replaceSync","toString","adoptCSS","adoptedStyleSheets","css3","style","createElement","join","registerCustomElement","Component2","register","registerLiteCustomElement","registerHeadlessCustomElement","DOM_ELEMENT_REGISTRY","serverElementRegistry","tagName","window","customElements","define","createHTMLElement","$$_create_template","template","innerHTML","content","$$_create_fragment","$$_create_walker","walker","$$_next_element","e","importNode","$$_next_template","element","nextNode","localName","nodeName","currentNode","$$_hydrating","$$_setup_custom_element","host","props","component","createComponent","attachComponent","_scope","$$_clone","clone","firstElementChild","$$_create_element","$$_attach_declarative_shadow_dom","hasAttribute","$$_insert","$$_insert_at_marker","parentElement","$$_insert_lite","$$_insert_at_marker_lite","$$_create_component","$$_children","fn","$$_ref","ref","filter","forEach","ref2","$$_directive","directive","args","$$_attr","$$_class","$$_style","$$_spread","keys","prop2","$$_merge_props","sources","source","$$_listen","capture","DELEGATED_EVENTS","$$_delegate_events","types","document2","events","Set","len","add","addEventListener","delegated_event_handler","eventKey","dataKey","composedPath","defineProperty","configurable","disabled","call","$$_peek","$$_scoped","$$_effect","$$_computed","hydrateLite","renderLite","CONNECT","PROPS","METHODS","ComponentInstance","_destroyed","_state","_dispose","scope","store","create","Proxy","_","createInstanceProps","defs","name","def","setup","findParent","hostCtor","componentCtor","_component","whenDefined","Promise","res","isConnected","keepAlive","resolvePropsFromAttrs","attr","propName","convert","from","attrValue","getAttribute","prefix","split","startsWith","_register","Component3","attrs","attribute","attrName","MaverickElement","HTMLCustomElement","_init","proto","componentProto","enumerable","_queuedActions","delete","_throwAttachError","HTML_ELEMENT","HTMLElement","_a","arguments","_connected","_connectScope","_pendingSetup","_delegate","state","observedAttributes","Array","attributeChangedCallback","newValue","ctor","connectedCallback","_setup","connectCallback","disconnectCallback","disconnectedCallback","callback","requestAnimationFrame","console","warn","_root","shadowRoot","attachShadow","mode","resolveShadowRootElement","attrValues","size","action","$attrs","$styles","Event","insert2","nohydrate","subscribe","onEventDispatch","_dispatchedEvents","eventType","_onEventDispatch","prepend","registry","createServerElement","register2","ServerCustomElement","_rendered","Attributes","Style","classList","ClassList","parseClassAttr","tokens","parseStyleAttr","_ssr","renderInnerHTML","getShadowRootMode","styleTag","removeAttribute","removeEventListener","_tokens","getPropertyValue","setProperty","removeProperty","token","contains","newToken","toggle","force","PROP_DEF","defineProp","definition","defineElement","declaration","inferAttributeType","STRING","v","NUMBER","Number","BOOLEAN","to","FUNCTION","ARRAY","JSON","parse","stringify","OBJECT","prop","propertyKey","descriptor","method","$$_ssr","parts","$$_custom_element","spreads","spread","$$_merge_spreads","key","children","$children","$$_attr2","resolveAtrr","$$_classes","base","baseValue","resolveClasses","trim","classSplitRE","classes","$$_styles","styleMap","resolveStyles","styleSplitRE","stylesDelimeterRE","propNameRE","$$class","$$style","class","classBase","styleBase","attrNames","j","test","clear","$$_spread2","_class","$$_inject_html","$$_scoped2"],"sources":["/Users/user/Documents/mobilestreamapp/client/node_modules/maverick.js/dist/dev/chunks/chunk-FIEGXSET.js"],"sourcesContent":["import { createComment, DOMEvent, listenEvent, isDOMNode, createFragment, attachDeclarativeShadowDOM, setAttribute, toggleClass, setStyle, camelToKebabCase, trimTrailingSemicolon, flattenArray, runAll, isDOMElement } from './chunk-VABDA4SA.js';\nimport { root, isFunction, isArray, isString, isNumber, noop, unwrapDeep, effect, isUndefined, peek, scoped, computed, provideContext, isNull, isBoolean } from './chunk-NQ7TQAU7.js';\nimport { root as root$1, scoped as scoped$1, getScope, isFunction as isFunction$1, effect as effect$1, onDispose, tick, signal, untrack } from '@maverick-js/signals';\n\n// src/std/html.ts\nfunction escape(value, isAttr = false) {\n  const type = typeof value;\n  if (type !== \"string\") {\n    if (!isAttr && type === \"function\")\n      return escape(value());\n    if (isAttr && type === \"boolean\")\n      return value + \"\";\n    return value;\n  }\n  const delimeter = isAttr ? '\"' : \"<\", escapeDelimeter = isAttr ? \"&quot;\" : \"&lt;\";\n  let iDelimeter = value.indexOf(delimeter), isAmpersand = value.indexOf(\"&\");\n  if (iDelimeter < 0 && isAmpersand < 0)\n    return value;\n  let left = 0, out = \"\";\n  while (iDelimeter >= 0 && isAmpersand >= 0) {\n    if (iDelimeter < isAmpersand) {\n      if (left < iDelimeter)\n        out += value.substring(left, iDelimeter);\n      out += escapeDelimeter;\n      left = iDelimeter + 1;\n      iDelimeter = value.indexOf(delimeter, left);\n    } else {\n      if (left < isAmpersand)\n        out += value.substring(left, isAmpersand);\n      out += \"&amp;\";\n      left = isAmpersand + 1;\n      isAmpersand = value.indexOf(\"&\", left);\n    }\n  }\n  if (iDelimeter >= 0) {\n    do {\n      if (left < iDelimeter)\n        out += value.substring(left, iDelimeter);\n      out += escapeDelimeter;\n      left = iDelimeter + 1;\n      iDelimeter = value.indexOf(delimeter, left);\n    } while (iDelimeter >= 0);\n  } else\n    while (isAmpersand >= 0) {\n      if (left < isAmpersand)\n        out += value.substring(left, isAmpersand);\n      out += \"&amp;\";\n      left = isAmpersand + 1;\n      isAmpersand = value.indexOf(\"&\", left);\n    }\n  return left < value.length ? out + value.substring(left) : out;\n}\n\n// src/runtime/ssr/render.ts\nfunction renderToString(root4) {\n  const result = root((dispose) => {\n    const value = root4();\n    dispose();\n    return value;\n  });\n  return { code: resolve(escape(result)) };\n}\nvar SSR_TEMPLATE = /* @__PURE__ */ Symbol();\nfunction resolve(node) {\n  if (isFunction(node)) {\n    return resolve(node());\n  } else if (isArray(node)) {\n    let result = \"\";\n    const flattened = node.flat(10);\n    for (let i = 0; i < flattened.length; i++) {\n      result += resolve(escape(flattened[i]));\n    }\n    return result + \"<!/[]>\";\n  } else if (isString(node) || isNumber(node)) {\n    return node + \"\";\n  } else if (node?.[SSR_TEMPLATE]) {\n    return node[SSR_TEMPLATE];\n  }\n  return \"\";\n}\nfunction injectHTML(html) {\n  return { [SSR_TEMPLATE]: html };\n}\n\n// src/element/controller.ts\nvar ComponentController = class {\n  /**\n   * The custom element this component is attached to. This is safe to use server-side with the\n   * limited API listed below.\n   *\n   * **Important:** Only specific DOM APIs are safe to call server-side. This includes:\n   *\n   * - Attributes: `getAttribute`, `setAttribute`, `removeAttribute`, and `hasAttribute`\n   * - Classes: `classList` API\n   * - Styles: `style` API\n   * - Events (noop): `addEventListener`, `removeEventListener`, and `dispatchEvent`\n   */\n  get el() {\n    return this.instance._el;\n  }\n  /**\n   * Reactive component properties.\n   */\n  get $props() {\n    return this.instance._props;\n  }\n  /**\n   * Reactive component store.\n   */\n  get $store() {\n    return this.instance._store;\n  }\n  constructor(instance) {\n    this.instance = instance;\n    if (this.onAttach)\n      instance._attachCallbacks.push(this.onAttach.bind(this));\n    if (this.onConnect)\n      instance._connectCallbacks.push(this.onConnect.bind(this));\n    if (this.onDisconnect)\n      instance._disconnectCallbacks.push(this.onDisconnect.bind(this));\n    if (this.onDestroy)\n      instance._destroyCallbacks.push(this.onDestroy.bind(this));\n  }\n  /**\n   * This method can be used to specify attributes that should be set on the host element. Any\n   * attributes that are assigned to a function will be considered a signal and updated accordingly.\n   */\n  setAttributes(attributes) {\n    if (this.instance._attrs)\n      Object.assign(this.instance._attrs, attributes);\n  }\n  /**\n   * This method can be used to specify styles that should set be set on the host element. Any\n   * styles that are assigned to a function will be considered a signal and updated accordingly.\n   */\n  setStyles(styles) {\n    if (this.instance._styles)\n      Object.assign(this.instance._styles, styles);\n  }\n  /**\n   * This method is used to satisfy the CSS variables contract specified on the current\n   * custom element definition. Other CSS variables can be set via the `setStyles` method.\n   */\n  setCSSVars(vars) {\n    this.setStyles(vars);\n  }\n  /**\n   * Type-safe utility for creating component DOM events.\n   */\n  createEvent(type, ...init) {\n    return new DOMEvent(type, init[0]);\n  }\n  /**\n   * Creates a `DOMEvent` and dispatches it from the host element. This method is typed to\n   * match all component events.\n   */\n  dispatch(type, ...init) {\n    if (!this.el)\n      return;\n    const event = new DOMEvent(type, init[0]);\n    this.el.dispatchEvent(event);\n  }\n  /**\n   * Adds an event listener for the given `type` and returns a function which can be invoked to\n   * remove the event listener.\n   *\n   * - The listener is removed if the current scope is disposed.\n   * - This method is safe to use on the server (noop).\n   */\n  listen(type, handler, options) {\n    if (!this.el)\n      return noop;\n    return listenEvent(this.el, type, handler, options);\n  }\n};\n\n// src/element/component.ts\nvar Component = class extends ComponentController {\n  constructor(instance) {\n    super(instance);\n    if (this.render && !instance._innerHTML && !instance._renderer) {\n      instance._renderer = this.render.bind(this);\n    }\n  }\n  destroy() {\n    this.instance._destroy();\n  }\n};\n\n// src/runtime/dom/reconcile.ts\nfunction reconcile(parent, nodesA, nodesB) {\n  let lengthB = nodesB.length, endA = nodesA.length, endB = lengthB, startA = 0, startB = 0, after = nodesA[endA - 1].nextSibling, map = null;\n  while (startA < endA || startB < endB) {\n    if (nodesA[startA] === nodesB[startB]) {\n      startA++;\n      startB++;\n      continue;\n    }\n    while (nodesA[endA - 1] === nodesB[endB - 1]) {\n      endA--;\n      endB--;\n    }\n    if (endA === startA) {\n      const node = endB < lengthB ? startB ? nodesB[startB - 1].nextSibling : nodesB[endB - startB] : after;\n      while (startB < endB)\n        parent.insertBefore(nodesB[startB++], node);\n    } else if (endB === startB) {\n      while (startA < endA) {\n        if (!map || !map.has(nodesA[startA]))\n          nodesA[startA].remove();\n        startA++;\n      }\n    } else if (nodesA[startA] === nodesB[endB - 1] && nodesB[startB] === nodesA[endA - 1]) {\n      const node = nodesA[--endA].nextSibling;\n      parent.insertBefore(nodesB[startB++], nodesA[startA++].nextSibling);\n      parent.insertBefore(nodesB[--endB], node);\n      nodesA[endA] = nodesB[endB];\n    } else {\n      if (!map) {\n        map = /* @__PURE__ */ new Map();\n        let i = startB;\n        while (i < endB)\n          map.set(nodesB[i], i++);\n      }\n      const index = map.get(nodesA[startA]);\n      if (index != null) {\n        if (startB < index && index < endB) {\n          let i = startA, sequence = 1, t;\n          while (++i < endA && i < endB) {\n            if ((t = map.get(nodesA[i])) == null || t !== index + sequence)\n              break;\n            sequence++;\n          }\n          if (sequence > index - startB) {\n            const node = nodesA[startA];\n            while (startB < index)\n              parent.insertBefore(nodesB[startB++], node);\n          } else\n            parent.replaceChild(nodesB[startB++], nodesA[startA++]);\n        } else\n          startA++;\n      } else\n        nodesA[startA++].remove();\n    }\n  }\n}\n\n// src/runtime/dom/walker.ts\nvar createMarkerWalker = (root4) => (\n  // @ts-expect-error - filter accepts `boolean` but not typed.\n  document.createTreeWalker(root4, NodeFilter.SHOW_COMMENT, (node) => node.nodeValue === \"$\")\n);\n\n// src/runtime/dom/render.ts\nvar hydration = null;\nfunction hydrate(root4, options) {\n  return runHydration(() => render(root4, options), options);\n}\nfunction runHydration(run, options) {\n  const prev = hydration;\n  hydration = { w: createMarkerWalker(options.target) };\n  const result = run();\n  hydration = prev;\n  return result;\n}\nfunction render(root4, options) {\n  return root((dispose) => {\n    if (!hydration) {\n      insert(options.target, root4(), options.before);\n    } else {\n      unwrapDeep(root4);\n    }\n    return dispose;\n  });\n}\n\n// src/runtime/dom/insert.ts\nfunction insert(parent, value, marker) {\n  let isSignal = isFunction(value);\n  if (isSignal && value[$$CHILDREN]) {\n    value = value();\n    isSignal = isFunction(value);\n  }\n  if (isSignal) {\n    let current;\n    effect(\n      () => void (current = insertExpression(\n        parent,\n        unwrapDeep(value()),\n        marker,\n        current,\n        true\n      ))\n    );\n    return;\n  } else if (hydration) {\n    marker.remove();\n  } else\n    insertExpression(parent, value, marker);\n}\nfunction insertExpression(parent, value, marker, current, isSignal = false) {\n  if (value === current)\n    return current;\n  if (isArray(value)) {\n    const newNodes = [], currentNodes = hydration && marker ? claimArray(marker) : current && isArray(current) ? current : [];\n    if (value.length && resolveArray(newNodes, value, currentNodes, isSignal)) {\n      effect(() => void (current = insertExpression(parent, newNodes, marker, currentNodes, true)));\n      return () => current;\n    }\n    if (hydration && marker)\n      return currentNodes;\n    if (newNodes.length === 0) {\n      updateDOM(parent, current);\n    } else if (currentNodes.length) {\n      reconcile(parent, currentNodes, newNodes);\n    } else {\n      current && updateDOM(parent, current, marker);\n      appendArray(parent, newNodes, marker);\n    }\n    return newNodes;\n  } else if (isString(value) || isNumber(value)) {\n    if (!isUndefined(marker)) {\n      if (isDOMNode(current) && current.nodeType === 3) {\n        current.data = value + \"\";\n      } else if (!hydration) {\n        return updateDOM(parent, current, marker, document.createTextNode(value + \"\"));\n      } else {\n        return marker.nextSibling;\n      }\n    } else if (current !== \"\" && isString(current)) {\n      return parent.firstChild.data = value + \"\";\n    } else\n      return parent.textContent = value + \"\";\n  } else if (isDOMNode(value)) {\n    if (hydration) ; else if (marker || isArray(current)) {\n      if (!isUndefined(marker))\n        return current = updateDOM(parent, current, marker, value);\n      updateDOM(parent, current, null, value);\n    } else if (!current || !parent.firstChild) {\n      parent.appendChild(value);\n    } else\n      parent.replaceChild(value, parent.firstChild);\n    return value;\n  } else {\n    return updateDOM(parent, current, marker);\n  }\n  return current;\n}\nfunction appendArray(parent, nodes, marker) {\n  if (isUndefined(marker)) {\n    for (let i = 0; i < nodes.length; i++)\n      parent.appendChild(nodes[i]);\n  } else {\n    for (let i = 0; i < nodes.length; i++)\n      parent.insertBefore(nodes[i], marker);\n  }\n}\nfunction resolveArray(nodes, values, current, computed2) {\n  let value, prev, effect4 = false;\n  for (let i = 0; i < values.length; i++) {\n    value = values[i], prev = current[i];\n    if (isDOMNode(value)) {\n      nodes.push(value);\n    } else if (isArray(value)) {\n      effect4 = resolveArray(nodes, value, isArray(prev) ? prev : [], computed2) || effect4;\n    } else if (isFunction(value)) {\n      if (computed2) {\n        value = value();\n        effect4 = resolveArray(\n          nodes,\n          isArray(value) ? value : [value],\n          isArray(prev) ? prev : [prev],\n          true\n        ) || effect4;\n      } else {\n        nodes.push(value);\n        effect4 = true;\n      }\n    } else if (value || value === 0) {\n      const text = value + \"\";\n      if (prev && prev.nodeType === 3 && prev.data === text) {\n        nodes.push(prev);\n      } else {\n        nodes.push(document.createTextNode(text));\n      }\n    }\n  }\n  return effect4;\n}\nvar ARRAY_END_MARKER = \"/[]\";\nfunction claimArray(marker) {\n  let node = marker.nextSibling, nodes = [];\n  while (node) {\n    if (node.nodeType !== 8) {\n      nodes.push(node);\n    } else if (node.nodeValue === ARRAY_END_MARKER) {\n      node.remove();\n      break;\n    }\n    node = node.nextSibling;\n  }\n  return nodes;\n}\nfunction updateDOM(parent, current, marker, replace) {\n  if (isUndefined(marker)) {\n    parent.textContent = \"\";\n    return;\n  }\n  const node = replace || createComment(\"~\");\n  if (isArray(current) && current.length) {\n    let el, inserted = false, isParent = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      el = current[i];\n      if (el !== node) {\n        isParent = el.parentNode === parent;\n        if (!inserted && !i)\n          isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);\n        else\n          isParent && parent.removeChild(el);\n      } else\n        inserted = true;\n    }\n  } else if (isDOMNode(current)) {\n    parent.replaceChild(node, current);\n  } else {\n    parent.insertBefore(node, marker);\n  }\n  return node;\n}\n\n// src/runtime/dom/insert-lite.ts\nvar CONNECTED = /* @__PURE__ */ Symbol(\"CONNECTED\" );\nvar INSERT_MARKER_NODE = createComment(\"$$\");\nvar END_MARKER = /* @__PURE__ */ Symbol(\"END_MARKER\" );\nvar END_MARKER_NODE = /* @__PURE__ */ createComment(\"/$\");\nvar ARRAY_END_MARKER_VALUE = \"/[]\";\nfunction insertLite(parent, value, before) {\n  let isSignal = isFunction(value);\n  if (isSignal && value[$$CHILDREN]) {\n    value = value();\n    isSignal = isFunction(value);\n  }\n  if (isSignal) {\n    insertEffect(parent, value, before);\n  } else if (!hydration && (value || value === 0)) {\n    addChild(\n      parent,\n      isArray(value) ? resolveArray2(value) : isDOMNode(value) ? value : document.createTextNode(value + \"\"),\n      before\n    );\n  }\n}\nfunction addChild(parent, node, before) {\n  if (!node)\n    return;\n  if (before)\n    parent.insertBefore(node, before);\n  else\n    parent.appendChild(node);\n}\nfunction insertEffect(parent, value, before) {\n  const marker = before && before.nodeType === 8 ? before : INSERT_MARKER_NODE.cloneNode();\n  if (marker !== before)\n    addChild(parent, marker, before);\n  effect(() => void insertExpression2(marker, unwrapDeep(value)));\n}\nfunction insertExpression2(start, value) {\n  const end = start[END_MARKER];\n  if (isArray(value)) {\n    if (hydration) {\n      start[END_MARKER] = findArrayEndMarker(start);\n    } else {\n      if (end)\n        removeOldNodes(start, end);\n      const fragment = resolveArray2(value);\n      if (!fragment)\n        return;\n      if (!end)\n        fragment.appendChild(createEndMarker(start));\n      start.after(fragment);\n    }\n  } else if (isDOMNode(value)) {\n    if (end)\n      removeOldNodes(start, end);\n    if (!hydration)\n      start.after(value);\n    if (!end)\n      value.after(createEndMarker(start));\n  } else if (isString(value) || isNumber(value)) {\n    if (start[CONNECTED]) {\n      start.nextSibling.data = value + \"\";\n      return;\n    }\n    if (end)\n      removeOldNodes(start, end);\n    let text;\n    if (!hydration) {\n      text = document.createTextNode(value + \"\");\n      start.after(text);\n    } else {\n      text = start.nextSibling;\n    }\n    start[CONNECTED] = true;\n    if (!end)\n      text.after(createEndMarker(start));\n  } else if (end) {\n    removeOldNodes(start, end);\n  }\n}\nfunction createEndMarker(start) {\n  return start[END_MARKER] = END_MARKER_NODE.cloneNode();\n}\nfunction findArrayEndMarker(node) {\n  while (node) {\n    if (node.nodeType === 8 && node.nodeValue === ARRAY_END_MARKER_VALUE)\n      return node;\n    node = node.nextSibling;\n  }\n}\nfunction removeOldNodes(start, end) {\n  while (start.nextSibling !== end)\n    start.nextSibling.remove();\n  start[CONNECTED] = false;\n}\nfunction resolveArray2(value) {\n  const flattened = flattenArray(value);\n  if (!flattened.length)\n    return null;\n  const fragment = createFragment();\n  for (let i = 0; i < flattened.length; i++) {\n    const child = flattened[i];\n    if (isFunction(child)) {\n      insertEffect(fragment, child);\n    } else {\n      fragment.append(child);\n    }\n  }\n  return fragment;\n}\n\n// src/element/css.ts\nvar CSS = /* @__PURE__ */ Symbol();\nvar sheetCache = /* @__PURE__ */ new WeakMap();\nvar supported;\nvar supportsAdoptedStyleSheets = () => !isUndefined(supported) ? supported : supported = ShadowRoot && \"adoptedStyleSheets\" in Document.prototype && \"replace\" in CSSStyleSheet.prototype;\nfunction injectCSS(value) {\n  return createCSS(value + \"\");\n}\nfunction css(strings, ...values) {\n  let css2 = strings[0] ?? \"\";\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    if (value?.[CSS]) {\n      css2 += value.text;\n    } else if (typeof value === \"number\") {\n      css2 += value;\n    } else {\n      throw new Error(\n        `[maverick] value passed to \\`css\\` function must be a \\`css\\` function result: ${value}. Use \\`injectCSS\\` to pass non-literal values, but take care to ensure page security.`\n      );\n    }\n    css2 += strings[i + 1];\n  }\n  return createCSS(css2, strings);\n}\nfunction createCSS(css2, strings) {\n  let styleSheet;\n  return {\n    [CSS]: true,\n    get text() {\n      return css2;\n    },\n    get sheet() {\n      if (styleSheet) {\n        return styleSheet;\n      } else if (strings && sheetCache.has(strings)) {\n        return sheetCache.get(strings);\n      } else if (supportsAdoptedStyleSheets()) {\n        (styleSheet = new CSSStyleSheet()).replaceSync(css2);\n        if (strings)\n          sheetCache.set(strings, styleSheet);\n        return styleSheet;\n      }\n      return;\n    },\n    toString() {\n      return css2;\n    }\n  };\n}\nfunction adoptCSS(root4, css2) {\n  if (supportsAdoptedStyleSheets()) {\n    root4.adoptedStyleSheets = css2.map((css3) => css3.sheet);\n  } else {\n    const style = document.createElement(\"style\");\n    style.textContent = css2.map((css3) => css3.text).join(\"\");\n    root4.appendChild(style);\n  }\n}\n\n// src/element/register.ts\nfunction registerCustomElement(Component2) {\n  register(Component2, {\n    insert,\n    adoptCSS\n  });\n}\nfunction registerLiteCustomElement(Component2) {\n  register(Component2, {\n    insert: insertLite\n  });\n}\nfunction registerHeadlessCustomElement(Component2) {\n  register(Component2);\n}\nvar DOM_ELEMENT_REGISTRY = Symbol(\"MAVERICK_REGISTRY\" );\nvar serverElementRegistry = void 0;\nfunction register(Component2, init) {\n  const tagName = Component2.el.tagName;\n  if (!window.customElements.get(tagName)) {\n    if (!window[DOM_ELEMENT_REGISTRY])\n      window[DOM_ELEMENT_REGISTRY] = /* @__PURE__ */ new Map();\n    window[DOM_ELEMENT_REGISTRY].set(tagName, Component2);\n    window.customElements.define(tagName, createHTMLElement(Component2, init));\n  }\n}\n\n// src/runtime/dom/internal.ts\nfunction $$_create_template(html) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = html;\n  return template.content;\n}\nvar $$_create_fragment = createFragment;\nfunction $$_create_walker(fragment, walker = hydration?.w) {\n  try {\n    return [$$_next_element(walker), walker];\n  } catch (e) {\n    return $$_create_walker(fragment, createMarkerWalker(document.importNode(fragment, true)));\n  }\n}\nfunction $$_next_template(fragment) {\n  return $$_create_walker(fragment)[0];\n}\nfunction $$_next_element(walker) {\n  let element = walker.nextNode().nextSibling;\n  if (element.localName.indexOf(\"-\") > 0 && element.firstChild && element.firstChild.nodeName === \"SHADOW-ROOT\") {\n    let node = element.firstChild.nextSibling || element.nextSibling;\n    if (node)\n      walker.currentNode = node;\n  }\n  return element;\n}\nvar $$_hydrating = hydration;\nfunction $$_setup_custom_element(host, props) {\n  const Component2 = window[DOM_ELEMENT_REGISTRY]?.get(host.localName);\n  if (!Component2) {\n    throw Error(\n      `[maverick] custom element not registered: ${host.localName}` \n    );\n  }\n  const component = createComponent(Component2, { props });\n  host.attachComponent(component);\n  return component.instance._scope;\n}\nfunction $$_clone(fragment) {\n  const clone = document.importNode(fragment, true);\n  return clone.firstElementChild;\n}\nfunction $$_create_element(tagName) {\n  return document.createElement(tagName);\n}\nfunction $$_attach_declarative_shadow_dom(element) {\n  if (element.firstChild?.nodeName === \"TEMPLATE\") {\n    if (element.firstChild.hasAttribute(\"shadowroot\")) {\n      attachDeclarativeShadowDOM(element);\n    } else {\n      element.firstChild.remove();\n    }\n  }\n}\nvar $$_insert = insert;\nfunction $$_insert_at_marker(marker, value) {\n  insert(marker.parentElement, value, marker);\n}\nvar $$_insert_lite = insertLite;\nfunction $$_insert_at_marker_lite(marker, value) {\n  insertLite(marker.parentElement, value, marker);\n}\nfunction $$_create_component(component, props = {}) {\n  return peek(() => component(props));\n}\nvar $$CHILDREN = /* @__PURE__ */ Symbol(\"$$CHILDREN\" );\nfunction $$_children(fn) {\n  fn[$$CHILDREN] = true;\n  return fn;\n}\nfunction $$_ref(element, ref) {\n  if (isArray(ref)) {\n    ref.filter(isFunction).forEach((ref2) => ref2(element));\n  } else if (isFunction(ref)) {\n    ref(element);\n  }\n}\nfunction $$_directive(element, directive, args) {\n  if (isFunction(directive))\n    directive(element, ...args);\n}\nvar $$_attr = setAttribute;\nvar $$_class = toggleClass;\nvar $$_style = setStyle;\nfunction $$_spread(element, props) {\n  const keys = Object.keys(props);\n  for (let i = 0; i < keys.length; i++) {\n    const prop2 = keys[i];\n    if (prop2 in element) {\n      if (isFunction(props[prop2])) {\n        effect(() => void (element[prop2] = props[prop2]()));\n      } else {\n        element[prop2] = props[prop2];\n      }\n    } else if (isFunction(props[prop2])) {\n      effect(() => void $$_attr(element, prop2, props[prop2]()));\n    } else {\n      $$_attr(element, prop2, props[prop2]);\n    }\n  }\n}\nfunction $$_merge_props(...sources) {\n  const target = sources[0] || {};\n  for (let i = 1; i < sources.length; i++) {\n    const source = sources[i];\n    if (source)\n      Object.assign(target, source);\n  }\n  return target;\n}\nfunction $$_listen(target, type, handler, capture = false) {\n  if (isFunction(handler)) {\n    listenEvent(target, type, handler, { capture });\n  }\n}\nvar DELEGATED_EVENTS = /* @__PURE__ */ Symbol(\"DELEGATED_EVENTS\" );\nfunction $$_delegate_events(types, document2 = window.document) {\n  const events = document2[DELEGATED_EVENTS] ??= /* @__PURE__ */ new Set();\n  for (let i = 0, len = types.length; i < len; i++) {\n    const type = types[i];\n    if (!events.has(type)) {\n      events.add(type);\n      document2.addEventListener(type, delegated_event_handler);\n    }\n  }\n}\nfunction delegated_event_handler(event) {\n  const eventKey = `$$${event.type}`, dataKey = `$$${event.type}Data`;\n  let node = event.composedPath && event.composedPath()[0] || event.target;\n  if (event.target !== node) {\n    Object.defineProperty(event, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(event, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  let handler, data;\n  while (node) {\n    handler = node[eventKey];\n    if (handler && !node.disabled && isFunction(handler)) {\n      data = node[dataKey];\n      !isUndefined(data) ? handler.call(node, data, event) : handler.call(node, event);\n    }\n    node = node.parentNode || node.host;\n  }\n}\nvar $$_peek = peek;\nvar $$_scoped = scoped;\nvar $$_effect = effect;\nvar $$_computed = computed;\nfunction hydrateLite(root4, options) {\n  return runHydration(() => renderLite(root4, options), options);\n}\nfunction renderLite(root4, options) {\n  return root$1((dispose) => {\n    if (!hydration) {\n      insertLite(options.target, root4());\n    } else {\n      unwrapDeep(root4);\n    }\n    return dispose;\n  });\n}\n\n// src/element/internal.ts\nvar CONNECT = /* @__PURE__ */ Symbol(\"CONNECT\" );\nvar PROPS = /* @__PURE__ */ Symbol(\"PROPS\" );\nvar METHODS = /* @__PURE__ */ Symbol(\"METHODS\" );\nfunction createComponent(Component2, init) {\n  const instance = new ComponentInstance(Component2, init);\n  return scoped$1(() => new Component2(instance), instance._scope);\n}\nvar ComponentInstance = class {\n  constructor(Component2, init = {}) {\n    this._el = null;\n    this._renderer = null;\n    this._innerHTML = false;\n    this._destroyed = false;\n    this._attrs = {};\n    this._styles = {};\n    this._props = {};\n    // these props cause type issues - don't type them.\n    this._state = null;\n    this._store = null;\n    this._attachCallbacks = [];\n    this._connectCallbacks = [];\n    this._disconnectCallbacks = [];\n    this._destroyCallbacks = [];\n    root$1((dispose) => {\n      this._scope = getScope();\n      this._dispose = dispose;\n      if (init.scope)\n        init.scope.append(this._scope);\n      const store = Component2.el.store;\n      if (store) {\n        this._store = store.create();\n        this._state = new Proxy(this._store, {\n          get: (_, prop2) => this._store[prop2]()\n        });\n        provideContext(store, this._store);\n      }\n      const props = Component2.el.props;\n      if (props) {\n        this._props = createInstanceProps(props);\n        if (init.props) {\n          for (const prop2 of Object.keys(init.props)) {\n            if (prop2 in props) {\n              const value = init.props[prop2];\n              if (isFunction$1(value)) {\n                effect$1(() => void this._props[prop2].set(value()));\n              } else {\n                this._props[prop2].set(value);\n              }\n            }\n          }\n        }\n      }\n      if (init.props?.innerHTML) {\n        this._innerHTML = true;\n      }\n      onDispose(this._destroy.bind(this));\n    });\n  }\n  _destroy() {\n    if (this._destroyed)\n      return;\n    this._destroyed = true;\n    for (const destroy of this._destroyCallbacks) {\n      scoped$1(() => destroy(this._el), this._scope);\n    }\n    this._el?.destroy();\n    this._attachCallbacks.length = 0;\n    this._connectCallbacks.length = 0;\n    this._disconnectCallbacks.length = 0;\n    this._destroyCallbacks.length = 0;\n    tick();\n    this._dispose();\n    this._el = null;\n    this._renderer = null;\n  }\n};\nfunction createInstanceProps(defs) {\n  const props = {};\n  for (const name of Object.keys(defs)) {\n    const def = defs[name];\n    props[name] = signal(def.value, def);\n  }\n  return props;\n}\n\n// src/element/setup.ts\nasync function setup(host) {\n  const parent = findParent(host);\n  const hostCtor = host.constructor, componentCtor = hostCtor._component;\n  if (parent) {\n    await customElements.whenDefined(parent.localName);\n    parent[CONNECT] === true || await new Promise((res) => parent[CONNECT].push(res));\n  }\n  if (host.isConnected) {\n    if (parent?.keepAlive)\n      host.keepAlive = true;\n    host.attachComponent(\n      createComponent(componentCtor, {\n        scope: parent?.component?.instance._scope\n      })\n    );\n  }\n}\nfunction resolvePropsFromAttrs(host) {\n  const hostCtor = host.constructor, componentCtor = hostCtor._component, props = {};\n  if (!hostCtor._attrs)\n    return props;\n  for (const attr of host.attributes) {\n    let propName = hostCtor._attrs.get(attr.name), convert = propName && componentCtor.el.props[propName].type?.from;\n    if (convert) {\n      let attrValue = host.getAttribute(attr.name);\n      props[propName] = convert(attrValue);\n    }\n  }\n  return props;\n}\nfunction findParent(host) {\n  let hostCtor = host.constructor, componentCtor = hostCtor._component, node = host.parentNode, prefix = componentCtor.el.tagName.split(\"-\", 1)[0] + \"-\";\n  while (node) {\n    if (node.nodeType === 1 && node.localName.startsWith(prefix)) {\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return null;\n}\n\n// src/element/create-html-element.ts\nfunction createHTMLElement(Component2, init) {\n  const _register = Component2.register;\n  if (Component2.register) {\n    const result = isArray(_register) ? _register : _register?.();\n    if (isArray(result))\n      for (const Component3 of result)\n        register(Component3, init);\n  }\n  let attrs;\n  if (Component2.el.props) {\n    attrs = /* @__PURE__ */ new Map();\n    for (const propName of Object.keys(Component2.el.props)) {\n      const def = Component2.el.props[propName];\n      const attr = def.attribute;\n      if (attr !== false) {\n        const attrName = attr ?? camelToKebabCase(propName);\n        attrs.set(attrName, propName);\n      }\n    }\n  }\n  class MaverickElement extends HTMLCustomElement {\n    static get _component() {\n      return Component2;\n    }\n  }\n  MaverickElement._init = init;\n  MaverickElement._attrs = attrs;\n  const proto = MaverickElement.prototype, componentProto = Component2.prototype;\n  if (Component2.el.props) {\n    for (const prop2 of Object.keys(Component2.el.props)) {\n      Object.defineProperty(proto, prop2, {\n        enumerable: true,\n        configurable: true,\n        get() {\n          return !this.component ? Component2.el.props[prop2].value : this.component.instance._props[prop2]();\n        },\n        set(value) {\n          const fn = () => this.component.instance._props[prop2].set(value);\n          if (!this.component) {\n            this._queuedActions.delete(prop2);\n            this._queuedActions.set(prop2, fn);\n            return;\n          }\n          fn();\n        }\n      });\n    }\n  }\n  if (componentProto[PROPS]) {\n    for (const name of componentProto[PROPS]) {\n      Object.defineProperty(proto, name, {\n        enumerable: true,\n        configurable: true,\n        get() {\n          return this.component ? this.component[name] : void 0;\n        },\n        set(value) {\n          if (!this.component) {\n            this._queuedActions.delete(name);\n            this._queuedActions.set(name, () => {\n              this.component[name] = value;\n            });\n            return;\n          }\n          this.component[name] = value;\n        }\n      });\n    }\n  }\n  if (componentProto[METHODS]) {\n    for (const name of componentProto[METHODS]) {\n      proto[name] = function(...args) {\n        if (!this.component)\n          this._throwAttachError([`el.${name}(...)`]);\n        return this.component[name](...args);\n      };\n    }\n  }\n  return MaverickElement;\n}\nvar HTML_ELEMENT = HTMLElement;\nvar _a;\nvar HTMLCustomElement = class extends HTML_ELEMENT {\n  constructor() {\n    super(...arguments);\n    this._connected = false;\n    this._destroyed = false;\n    this._component = null;\n    this._connectScope = null;\n    this._attachCallbacks = /* @__PURE__ */ new Set();\n    this._disconnectCallbacks = [];\n    this._queuedActions = /* @__PURE__ */ new Map();\n    this.keepAlive = false;\n    /** @internal */\n    this[_a] = [];\n    this._pendingSetup = false;\n  }\n  get _delegate() {\n    return this.hasAttribute(\"mk-d\");\n  }\n  get component() {\n    return this._component;\n  }\n  get $store() {\n    return this._component?.instance._store;\n  }\n  get state() {\n    if (!this._component) {\n      this._throwAttachError([\"el.state.foo\"]);\n    }\n    return this._component.instance._state;\n  }\n  static get observedAttributes() {\n    return this._attrs ? Array.from(this._attrs.keys()) : [];\n  }\n  attributeChangedCallback(name, _, newValue) {\n    const ctor = this.constructor;\n    if (!this._component || !ctor._attrs)\n      return;\n    const propName = ctor._attrs.get(name);\n    const from = ctor._component.el.props[propName]?.type?.from;\n    if (from)\n      this._component.instance._props[propName].set(from(newValue));\n  }\n  connectedCallback() {\n    const instance = this._component?.instance;\n    if (!this._delegate && !instance)\n      return this._setup();\n    if (!instance || !this.isConnected || this._connected)\n      return;\n    if (this._destroyed) {\n      {\n        throw Error(\n          \"[maverick] attempting to connect an element that has been destroyed\" \n        );\n      }\n    }\n    if (this.hasAttribute(\"keep-alive\"))\n      this.keepAlive = true;\n    this._connected = true;\n    if (instance._connectCallbacks.length) {\n      scoped$1(() => {\n        root$1((dispose) => {\n          this._connectScope = getScope();\n          for (const connectCallback of instance._connectCallbacks) {\n            scoped$1(() => {\n              const disconnectCallback = connectCallback(this);\n              if (isFunction$1(disconnectCallback)) {\n                this._disconnectCallbacks.push(disconnectCallback);\n              }\n            }, this._connectScope);\n          }\n          this._disconnectCallbacks.push(dispose);\n        });\n      }, instance._scope);\n    }\n    if (isArray(this[CONNECT])) {\n      runAll(this[CONNECT], this);\n      this[CONNECT] = true;\n    }\n    return;\n  }\n  disconnectedCallback() {\n    const instance = this._component?.instance;\n    if (!this._connected || this._destroyed)\n      return;\n    this._connected = false;\n    for (const callback of this._disconnectCallbacks) {\n      scoped$1(callback, this._connectScope);\n    }\n    if (instance?._disconnectCallbacks.length) {\n      for (const callback of instance._disconnectCallbacks) {\n        scoped$1(() => callback(this), instance._scope);\n      }\n    }\n    this._connectScope = null;\n    if (!this._delegate && !this.keepAlive) {\n      requestAnimationFrame(() => {\n        if (!this.isConnected) {\n          instance?._destroy();\n          this._destroyed = true;\n        }\n      });\n    }\n  }\n  attachComponent(component) {\n    const instance = component.instance, ctor = this.constructor, def = ctor._component.el, init = ctor._init;\n    if (this._component) {\n      console.warn(`[maverick] element \\`${def.tagName}\\` already has attached component`);\n    }\n    if (this._destroyed) {\n      console.warn(`[maverick] attempted attaching to destroyed element \\`${def.tagName}\\``);\n    }\n    if (this._component || this._destroyed)\n      return;\n    scoped$1(() => {\n      this._root = instance._renderer ? def.shadowRoot ? this.shadowRoot ?? this.attachShadow(isBoolean(def.shadowRoot) ? { mode: \"open\" } : def.shadowRoot) : resolveShadowRootElement(this) : null;\n      if (def.css && !init?.adoptCSS) {\n        console.warn(\n          `[maverick] \\`css\\` was provided for \\`${def.tagName}\\` but element registration doesn't support adopting stylesheets. Resolve this by registering element with \\`registerElement\\` instead of lite or headless.`\n        );\n      }\n      if (!hydration && def.shadowRoot && def.css && init?.adoptCSS) {\n        init.adoptCSS(this._root, def.css);\n      }\n      instance._el = this;\n      this._component = component;\n      const attrValues = resolvePropsFromAttrs(this);\n      for (const name of Object.keys(attrValues)) {\n        instance._props[name].set(attrValues[name]);\n      }\n      if (this._queuedActions?.size) {\n        for (const action of this._queuedActions.values())\n          action();\n      }\n      this._queuedActions = null;\n      for (const callback of [...instance._attachCallbacks, ...this._attachCallbacks]) {\n        scoped$1(() => callback(this), instance._scope);\n      }\n      instance._attachCallbacks.length = 0;\n      this._attachCallbacks = null;\n      const $attrs = instance._attrs, $styles = instance._styles;\n      if ($attrs) {\n        for (const name of Object.keys($attrs)) {\n          if (isFunction$1($attrs[name])) {\n            effect$1(() => setAttribute(this, name, $attrs[name]()));\n          } else {\n            setAttribute(this, name, $attrs[name]);\n          }\n        }\n      }\n      if ($styles) {\n        for (const name of Object.keys($styles)) {\n          if (isFunction$1($styles[name])) {\n            effect$1(() => setStyle(this, name, $styles[name]()));\n          } else {\n            setStyle(this, name, $styles[name]);\n          }\n        }\n      }\n      this.dispatchEvent(new Event(\"attached\"));\n      if (this._root && init && instance._renderer) {\n        const insert2 = () => init.insert(this._root, instance._renderer);\n        if (this.hasAttribute(\"mk-h\") && !ctor._component.el.nohydrate) {\n          runHydration(insert2, { target: this._root });\n        } else {\n          insert2();\n        }\n      }\n      this.connectedCallback();\n    }, instance._scope);\n  }\n  subscribe(callback) {\n    if (!this._component) {\n      this._throwAttachError([\"el.subscribe(({ foo, bar }) => {\", \"  // ...\", \"});\"]);\n    }\n    if (!this._component?.instance._state) {\n      const ctor = this.constructor;\n      const tagName = ctor._component.el.tagName;\n      throw Error(`[maverick] \\`${tagName}\\` element does not have a store to subscribe to`);\n    }\n    return scoped$1(() => {\n      return effect$1(() => callback(this._component.instance._state));\n    }, this._component.instance._scope);\n  }\n  onAttach(callback) {\n    if (this._component) {\n      callback(this);\n      return noop;\n    } else {\n      this._attachCallbacks.add(callback);\n      return () => this._attachCallbacks?.delete(callback);\n    }\n  }\n  onEventDispatch(callback) {\n    const ctor = this.constructor;\n    if (ctor._dispatchedEvents)\n      for (const eventType of ctor._dispatchedEvents)\n        callback(eventType);\n    this._onEventDispatch = callback;\n  }\n  destroy() {\n    this.disconnectedCallback();\n    this._component?.destroy();\n    this._component = null;\n    this._destroyed = true;\n  }\n  dispatchEvent(event) {\n    if (this._delegate) {\n      const ctor = this.constructor;\n      if (!ctor._dispatchedEvents)\n        ctor._dispatchedEvents = /* @__PURE__ */ new Set();\n      if (!ctor._dispatchedEvents.has(event.type)) {\n        this._onEventDispatch?.(event.type);\n        ctor._dispatchedEvents.add(event.type);\n      }\n    }\n    return untrack(() => super.dispatchEvent(event));\n  }\n  async _setup() {\n    if (this._pendingSetup)\n      return;\n    this._pendingSetup = true;\n    await setup(this);\n    this._pendingSetup = false;\n  }\n  _throwAttachError(code) {\n    {\n      const ctor = this.constructor;\n      const tagName = ctor._component.el.tagName;\n      throw Error(\n        `[maverick] component instance has not attached yet, wait for event like so:\n\nconst el = document.querySelector('${tagName}');\nel.addEventListener('attached', () => {\n` + (\"  \" + code.join(\"\\n  \")) + `\n}, { once: true });\n`\n      );\n    }\n  }\n};\n_a = CONNECT;\nfunction resolveShadowRootElement(root4) {\n  if (root4.firstChild && isDOMElement(root4.firstChild) && root4.firstChild.localName === \"shadow-root\") {\n    return root4.firstChild;\n  } else {\n    const shadowRoot = $$_create_element(\"shadow-root\");\n    root4.prepend(shadowRoot);\n    return shadowRoot;\n  }\n}\nvar registry = /* @__PURE__ */ new Map();\nfunction createServerElement(Component2) {\n  if (registry.has(Component2))\n    return registry.get(Component2);\n  const register2 = Component2.register;\n  if (Component2.register) {\n    const result = isArray(register2) ? register2 : register2?.();\n    if (isArray(result)) {\n      for (const Component3 of result) {\n        serverElementRegistry.set(Component3.el.tagName, Component3);\n      }\n    }\n  }\n  class MaverickElement extends ServerCustomElement {\n    static get _component() {\n      return Component2;\n    }\n  }\n  registry.set(Component2, MaverickElement);\n  return MaverickElement;\n}\nvar ServerCustomElement = class {\n  constructor() {\n    this.keepAlive = false;\n    this._component = null;\n    this._rendered = false;\n    this._attachCallbacks = /* @__PURE__ */ new Set();\n    this.attributes = new Attributes();\n    this.style = new Style();\n    this.classList = new ClassList();\n  }\n  get component() {\n    return this._component;\n  }\n  get $store() {\n    return this._component?.instance._store;\n  }\n  get state() {\n    return {};\n  }\n  attachComponent(component) {\n    scoped$1(() => {\n      this.setAttribute(\"mk-h\", \"\");\n      this.setAttribute(\"mk-d\", \"\");\n      if (this.hasAttribute(\"class\")) {\n        parseClassAttr(this.classList.tokens, this.getAttribute(\"class\"));\n      }\n      if (this.hasAttribute(\"style\")) {\n        parseStyleAttr(this.style.tokens, this.getAttribute(\"style\"));\n      }\n      const instance = component.instance;\n      instance._el = this;\n      this._component = component;\n      for (const callback of [...instance._attachCallbacks, ...this._attachCallbacks]) {\n        callback(this);\n      }\n      this._attachCallbacks = null;\n      const $attrs = instance._attrs, $styles = instance._styles;\n      if ($attrs) {\n        for (const name of Object.keys($attrs))\n          setAttribute(this, name, unwrapDeep($attrs[name]));\n      }\n      if ($styles) {\n        for (const name of Object.keys($styles))\n          setStyle(this, name, unwrapDeep($styles[name]));\n      }\n      this._rendered = !!instance._renderer;\n      this._ssr = instance._renderer ? renderToString(instance._renderer).code : \"\";\n      if (this.classList.length > 0) {\n        this.setAttribute(\"class\", this.classList.toString());\n      }\n      if (this.style.length > 0) {\n        this.setAttribute(\"style\", this.style.toString());\n      }\n    }, component.instance._scope);\n  }\n  render() {\n    if (typeof this._ssr !== \"string\") {\n      throw Error(\"[maverick] called `render` before attaching component\");\n    }\n    const innerHTML = this.renderInnerHTML(), def = this.constructor._component.el;\n    return this._rendered || def.shadowRoot && def.css ? def.shadowRoot ? `<template shadowroot=\"${this.getShadowRootMode()}\">${innerHTML}</template>` : `<shadow-root>${innerHTML}</shadow-root>` : innerHTML;\n  }\n  renderInnerHTML() {\n    if (typeof this._ssr !== \"string\") {\n      throw Error(\"[maverick] called `renderInnerHTML` before attaching component\");\n    }\n    const def = this.constructor._component.el, styleTag = def.shadowRoot && def.css ? `<style>${def.css.map((css2) => css2.text).join(\"\")}</style>` : \"\";\n    return styleTag + this._ssr;\n  }\n  getShadowRootMode() {\n    const def = this.constructor._component.el;\n    return def.shadowRoot ? isBoolean(def.shadowRoot) ? \"open\" : def.shadowRoot.mode : \"open\";\n  }\n  getAttribute(name) {\n    return this.attributes.getAttribute(name);\n  }\n  setAttribute(name, value) {\n    this.attributes.setAttribute(name, value);\n  }\n  hasAttribute(name) {\n    return this.attributes.hasAttribute(name);\n  }\n  removeAttribute(name) {\n    return this.attributes.removeAttribute(name);\n  }\n  dispatchEvent() {\n    return false;\n  }\n  onEventDispatch() {\n  }\n  addEventListener() {\n  }\n  removeEventListener() {\n  }\n  subscribe() {\n    return noop;\n  }\n  onAttach(callback) {\n    if (this._component) {\n      callback(this);\n      return noop;\n    } else {\n      this._attachCallbacks.add(callback);\n      return () => this._attachCallbacks?.delete(callback);\n    }\n  }\n  destroy() {\n    this._component?.destroy();\n  }\n};\nvar Attributes = class {\n  constructor() {\n    this._tokens = /* @__PURE__ */ new Map();\n  }\n  get length() {\n    return this._tokens.size;\n  }\n  get tokens() {\n    return this._tokens;\n  }\n  getAttribute(name) {\n    return this._tokens.get(name) ?? null;\n  }\n  hasAttribute(name) {\n    return this._tokens.has(name);\n  }\n  setAttribute(name, value) {\n    this._tokens.set(name, value + \"\");\n  }\n  removeAttribute(name) {\n    this._tokens.delete(name);\n  }\n  toString() {\n    if (this._tokens.size === 0)\n      return \"\";\n    let result = \"\";\n    for (const [name, value] of this._tokens) {\n      result += ` ${name}=\"${escape(value, true)}\"`;\n    }\n    return result;\n  }\n};\nvar Style = class {\n  constructor() {\n    this._tokens = /* @__PURE__ */ new Map();\n  }\n  get length() {\n    return this._tokens.size;\n  }\n  get tokens() {\n    return this._tokens;\n  }\n  getPropertyValue(prop2) {\n    return this._tokens.get(prop2) ?? \"\";\n  }\n  setProperty(prop2, value) {\n    this._tokens.set(prop2, value ?? \"\");\n  }\n  removeProperty(prop2) {\n    const value = this._tokens.get(prop2);\n    this._tokens.delete(prop2);\n    return value ?? \"\";\n  }\n  toString() {\n    if (this._tokens.size === 0)\n      return \"\";\n    let result = \"\";\n    for (const [name, value] of this._tokens) {\n      result += `${name}: ${value};`;\n    }\n    return result;\n  }\n};\nvar ClassList = class {\n  constructor() {\n    this._tokens = /* @__PURE__ */ new Set();\n  }\n  get length() {\n    return this._tokens.size;\n  }\n  get tokens() {\n    return this._tokens;\n  }\n  add(...tokens) {\n    for (const token of tokens) {\n      this._tokens.add(token);\n    }\n  }\n  contains(token) {\n    return this._tokens.has(token);\n  }\n  remove(token) {\n    this._tokens.delete(token);\n  }\n  replace(token, newToken) {\n    if (!this._tokens.has(token))\n      return false;\n    this._tokens.delete(token);\n    this._tokens.add(newToken);\n    return true;\n  }\n  toggle(token, force) {\n    if (force !== true && (this._tokens.has(token) || force === false)) {\n      this._tokens.delete(token);\n      return false;\n    } else {\n      this._tokens.add(token);\n      return true;\n    }\n  }\n  toString() {\n    return Array.from(this._tokens).join(\" \");\n  }\n};\n\n// src/element/props.ts\nvar PROP_DEF = Symbol(\"PROP_DEF\" );\nfunction defineProp(definition) {\n  return { [PROP_DEF]: true, ...definition };\n}\n\n// src/element/define.ts\nfunction defineElement(declaration) {\n  if (\"props\" in declaration) {\n    const props = declaration.props;\n    for (const name of Object.keys(props)) {\n      const def = props[name]?.[PROP_DEF] ? props[name] : { [PROP_DEF]: true, value: props[name] };\n      if (def.attribute !== false && !def.type)\n        def.type = inferAttributeType(def.value);\n      props[name] = def;\n    }\n  }\n  return declaration;\n}\nvar STRING = {\n  from: (v) => v === null ? \"\" : v + \"\"\n};\nvar NUMBER = {\n  from: (v) => v === null ? 0 : Number(v)\n};\nvar BOOLEAN = {\n  from: (v) => v !== null,\n  to: (v) => v ? \"\" : null\n};\nvar FUNCTION = {\n  from: false,\n  to: () => null\n};\nvar ARRAY = {\n  from: (v) => v === null ? [] : JSON.parse(v),\n  to: (v) => JSON.stringify(v)\n};\nvar OBJECT = {\n  from: (v) => v === null ? {} : JSON.parse(v),\n  to: (v) => JSON.stringify(v)\n};\nfunction inferAttributeType(value) {\n  if (value === null)\n    return STRING;\n  switch (typeof value) {\n    case \"undefined\":\n      return STRING;\n    case \"string\":\n      return STRING;\n    case \"boolean\":\n      return BOOLEAN;\n    case \"number\":\n      return NUMBER;\n    case \"function\":\n      return FUNCTION;\n    case \"object\":\n      return isArray(value) ? ARRAY : OBJECT;\n    default:\n      return STRING;\n  }\n}\n\n// src/element/decorators.ts\nfunction prop(target, propertyKey, descriptor) {\n  if (!target[PROPS])\n    target[PROPS] = /* @__PURE__ */ new Set();\n  target[PROPS].add(propertyKey);\n}\nfunction method(target, propertyKey, descriptor) {\n  if (!target[METHODS])\n    target[METHODS] = /* @__PURE__ */ new Set();\n  target[METHODS].add(propertyKey);\n}\n\n// src/runtime/ssr/internal.ts\nfunction $$_ssr(template, ...parts) {\n  let result = \"\";\n  for (let i = 0; i < template.length; i++) {\n    result += template[i];\n    result += resolve(escape(parts[i]));\n  }\n  return { [SSR_TEMPLATE]: result };\n}\nfunction $$_custom_element(tagName, props, spreads) {\n  const Component2 = serverElementRegistry.get(tagName);\n  if (!Component2) {\n    throw Error(`[maverick] custom element not registered: ${tagName}`);\n  }\n  const host = new (createServerElement(Component2))();\n  if (spreads && spreads.length > 0) {\n    const spread = $$_merge_spreads(spreads);\n    for (const [key, value] of spread.attributes) {\n      host.setAttribute(key, value);\n    }\n    for (const token of spread.classList) {\n      host.classList.add(token);\n    }\n    for (const [key, value] of spread.styles) {\n      host.style.setProperty(key, value);\n    }\n  }\n  const component = createComponent(Component2, { props });\n  host.attachComponent(component);\n  const children = !props?.innerHTML && props?.$children ? scoped(() => props.$children(), component.instance._scope) : [];\n  return [\n    host.attributes + \">\",\n    injectHTML(!props?.innerHTML ? host.render() : props.innerHTML),\n    ...children\n  ];\n}\nfunction $$_attr2(name, value) {\n  const attrValue = resolveAtrr(value);\n  return isString(attrValue) ? ` ${name}=\"${escape(attrValue, true)}\"` : \"\";\n}\nfunction resolveAtrr(value) {\n  if (isFunction(value))\n    return resolveAtrr(value());\n  if (!value && value !== \"\" && value !== 0) {\n    return null;\n  } else {\n    return value + \"\";\n  }\n}\nfunction $$_classes(base, tokens) {\n  let baseValue = unwrapDeep(base), result = isString(baseValue) ? baseValue : \"\";\n  if (tokens && Object.keys(tokens).length > 0) {\n    const classList = /* @__PURE__ */ new Set();\n    parseClassAttr(classList, result);\n    resolveClasses(classList, tokens);\n    result = Array.from(classList).join(\" \");\n  }\n  result = result.trim();\n  return result.length ? ` class=\"${escape(result, true)}\"` : \"\";\n}\nvar classSplitRE = /\\s+/;\nfunction parseClassAttr(tokens, attrValue) {\n  const classes = attrValue.trim().split(classSplitRE);\n  for (const token of classes)\n    tokens.add(token);\n}\nfunction resolveClasses(classList, tokens) {\n  for (const name of Object.keys(tokens)) {\n    if (unwrapDeep(tokens[name])) {\n      classList.add(name);\n    } else {\n      classList.delete(name);\n    }\n  }\n}\nfunction $$_styles(base, tokens) {\n  let baseValue = unwrapDeep(base), result = isString(baseValue) ? trimTrailingSemicolon(baseValue) : \"\";\n  if (Object.keys(tokens).length > 0) {\n    const styleMap = /* @__PURE__ */ new Map();\n    parseStyleAttr(styleMap, result);\n    resolveStyles(styleMap, tokens);\n    result = \"\";\n    for (const [name, value] of styleMap)\n      result += `${name}: ${value};`;\n  }\n  result = result.trim();\n  return result.length ? ` style=\"${escape(result, true)}\"` : result;\n}\nvar styleSplitRE = /\\s*:\\s*/;\nvar stylesDelimeterRE = /\\s*;\\s*/;\nfunction parseStyleAttr(tokens, attrValue) {\n  const styles = attrValue.trim().split(stylesDelimeterRE);\n  for (let i = 0; i < styles.length; i++) {\n    if (styles[i] === \"\")\n      continue;\n    const [name, value] = styles[i].split(styleSplitRE);\n    tokens.set(name, value);\n  }\n}\nfunction resolveStyles(tokens, styles) {\n  for (const name of Object.keys(styles)) {\n    const value = unwrapDeep(styles[name]);\n    if (!value && value !== 0) {\n      tokens.delete(name);\n    } else {\n      tokens.set(name, value + \"\");\n    }\n  }\n}\nvar propNameRE = /[A-Z]/;\nfunction $$_merge_spreads(spreads) {\n  let attributes = /* @__PURE__ */ new Map(), classList = /* @__PURE__ */ new Set(), styles = /* @__PURE__ */ new Map();\n  for (let i = 0; i < spreads.length; i++) {\n    const { $$class, $$style, class: classBase, style: styleBase, ...attrs } = spreads[i];\n    const attrNames = Object.keys(attrs);\n    for (let j = 0; j < attrNames.length; j++) {\n      const attrName = attrNames[j];\n      if (!propNameRE.test(attrName)) {\n        const attrValue = resolveAtrr(attrs[attrName]);\n        if (isString(attrValue)) {\n          attributes.set(attrName, attrValue);\n        } else {\n          attributes.delete(attrName);\n        }\n      }\n    }\n    if (\"class\" in spreads[i]) {\n      const base = unwrapDeep(classBase);\n      if (isNull(base) || base === false) {\n        classList.clear();\n      } else if (isString(base) && base.length) {\n        parseClassAttr(classList, base + \"\");\n      }\n    }\n    if ($$class)\n      resolveClasses(classList, $$class);\n    if (\"style\" in spreads[i]) {\n      const base = unwrapDeep(styleBase);\n      if (isNull(base) || base === false) {\n        styles.clear();\n      } else if (isString(base) && base.length) {\n        parseStyleAttr(styles, base);\n      }\n    }\n    if ($$style)\n      resolveStyles(styles, $$style);\n  }\n  return { attributes, classList, styles };\n}\nfunction $$_spread2(spreads) {\n  const { attributes, classList, styles } = $$_merge_spreads(spreads);\n  let result = \"\";\n  if (classList.size > 0) {\n    let _class = Array.from(classList).join(\" \");\n    result += `class=\"${escape(_class.trim(), true)}\"`;\n  }\n  for (const [name, value] of attributes) {\n    result += ` ${name}=\"${escape(value, true)}\"`;\n  }\n  if (styles.size > 0) {\n    let _styles = \"\";\n    for (const [name, value] of styles)\n      _styles += `${name}: ${value};`;\n    result += ` style=\"${escape(_styles.trim(), true)}\"`;\n  }\n  return result.trim();\n}\nfunction $$_inject_html(value) {\n  return injectHTML(resolve(value));\n}\nvar $$_scoped2 = scoped;\n/**\n * The code below this comment was adapted from Lit: https://github.dev/lit/lit\n *\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nexport { $$CHILDREN, $$_attach_declarative_shadow_dom, $$_attr2 as $$_attr, $$_attr as $$_attr2, $$_children, $$_class, $$_classes, $$_clone, $$_computed, $$_create_component, $$_create_element, $$_create_fragment, $$_create_template, $$_create_walker, $$_custom_element, $$_delegate_events, $$_directive, $$_effect, $$_hydrating, $$_inject_html, $$_insert, $$_insert_at_marker, $$_insert_at_marker_lite, $$_insert_lite, $$_listen, $$_merge_props, $$_merge_spreads, $$_next_element, $$_next_template, $$_peek, $$_ref, $$_scoped2 as $$_scoped, $$_scoped as $$_scoped2, $$_setup_custom_element, $$_spread2 as $$_spread, $$_spread as $$_spread2, $$_ssr, $$_style, $$_styles, ARRAY, BOOLEAN, Component, ComponentController, ComponentInstance, FUNCTION, NUMBER, OBJECT, PROP_DEF, SSR_TEMPLATE, STRING, adoptCSS, createComponent, createHTMLElement, createServerElement, css, defineElement, defineProp, hydrate, hydrateLite, hydration, inferAttributeType, injectCSS, injectHTML, method, parseClassAttr, parseStyleAttr, prop, registerCustomElement, registerHeadlessCustomElement, registerLiteCustomElement, render, renderLite, renderToString, resolve, runHydration };\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,EAAEC,cAAc,EAAEC,0BAA0B,EAAEC,YAAY,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,gBAAgB,EAAEC,qBAAqB,EAAEC,YAAY,EAAEC,MAAM,EAAEC,YAAY,QAAQ,qBAAqB;AACnP,SAASC,IAAI,EAAEC,UAAU,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,UAAU,EAAEC,MAAM,EAAEC,WAAW,EAAEC,IAAI,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,MAAM,EAAEC,SAAS,QAAQ,qBAAqB;AACrL,SAASd,IAAI,IAAIe,MAAM,EAAEL,MAAM,IAAIM,QAAQ,EAAEC,QAAQ,EAAEhB,UAAU,IAAIiB,YAAY,EAAEX,MAAM,IAAIY,QAAQ,EAAEC,SAAS,EAAEC,IAAI,EAAEC,MAAM,EAAEC,OAAO,QAAQ,sBAAsB;;AAErK;AACA,SAASC,MAAMA,CAACC,KAAK,EAAEC,MAAM,GAAG,KAAK,EAAE;EACrC,MAAMC,IAAI,GAAG,OAAOF,KAAK;EACzB,IAAIE,IAAI,KAAK,QAAQ,EAAE;IACrB,IAAI,CAACD,MAAM,IAAIC,IAAI,KAAK,UAAU,EAChC,OAAOH,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACxB,IAAIC,MAAM,IAAIC,IAAI,KAAK,SAAS,EAC9B,OAAOF,KAAK,GAAG,EAAE;IACnB,OAAOA,KAAK;EACd;EACA,MAAMG,SAAS,GAAGF,MAAM,GAAG,GAAG,GAAG,GAAG;IAAEG,eAAe,GAAGH,MAAM,GAAG,QAAQ,GAAG,MAAM;EAClF,IAAII,UAAU,GAAGL,KAAK,CAACM,OAAO,CAACH,SAAS,CAAC;IAAEI,WAAW,GAAGP,KAAK,CAACM,OAAO,CAAC,GAAG,CAAC;EAC3E,IAAID,UAAU,GAAG,CAAC,IAAIE,WAAW,GAAG,CAAC,EACnC,OAAOP,KAAK;EACd,IAAIQ,IAAI,GAAG,CAAC;IAAEC,GAAG,GAAG,EAAE;EACtB,OAAOJ,UAAU,IAAI,CAAC,IAAIE,WAAW,IAAI,CAAC,EAAE;IAC1C,IAAIF,UAAU,GAAGE,WAAW,EAAE;MAC5B,IAAIC,IAAI,GAAGH,UAAU,EACnBI,GAAG,IAAIT,KAAK,CAACU,SAAS,CAACF,IAAI,EAAEH,UAAU,CAAC;MAC1CI,GAAG,IAAIL,eAAe;MACtBI,IAAI,GAAGH,UAAU,GAAG,CAAC;MACrBA,UAAU,GAAGL,KAAK,CAACM,OAAO,CAACH,SAAS,EAAEK,IAAI,CAAC;IAC7C,CAAC,MAAM;MACL,IAAIA,IAAI,GAAGD,WAAW,EACpBE,GAAG,IAAIT,KAAK,CAACU,SAAS,CAACF,IAAI,EAAED,WAAW,CAAC;MAC3CE,GAAG,IAAI,OAAO;MACdD,IAAI,GAAGD,WAAW,GAAG,CAAC;MACtBA,WAAW,GAAGP,KAAK,CAACM,OAAO,CAAC,GAAG,EAAEE,IAAI,CAAC;IACxC;EACF;EACA,IAAIH,UAAU,IAAI,CAAC,EAAE;IACnB,GAAG;MACD,IAAIG,IAAI,GAAGH,UAAU,EACnBI,GAAG,IAAIT,KAAK,CAACU,SAAS,CAACF,IAAI,EAAEH,UAAU,CAAC;MAC1CI,GAAG,IAAIL,eAAe;MACtBI,IAAI,GAAGH,UAAU,GAAG,CAAC;MACrBA,UAAU,GAAGL,KAAK,CAACM,OAAO,CAACH,SAAS,EAAEK,IAAI,CAAC;IAC7C,CAAC,QAAQH,UAAU,IAAI,CAAC;EAC1B,CAAC,MACC,OAAOE,WAAW,IAAI,CAAC,EAAE;IACvB,IAAIC,IAAI,GAAGD,WAAW,EACpBE,GAAG,IAAIT,KAAK,CAACU,SAAS,CAACF,IAAI,EAAED,WAAW,CAAC;IAC3CE,GAAG,IAAI,OAAO;IACdD,IAAI,GAAGD,WAAW,GAAG,CAAC;IACtBA,WAAW,GAAGP,KAAK,CAACM,OAAO,CAAC,GAAG,EAAEE,IAAI,CAAC;EACxC;EACF,OAAOA,IAAI,GAAGR,KAAK,CAACW,MAAM,GAAGF,GAAG,GAAGT,KAAK,CAACU,SAAS,CAACF,IAAI,CAAC,GAAGC,GAAG;AAChE;;AAEA;AACA,SAASG,cAAcA,CAACC,KAAK,EAAE;EAC7B,MAAMC,MAAM,GAAGvC,IAAI,CAAEwC,OAAO,IAAK;IAC/B,MAAMf,KAAK,GAAGa,KAAK,CAAC,CAAC;IACrBE,OAAO,CAAC,CAAC;IACT,OAAOf,KAAK;EACd,CAAC,CAAC;EACF,OAAO;IAAEgB,IAAI,EAAEC,OAAO,CAAClB,MAAM,CAACe,MAAM,CAAC;EAAE,CAAC;AAC1C;AACA,IAAII,YAAY,GAAG,eAAgBC,MAAM,CAAC,CAAC;AAC3C,SAASF,OAAOA,CAACG,IAAI,EAAE;EACrB,IAAI5C,UAAU,CAAC4C,IAAI,CAAC,EAAE;IACpB,OAAOH,OAAO,CAACG,IAAI,CAAC,CAAC,CAAC;EACxB,CAAC,MAAM,IAAI3C,OAAO,CAAC2C,IAAI,CAAC,EAAE;IACxB,IAAIN,MAAM,GAAG,EAAE;IACf,MAAMO,SAAS,GAAGD,IAAI,CAACE,IAAI,CAAC,EAAE,CAAC;IAC/B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,SAAS,CAACV,MAAM,EAAEY,CAAC,EAAE,EAAE;MACzCT,MAAM,IAAIG,OAAO,CAAClB,MAAM,CAACsB,SAAS,CAACE,CAAC,CAAC,CAAC,CAAC;IACzC;IACA,OAAOT,MAAM,GAAG,QAAQ;EAC1B,CAAC,MAAM,IAAIpC,QAAQ,CAAC0C,IAAI,CAAC,IAAIzC,QAAQ,CAACyC,IAAI,CAAC,EAAE;IAC3C,OAAOA,IAAI,GAAG,EAAE;EAClB,CAAC,MAAM,IAAIA,IAAI,GAAGF,YAAY,CAAC,EAAE;IAC/B,OAAOE,IAAI,CAACF,YAAY,CAAC;EAC3B;EACA,OAAO,EAAE;AACX;AACA,SAASM,UAAUA,CAACC,IAAI,EAAE;EACxB,OAAO;IAAE,CAACP,YAAY,GAAGO;EAAK,CAAC;AACjC;;AAEA;AACA,IAAIC,mBAAmB,GAAG,MAAM;EAC9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,IAAIC,EAAEA,CAAA,EAAG;IACP,OAAO,IAAI,CAACC,QAAQ,CAACC,GAAG;EAC1B;EACA;AACF;AACA;EACE,IAAIC,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACF,QAAQ,CAACG,MAAM;EAC7B;EACA;AACF;AACA;EACE,IAAIC,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACJ,QAAQ,CAACK,MAAM;EAC7B;EACAC,WAAWA,CAACN,QAAQ,EAAE;IACpB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IACxB,IAAI,IAAI,CAACO,QAAQ,EACfP,QAAQ,CAACQ,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAACF,QAAQ,CAACG,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,IAAI,IAAI,CAACC,SAAS,EAChBX,QAAQ,CAACY,iBAAiB,CAACH,IAAI,CAAC,IAAI,CAACE,SAAS,CAACD,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5D,IAAI,IAAI,CAACG,YAAY,EACnBb,QAAQ,CAACc,oBAAoB,CAACL,IAAI,CAAC,IAAI,CAACI,YAAY,CAACH,IAAI,CAAC,IAAI,CAAC,CAAC;IAClE,IAAI,IAAI,CAACK,SAAS,EAChBf,QAAQ,CAACgB,iBAAiB,CAACP,IAAI,CAAC,IAAI,CAACM,SAAS,CAACL,IAAI,CAAC,IAAI,CAAC,CAAC;EAC9D;EACA;AACF;AACA;AACA;EACEO,aAAaA,CAACC,UAAU,EAAE;IACxB,IAAI,IAAI,CAAClB,QAAQ,CAACmB,MAAM,EACtBC,MAAM,CAACC,MAAM,CAAC,IAAI,CAACrB,QAAQ,CAACmB,MAAM,EAAED,UAAU,CAAC;EACnD;EACA;AACF;AACA;AACA;EACEI,SAASA,CAACC,MAAM,EAAE;IAChB,IAAI,IAAI,CAACvB,QAAQ,CAACwB,OAAO,EACvBJ,MAAM,CAACC,MAAM,CAAC,IAAI,CAACrB,QAAQ,CAACwB,OAAO,EAAED,MAAM,CAAC;EAChD;EACA;AACF;AACA;AACA;EACEE,UAAUA,CAACC,IAAI,EAAE;IACf,IAAI,CAACJ,SAAS,CAACI,IAAI,CAAC;EACtB;EACA;AACF;AACA;EACEC,WAAWA,CAACrD,IAAI,EAAE,GAAGsD,IAAI,EAAE;IACzB,OAAO,IAAI9F,QAAQ,CAACwC,IAAI,EAAEsD,IAAI,CAAC,CAAC,CAAC,CAAC;EACpC;EACA;AACF;AACA;AACA;EACEC,QAAQA,CAACvD,IAAI,EAAE,GAAGsD,IAAI,EAAE;IACtB,IAAI,CAAC,IAAI,CAAC7B,EAAE,EACV;IACF,MAAM+B,KAAK,GAAG,IAAIhG,QAAQ,CAACwC,IAAI,EAAEsD,IAAI,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,CAAC7B,EAAE,CAACgC,aAAa,CAACD,KAAK,CAAC;EAC9B;EACA;AACF;AACA;AACA;AACA;AACA;AACA;EACEE,MAAMA,CAAC1D,IAAI,EAAE2D,OAAO,EAAEC,OAAO,EAAE;IAC7B,IAAI,CAAC,IAAI,CAACnC,EAAE,EACV,OAAO/C,IAAI;IACb,OAAOjB,WAAW,CAAC,IAAI,CAACgE,EAAE,EAAEzB,IAAI,EAAE2D,OAAO,EAAEC,OAAO,CAAC;EACrD;AACF,CAAC;;AAED;AACA,IAAIC,SAAS,GAAG,cAAcrC,mBAAmB,CAAC;EAChDQ,WAAWA,CAACN,QAAQ,EAAE;IACpB,KAAK,CAACA,QAAQ,CAAC;IACf,IAAI,IAAI,CAACoC,MAAM,IAAI,CAACpC,QAAQ,CAACqC,UAAU,IAAI,CAACrC,QAAQ,CAACsC,SAAS,EAAE;MAC9DtC,QAAQ,CAACsC,SAAS,GAAG,IAAI,CAACF,MAAM,CAAC1B,IAAI,CAAC,IAAI,CAAC;IAC7C;EACF;EACA6B,OAAOA,CAAA,EAAG;IACR,IAAI,CAACvC,QAAQ,CAACwC,QAAQ,CAAC,CAAC;EAC1B;AACF,CAAC;;AAED;AACA,SAASC,SAASA,CAACC,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAE;EACzC,IAAIC,OAAO,GAAGD,MAAM,CAAC7D,MAAM;IAAE+D,IAAI,GAAGH,MAAM,CAAC5D,MAAM;IAAEgE,IAAI,GAAGF,OAAO;IAAEG,MAAM,GAAG,CAAC;IAAEC,MAAM,GAAG,CAAC;IAAEC,KAAK,GAAGP,MAAM,CAACG,IAAI,GAAG,CAAC,CAAC,CAACK,WAAW;IAAEC,GAAG,GAAG,IAAI;EAC3I,OAAOJ,MAAM,GAAGF,IAAI,IAAIG,MAAM,GAAGF,IAAI,EAAE;IACrC,IAAIJ,MAAM,CAACK,MAAM,CAAC,KAAKJ,MAAM,CAACK,MAAM,CAAC,EAAE;MACrCD,MAAM,EAAE;MACRC,MAAM,EAAE;MACR;IACF;IACA,OAAON,MAAM,CAACG,IAAI,GAAG,CAAC,CAAC,KAAKF,MAAM,CAACG,IAAI,GAAG,CAAC,CAAC,EAAE;MAC5CD,IAAI,EAAE;MACNC,IAAI,EAAE;IACR;IACA,IAAID,IAAI,KAAKE,MAAM,EAAE;MACnB,MAAMxD,IAAI,GAAGuD,IAAI,GAAGF,OAAO,GAAGI,MAAM,GAAGL,MAAM,CAACK,MAAM,GAAG,CAAC,CAAC,CAACE,WAAW,GAAGP,MAAM,CAACG,IAAI,GAAGE,MAAM,CAAC,GAAGC,KAAK;MACrG,OAAOD,MAAM,GAAGF,IAAI,EAClBL,MAAM,CAACW,YAAY,CAACT,MAAM,CAACK,MAAM,EAAE,CAAC,EAAEzD,IAAI,CAAC;IAC/C,CAAC,MAAM,IAAIuD,IAAI,KAAKE,MAAM,EAAE;MAC1B,OAAOD,MAAM,GAAGF,IAAI,EAAE;QACpB,IAAI,CAACM,GAAG,IAAI,CAACA,GAAG,CAACE,GAAG,CAACX,MAAM,CAACK,MAAM,CAAC,CAAC,EAClCL,MAAM,CAACK,MAAM,CAAC,CAACO,MAAM,CAAC,CAAC;QACzBP,MAAM,EAAE;MACV;IACF,CAAC,MAAM,IAAIL,MAAM,CAACK,MAAM,CAAC,KAAKJ,MAAM,CAACG,IAAI,GAAG,CAAC,CAAC,IAAIH,MAAM,CAACK,MAAM,CAAC,KAAKN,MAAM,CAACG,IAAI,GAAG,CAAC,CAAC,EAAE;MACrF,MAAMtD,IAAI,GAAGmD,MAAM,CAAC,EAAEG,IAAI,CAAC,CAACK,WAAW;MACvCT,MAAM,CAACW,YAAY,CAACT,MAAM,CAACK,MAAM,EAAE,CAAC,EAAEN,MAAM,CAACK,MAAM,EAAE,CAAC,CAACG,WAAW,CAAC;MACnET,MAAM,CAACW,YAAY,CAACT,MAAM,CAAC,EAAEG,IAAI,CAAC,EAAEvD,IAAI,CAAC;MACzCmD,MAAM,CAACG,IAAI,CAAC,GAAGF,MAAM,CAACG,IAAI,CAAC;IAC7B,CAAC,MAAM;MACL,IAAI,CAACK,GAAG,EAAE;QACRA,GAAG,GAAG,eAAgB,IAAII,GAAG,CAAC,CAAC;QAC/B,IAAI7D,CAAC,GAAGsD,MAAM;QACd,OAAOtD,CAAC,GAAGoD,IAAI,EACbK,GAAG,CAACK,GAAG,CAACb,MAAM,CAACjD,CAAC,CAAC,EAAEA,CAAC,EAAE,CAAC;MAC3B;MACA,MAAM+D,KAAK,GAAGN,GAAG,CAACO,GAAG,CAAChB,MAAM,CAACK,MAAM,CAAC,CAAC;MACrC,IAAIU,KAAK,IAAI,IAAI,EAAE;QACjB,IAAIT,MAAM,GAAGS,KAAK,IAAIA,KAAK,GAAGX,IAAI,EAAE;UAClC,IAAIpD,CAAC,GAAGqD,MAAM;YAAEY,QAAQ,GAAG,CAAC;YAAEC,CAAC;UAC/B,OAAO,EAAElE,CAAC,GAAGmD,IAAI,IAAInD,CAAC,GAAGoD,IAAI,EAAE;YAC7B,IAAI,CAACc,CAAC,GAAGT,GAAG,CAACO,GAAG,CAAChB,MAAM,CAAChD,CAAC,CAAC,CAAC,KAAK,IAAI,IAAIkE,CAAC,KAAKH,KAAK,GAAGE,QAAQ,EAC5D;YACFA,QAAQ,EAAE;UACZ;UACA,IAAIA,QAAQ,GAAGF,KAAK,GAAGT,MAAM,EAAE;YAC7B,MAAMzD,IAAI,GAAGmD,MAAM,CAACK,MAAM,CAAC;YAC3B,OAAOC,MAAM,GAAGS,KAAK,EACnBhB,MAAM,CAACW,YAAY,CAACT,MAAM,CAACK,MAAM,EAAE,CAAC,EAAEzD,IAAI,CAAC;UAC/C,CAAC,MACCkD,MAAM,CAACoB,YAAY,CAAClB,MAAM,CAACK,MAAM,EAAE,CAAC,EAAEN,MAAM,CAACK,MAAM,EAAE,CAAC,CAAC;QAC3D,CAAC,MACCA,MAAM,EAAE;MACZ,CAAC,MACCL,MAAM,CAACK,MAAM,EAAE,CAAC,CAACO,MAAM,CAAC,CAAC;IAC7B;EACF;AACF;;AAEA;AACA,IAAIQ,kBAAkB,GAAI9E,KAAK;AAC7B;AACA+E,QAAQ,CAACC,gBAAgB,CAAChF,KAAK,EAAEiF,UAAU,CAACC,YAAY,EAAG3E,IAAI,IAAKA,IAAI,CAAC4E,SAAS,KAAK,GAAG,CAC3F;;AAED;AACA,IAAIC,SAAS,GAAG,IAAI;AACpB,SAASC,OAAOA,CAACrF,KAAK,EAAEiD,OAAO,EAAE;EAC/B,OAAOqC,YAAY,CAAC,MAAMnC,MAAM,CAACnD,KAAK,EAAEiD,OAAO,CAAC,EAAEA,OAAO,CAAC;AAC5D;AACA,SAASqC,YAAYA,CAACC,GAAG,EAAEtC,OAAO,EAAE;EAClC,MAAMuC,IAAI,GAAGJ,SAAS;EACtBA,SAAS,GAAG;IAAEK,CAAC,EAAEX,kBAAkB,CAAC7B,OAAO,CAACyC,MAAM;EAAE,CAAC;EACrD,MAAMzF,MAAM,GAAGsF,GAAG,CAAC,CAAC;EACpBH,SAAS,GAAGI,IAAI;EAChB,OAAOvF,MAAM;AACf;AACA,SAASkD,MAAMA,CAACnD,KAAK,EAAEiD,OAAO,EAAE;EAC9B,OAAOvF,IAAI,CAAEwC,OAAO,IAAK;IACvB,IAAI,CAACkF,SAAS,EAAE;MACdO,MAAM,CAAC1C,OAAO,CAACyC,MAAM,EAAE1F,KAAK,CAAC,CAAC,EAAEiD,OAAO,CAAC2C,MAAM,CAAC;IACjD,CAAC,MAAM;MACL5H,UAAU,CAACgC,KAAK,CAAC;IACnB;IACA,OAAOE,OAAO;EAChB,CAAC,CAAC;AACJ;;AAEA;AACA,SAASyF,MAAMA,CAAClC,MAAM,EAAEtE,KAAK,EAAE0G,MAAM,EAAE;EACrC,IAAIC,QAAQ,GAAGnI,UAAU,CAACwB,KAAK,CAAC;EAChC,IAAI2G,QAAQ,IAAI3G,KAAK,CAAC4G,UAAU,CAAC,EAAE;IACjC5G,KAAK,GAAGA,KAAK,CAAC,CAAC;IACf2G,QAAQ,GAAGnI,UAAU,CAACwB,KAAK,CAAC;EAC9B;EACA,IAAI2G,QAAQ,EAAE;IACZ,IAAIE,OAAO;IACX/H,MAAM,CACJ,MAAM,MAAM+H,OAAO,GAAGC,gBAAgB,CACpCxC,MAAM,EACNzF,UAAU,CAACmB,KAAK,CAAC,CAAC,CAAC,EACnB0G,MAAM,EACNG,OAAO,EACP,IACF,CAAC,CACH,CAAC;IACD;EACF,CAAC,MAAM,IAAIZ,SAAS,EAAE;IACpBS,MAAM,CAACvB,MAAM,CAAC,CAAC;EACjB,CAAC,MACC2B,gBAAgB,CAACxC,MAAM,EAAEtE,KAAK,EAAE0G,MAAM,CAAC;AAC3C;AACA,SAASI,gBAAgBA,CAACxC,MAAM,EAAEtE,KAAK,EAAE0G,MAAM,EAAEG,OAAO,EAAEF,QAAQ,GAAG,KAAK,EAAE;EAC1E,IAAI3G,KAAK,KAAK6G,OAAO,EACnB,OAAOA,OAAO;EAChB,IAAIpI,OAAO,CAACuB,KAAK,CAAC,EAAE;IAClB,MAAM+G,QAAQ,GAAG,EAAE;MAAEC,YAAY,GAAGf,SAAS,IAAIS,MAAM,GAAGO,UAAU,CAACP,MAAM,CAAC,GAAGG,OAAO,IAAIpI,OAAO,CAACoI,OAAO,CAAC,GAAGA,OAAO,GAAG,EAAE;IACzH,IAAI7G,KAAK,CAACW,MAAM,IAAIuG,YAAY,CAACH,QAAQ,EAAE/G,KAAK,EAAEgH,YAAY,EAAEL,QAAQ,CAAC,EAAE;MACzE7H,MAAM,CAAC,MAAM,MAAM+H,OAAO,GAAGC,gBAAgB,CAACxC,MAAM,EAAEyC,QAAQ,EAAEL,MAAM,EAAEM,YAAY,EAAE,IAAI,CAAC,CAAC,CAAC;MAC7F,OAAO,MAAMH,OAAO;IACtB;IACA,IAAIZ,SAAS,IAAIS,MAAM,EACrB,OAAOM,YAAY;IACrB,IAAID,QAAQ,CAACpG,MAAM,KAAK,CAAC,EAAE;MACzBwG,SAAS,CAAC7C,MAAM,EAAEuC,OAAO,CAAC;IAC5B,CAAC,MAAM,IAAIG,YAAY,CAACrG,MAAM,EAAE;MAC9B0D,SAAS,CAACC,MAAM,EAAE0C,YAAY,EAAED,QAAQ,CAAC;IAC3C,CAAC,MAAM;MACLF,OAAO,IAAIM,SAAS,CAAC7C,MAAM,EAAEuC,OAAO,EAAEH,MAAM,CAAC;MAC7CU,WAAW,CAAC9C,MAAM,EAAEyC,QAAQ,EAAEL,MAAM,CAAC;IACvC;IACA,OAAOK,QAAQ;EACjB,CAAC,MAAM,IAAIrI,QAAQ,CAACsB,KAAK,CAAC,IAAIrB,QAAQ,CAACqB,KAAK,CAAC,EAAE;IAC7C,IAAI,CAACjB,WAAW,CAAC2H,MAAM,CAAC,EAAE;MACxB,IAAI9I,SAAS,CAACiJ,OAAO,CAAC,IAAIA,OAAO,CAACQ,QAAQ,KAAK,CAAC,EAAE;QAChDR,OAAO,CAACS,IAAI,GAAGtH,KAAK,GAAG,EAAE;MAC3B,CAAC,MAAM,IAAI,CAACiG,SAAS,EAAE;QACrB,OAAOkB,SAAS,CAAC7C,MAAM,EAAEuC,OAAO,EAAEH,MAAM,EAAEd,QAAQ,CAAC2B,cAAc,CAACvH,KAAK,GAAG,EAAE,CAAC,CAAC;MAChF,CAAC,MAAM;QACL,OAAO0G,MAAM,CAAC3B,WAAW;MAC3B;IACF,CAAC,MAAM,IAAI8B,OAAO,KAAK,EAAE,IAAInI,QAAQ,CAACmI,OAAO,CAAC,EAAE;MAC9C,OAAOvC,MAAM,CAACkD,UAAU,CAACF,IAAI,GAAGtH,KAAK,GAAG,EAAE;IAC5C,CAAC,MACC,OAAOsE,MAAM,CAACmD,WAAW,GAAGzH,KAAK,GAAG,EAAE;EAC1C,CAAC,MAAM,IAAIpC,SAAS,CAACoC,KAAK,CAAC,EAAE;IAC3B,IAAIiG,SAAS,EAAE,CAAC,KAAM,IAAIS,MAAM,IAAIjI,OAAO,CAACoI,OAAO,CAAC,EAAE;MACpD,IAAI,CAAC9H,WAAW,CAAC2H,MAAM,CAAC,EACtB,OAAOG,OAAO,GAAGM,SAAS,CAAC7C,MAAM,EAAEuC,OAAO,EAAEH,MAAM,EAAE1G,KAAK,CAAC;MAC5DmH,SAAS,CAAC7C,MAAM,EAAEuC,OAAO,EAAE,IAAI,EAAE7G,KAAK,CAAC;IACzC,CAAC,MAAM,IAAI,CAAC6G,OAAO,IAAI,CAACvC,MAAM,CAACkD,UAAU,EAAE;MACzClD,MAAM,CAACoD,WAAW,CAAC1H,KAAK,CAAC;IAC3B,CAAC,MACCsE,MAAM,CAACoB,YAAY,CAAC1F,KAAK,EAAEsE,MAAM,CAACkD,UAAU,CAAC;IAC/C,OAAOxH,KAAK;EACd,CAAC,MAAM;IACL,OAAOmH,SAAS,CAAC7C,MAAM,EAAEuC,OAAO,EAAEH,MAAM,CAAC;EAC3C;EACA,OAAOG,OAAO;AAChB;AACA,SAASO,WAAWA,CAAC9C,MAAM,EAAEqD,KAAK,EAAEjB,MAAM,EAAE;EAC1C,IAAI3H,WAAW,CAAC2H,MAAM,CAAC,EAAE;IACvB,KAAK,IAAInF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoG,KAAK,CAAChH,MAAM,EAAEY,CAAC,EAAE,EACnC+C,MAAM,CAACoD,WAAW,CAACC,KAAK,CAACpG,CAAC,CAAC,CAAC;EAChC,CAAC,MAAM;IACL,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoG,KAAK,CAAChH,MAAM,EAAEY,CAAC,EAAE,EACnC+C,MAAM,CAACW,YAAY,CAAC0C,KAAK,CAACpG,CAAC,CAAC,EAAEmF,MAAM,CAAC;EACzC;AACF;AACA,SAASQ,YAAYA,CAACS,KAAK,EAAEC,MAAM,EAAEf,OAAO,EAAEgB,SAAS,EAAE;EACvD,IAAI7H,KAAK;IAAEqG,IAAI;IAAEyB,OAAO,GAAG,KAAK;EAChC,KAAK,IAAIvG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqG,MAAM,CAACjH,MAAM,EAAEY,CAAC,EAAE,EAAE;IACtCvB,KAAK,GAAG4H,MAAM,CAACrG,CAAC,CAAC,EAAE8E,IAAI,GAAGQ,OAAO,CAACtF,CAAC,CAAC;IACpC,IAAI3D,SAAS,CAACoC,KAAK,CAAC,EAAE;MACpB2H,KAAK,CAACtF,IAAI,CAACrC,KAAK,CAAC;IACnB,CAAC,MAAM,IAAIvB,OAAO,CAACuB,KAAK,CAAC,EAAE;MACzB8H,OAAO,GAAGZ,YAAY,CAACS,KAAK,EAAE3H,KAAK,EAAEvB,OAAO,CAAC4H,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,EAAEwB,SAAS,CAAC,IAAIC,OAAO;IACvF,CAAC,MAAM,IAAItJ,UAAU,CAACwB,KAAK,CAAC,EAAE;MAC5B,IAAI6H,SAAS,EAAE;QACb7H,KAAK,GAAGA,KAAK,CAAC,CAAC;QACf8H,OAAO,GAAGZ,YAAY,CACpBS,KAAK,EACLlJ,OAAO,CAACuB,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC,EAChCvB,OAAO,CAAC4H,IAAI,CAAC,GAAGA,IAAI,GAAG,CAACA,IAAI,CAAC,EAC7B,IACF,CAAC,IAAIyB,OAAO;MACd,CAAC,MAAM;QACLH,KAAK,CAACtF,IAAI,CAACrC,KAAK,CAAC;QACjB8H,OAAO,GAAG,IAAI;MAChB;IACF,CAAC,MAAM,IAAI9H,KAAK,IAAIA,KAAK,KAAK,CAAC,EAAE;MAC/B,MAAM+H,IAAI,GAAG/H,KAAK,GAAG,EAAE;MACvB,IAAIqG,IAAI,IAAIA,IAAI,CAACgB,QAAQ,KAAK,CAAC,IAAIhB,IAAI,CAACiB,IAAI,KAAKS,IAAI,EAAE;QACrDJ,KAAK,CAACtF,IAAI,CAACgE,IAAI,CAAC;MAClB,CAAC,MAAM;QACLsB,KAAK,CAACtF,IAAI,CAACuD,QAAQ,CAAC2B,cAAc,CAACQ,IAAI,CAAC,CAAC;MAC3C;IACF;EACF;EACA,OAAOD,OAAO;AAChB;AACA,IAAIE,gBAAgB,GAAG,KAAK;AAC5B,SAASf,UAAUA,CAACP,MAAM,EAAE;EAC1B,IAAItF,IAAI,GAAGsF,MAAM,CAAC3B,WAAW;IAAE4C,KAAK,GAAG,EAAE;EACzC,OAAOvG,IAAI,EAAE;IACX,IAAIA,IAAI,CAACiG,QAAQ,KAAK,CAAC,EAAE;MACvBM,KAAK,CAACtF,IAAI,CAACjB,IAAI,CAAC;IAClB,CAAC,MAAM,IAAIA,IAAI,CAAC4E,SAAS,KAAKgC,gBAAgB,EAAE;MAC9C5G,IAAI,CAAC+D,MAAM,CAAC,CAAC;MACb;IACF;IACA/D,IAAI,GAAGA,IAAI,CAAC2D,WAAW;EACzB;EACA,OAAO4C,KAAK;AACd;AACA,SAASR,SAASA,CAAC7C,MAAM,EAAEuC,OAAO,EAAEH,MAAM,EAAEuB,OAAO,EAAE;EACnD,IAAIlJ,WAAW,CAAC2H,MAAM,CAAC,EAAE;IACvBpC,MAAM,CAACmD,WAAW,GAAG,EAAE;IACvB;EACF;EACA,MAAMrG,IAAI,GAAG6G,OAAO,IAAIxK,aAAa,CAAC,GAAG,CAAC;EAC1C,IAAIgB,OAAO,CAACoI,OAAO,CAAC,IAAIA,OAAO,CAAClG,MAAM,EAAE;IACtC,IAAIgB,EAAE;MAAEuG,QAAQ,GAAG,KAAK;MAAEC,QAAQ,GAAG,KAAK;IAC1C,KAAK,IAAI5G,CAAC,GAAGsF,OAAO,CAAClG,MAAM,GAAG,CAAC,EAAEY,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC5CI,EAAE,GAAGkF,OAAO,CAACtF,CAAC,CAAC;MACf,IAAII,EAAE,KAAKP,IAAI,EAAE;QACf+G,QAAQ,GAAGxG,EAAE,CAACyG,UAAU,KAAK9D,MAAM;QACnC,IAAI,CAAC4D,QAAQ,IAAI,CAAC3G,CAAC,EACjB4G,QAAQ,GAAG7D,MAAM,CAACoB,YAAY,CAACtE,IAAI,EAAEO,EAAE,CAAC,GAAG2C,MAAM,CAACW,YAAY,CAAC7D,IAAI,EAAEsF,MAAM,CAAC,CAAC,KAE7EyB,QAAQ,IAAI7D,MAAM,CAAC+D,WAAW,CAAC1G,EAAE,CAAC;MACtC,CAAC,MACCuG,QAAQ,GAAG,IAAI;IACnB;EACF,CAAC,MAAM,IAAItK,SAAS,CAACiJ,OAAO,CAAC,EAAE;IAC7BvC,MAAM,CAACoB,YAAY,CAACtE,IAAI,EAAEyF,OAAO,CAAC;EACpC,CAAC,MAAM;IACLvC,MAAM,CAACW,YAAY,CAAC7D,IAAI,EAAEsF,MAAM,CAAC;EACnC;EACA,OAAOtF,IAAI;AACb;;AAEA;AACA,IAAIkH,SAAS,GAAG,eAAgBnH,MAAM,CAAC,WAAY,CAAC;AACpD,IAAIoH,kBAAkB,GAAG9K,aAAa,CAAC,IAAI,CAAC;AAC5C,IAAI+K,UAAU,GAAG,eAAgBrH,MAAM,CAAC,YAAa,CAAC;AACtD,IAAIsH,eAAe,GAAG,eAAgBhL,aAAa,CAAC,IAAI,CAAC;AACzD,IAAIiL,sBAAsB,GAAG,KAAK;AAClC,SAASC,UAAUA,CAACrE,MAAM,EAAEtE,KAAK,EAAEyG,MAAM,EAAE;EACzC,IAAIE,QAAQ,GAAGnI,UAAU,CAACwB,KAAK,CAAC;EAChC,IAAI2G,QAAQ,IAAI3G,KAAK,CAAC4G,UAAU,CAAC,EAAE;IACjC5G,KAAK,GAAGA,KAAK,CAAC,CAAC;IACf2G,QAAQ,GAAGnI,UAAU,CAACwB,KAAK,CAAC;EAC9B;EACA,IAAI2G,QAAQ,EAAE;IACZiC,YAAY,CAACtE,MAAM,EAAEtE,KAAK,EAAEyG,MAAM,CAAC;EACrC,CAAC,MAAM,IAAI,CAACR,SAAS,KAAKjG,KAAK,IAAIA,KAAK,KAAK,CAAC,CAAC,EAAE;IAC/C6I,QAAQ,CACNvE,MAAM,EACN7F,OAAO,CAACuB,KAAK,CAAC,GAAG8I,aAAa,CAAC9I,KAAK,CAAC,GAAGpC,SAAS,CAACoC,KAAK,CAAC,GAAGA,KAAK,GAAG4F,QAAQ,CAAC2B,cAAc,CAACvH,KAAK,GAAG,EAAE,CAAC,EACtGyG,MACF,CAAC;EACH;AACF;AACA,SAASoC,QAAQA,CAACvE,MAAM,EAAElD,IAAI,EAAEqF,MAAM,EAAE;EACtC,IAAI,CAACrF,IAAI,EACP;EACF,IAAIqF,MAAM,EACRnC,MAAM,CAACW,YAAY,CAAC7D,IAAI,EAAEqF,MAAM,CAAC,CAAC,KAElCnC,MAAM,CAACoD,WAAW,CAACtG,IAAI,CAAC;AAC5B;AACA,SAASwH,YAAYA,CAACtE,MAAM,EAAEtE,KAAK,EAAEyG,MAAM,EAAE;EAC3C,MAAMC,MAAM,GAAGD,MAAM,IAAIA,MAAM,CAACY,QAAQ,KAAK,CAAC,GAAGZ,MAAM,GAAG8B,kBAAkB,CAACQ,SAAS,CAAC,CAAC;EACxF,IAAIrC,MAAM,KAAKD,MAAM,EACnBoC,QAAQ,CAACvE,MAAM,EAAEoC,MAAM,EAAED,MAAM,CAAC;EAClC3H,MAAM,CAAC,MAAM,KAAKkK,iBAAiB,CAACtC,MAAM,EAAE7H,UAAU,CAACmB,KAAK,CAAC,CAAC,CAAC;AACjE;AACA,SAASgJ,iBAAiBA,CAACC,KAAK,EAAEjJ,KAAK,EAAE;EACvC,MAAMkJ,GAAG,GAAGD,KAAK,CAACT,UAAU,CAAC;EAC7B,IAAI/J,OAAO,CAACuB,KAAK,CAAC,EAAE;IAClB,IAAIiG,SAAS,EAAE;MACbgD,KAAK,CAACT,UAAU,CAAC,GAAGW,kBAAkB,CAACF,KAAK,CAAC;IAC/C,CAAC,MAAM;MACL,IAAIC,GAAG,EACLE,cAAc,CAACH,KAAK,EAAEC,GAAG,CAAC;MAC5B,MAAMG,QAAQ,GAAGP,aAAa,CAAC9I,KAAK,CAAC;MACrC,IAAI,CAACqJ,QAAQ,EACX;MACF,IAAI,CAACH,GAAG,EACNG,QAAQ,CAAC3B,WAAW,CAAC4B,eAAe,CAACL,KAAK,CAAC,CAAC;MAC9CA,KAAK,CAACnE,KAAK,CAACuE,QAAQ,CAAC;IACvB;EACF,CAAC,MAAM,IAAIzL,SAAS,CAACoC,KAAK,CAAC,EAAE;IAC3B,IAAIkJ,GAAG,EACLE,cAAc,CAACH,KAAK,EAAEC,GAAG,CAAC;IAC5B,IAAI,CAACjD,SAAS,EACZgD,KAAK,CAACnE,KAAK,CAAC9E,KAAK,CAAC;IACpB,IAAI,CAACkJ,GAAG,EACNlJ,KAAK,CAAC8E,KAAK,CAACwE,eAAe,CAACL,KAAK,CAAC,CAAC;EACvC,CAAC,MAAM,IAAIvK,QAAQ,CAACsB,KAAK,CAAC,IAAIrB,QAAQ,CAACqB,KAAK,CAAC,EAAE;IAC7C,IAAIiJ,KAAK,CAACX,SAAS,CAAC,EAAE;MACpBW,KAAK,CAAClE,WAAW,CAACuC,IAAI,GAAGtH,KAAK,GAAG,EAAE;MACnC;IACF;IACA,IAAIkJ,GAAG,EACLE,cAAc,CAACH,KAAK,EAAEC,GAAG,CAAC;IAC5B,IAAInB,IAAI;IACR,IAAI,CAAC9B,SAAS,EAAE;MACd8B,IAAI,GAAGnC,QAAQ,CAAC2B,cAAc,CAACvH,KAAK,GAAG,EAAE,CAAC;MAC1CiJ,KAAK,CAACnE,KAAK,CAACiD,IAAI,CAAC;IACnB,CAAC,MAAM;MACLA,IAAI,GAAGkB,KAAK,CAAClE,WAAW;IAC1B;IACAkE,KAAK,CAACX,SAAS,CAAC,GAAG,IAAI;IACvB,IAAI,CAACY,GAAG,EACNnB,IAAI,CAACjD,KAAK,CAACwE,eAAe,CAACL,KAAK,CAAC,CAAC;EACtC,CAAC,MAAM,IAAIC,GAAG,EAAE;IACdE,cAAc,CAACH,KAAK,EAAEC,GAAG,CAAC;EAC5B;AACF;AACA,SAASI,eAAeA,CAACL,KAAK,EAAE;EAC9B,OAAOA,KAAK,CAACT,UAAU,CAAC,GAAGC,eAAe,CAACM,SAAS,CAAC,CAAC;AACxD;AACA,SAASI,kBAAkBA,CAAC/H,IAAI,EAAE;EAChC,OAAOA,IAAI,EAAE;IACX,IAAIA,IAAI,CAACiG,QAAQ,KAAK,CAAC,IAAIjG,IAAI,CAAC4E,SAAS,KAAK0C,sBAAsB,EAClE,OAAOtH,IAAI;IACbA,IAAI,GAAGA,IAAI,CAAC2D,WAAW;EACzB;AACF;AACA,SAASqE,cAAcA,CAACH,KAAK,EAAEC,GAAG,EAAE;EAClC,OAAOD,KAAK,CAAClE,WAAW,KAAKmE,GAAG,EAC9BD,KAAK,CAAClE,WAAW,CAACI,MAAM,CAAC,CAAC;EAC5B8D,KAAK,CAACX,SAAS,CAAC,GAAG,KAAK;AAC1B;AACA,SAASQ,aAAaA,CAAC9I,KAAK,EAAE;EAC5B,MAAMqB,SAAS,GAAGjD,YAAY,CAAC4B,KAAK,CAAC;EACrC,IAAI,CAACqB,SAAS,CAACV,MAAM,EACnB,OAAO,IAAI;EACb,MAAM0I,QAAQ,GAAGxL,cAAc,CAAC,CAAC;EACjC,KAAK,IAAI0D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,SAAS,CAACV,MAAM,EAAEY,CAAC,EAAE,EAAE;IACzC,MAAMgI,KAAK,GAAGlI,SAAS,CAACE,CAAC,CAAC;IAC1B,IAAI/C,UAAU,CAAC+K,KAAK,CAAC,EAAE;MACrBX,YAAY,CAACS,QAAQ,EAAEE,KAAK,CAAC;IAC/B,CAAC,MAAM;MACLF,QAAQ,CAACG,MAAM,CAACD,KAAK,CAAC;IACxB;EACF;EACA,OAAOF,QAAQ;AACjB;;AAEA;AACA,IAAII,GAAG,GAAG,eAAgBtI,MAAM,CAAC,CAAC;AAClC,IAAIuI,UAAU,GAAG,eAAgB,IAAIC,OAAO,CAAC,CAAC;AAC9C,IAAIC,SAAS;AACb,IAAIC,0BAA0B,GAAGA,CAAA,KAAM,CAAC9K,WAAW,CAAC6K,SAAS,CAAC,GAAGA,SAAS,GAAGA,SAAS,GAAGE,UAAU,IAAI,oBAAoB,IAAIC,QAAQ,CAACC,SAAS,IAAI,SAAS,IAAIC,aAAa,CAACD,SAAS;AACzL,SAASE,SAASA,CAAClK,KAAK,EAAE;EACxB,OAAOmK,SAAS,CAACnK,KAAK,GAAG,EAAE,CAAC;AAC9B;AACA,SAASoK,GAAGA,CAACC,OAAO,EAAE,GAAGzC,MAAM,EAAE;EAC/B,IAAI0C,IAAI,GAAGD,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE;EAC3B,KAAK,IAAI9I,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqG,MAAM,CAACjH,MAAM,EAAEY,CAAC,EAAE,EAAE;IACtC,MAAMvB,KAAK,GAAG4H,MAAM,CAACrG,CAAC,CAAC;IACvB,IAAIvB,KAAK,GAAGyJ,GAAG,CAAC,EAAE;MAChBa,IAAI,IAAItK,KAAK,CAAC+H,IAAI;IACpB,CAAC,MAAM,IAAI,OAAO/H,KAAK,KAAK,QAAQ,EAAE;MACpCsK,IAAI,IAAItK,KAAK;IACf,CAAC,MAAM;MACL,MAAM,IAAIuK,KAAK,CACZ,kFAAiFvK,KAAM,wFAC1F,CAAC;IACH;IACAsK,IAAI,IAAID,OAAO,CAAC9I,CAAC,GAAG,CAAC,CAAC;EACxB;EACA,OAAO4I,SAAS,CAACG,IAAI,EAAED,OAAO,CAAC;AACjC;AACA,SAASF,SAASA,CAACG,IAAI,EAAED,OAAO,EAAE;EAChC,IAAIG,UAAU;EACd,OAAO;IACL,CAACf,GAAG,GAAG,IAAI;IACX,IAAI1B,IAAIA,CAAA,EAAG;MACT,OAAOuC,IAAI;IACb,CAAC;IACD,IAAIG,KAAKA,CAAA,EAAG;MACV,IAAID,UAAU,EAAE;QACd,OAAOA,UAAU;MACnB,CAAC,MAAM,IAAIH,OAAO,IAAIX,UAAU,CAACxE,GAAG,CAACmF,OAAO,CAAC,EAAE;QAC7C,OAAOX,UAAU,CAACnE,GAAG,CAAC8E,OAAO,CAAC;MAChC,CAAC,MAAM,IAAIR,0BAA0B,CAAC,CAAC,EAAE;QACvC,CAACW,UAAU,GAAG,IAAIP,aAAa,CAAC,CAAC,EAAES,WAAW,CAACJ,IAAI,CAAC;QACpD,IAAID,OAAO,EACTX,UAAU,CAACrE,GAAG,CAACgF,OAAO,EAAEG,UAAU,CAAC;QACrC,OAAOA,UAAU;MACnB;MACA;IACF,CAAC;IACDG,QAAQA,CAAA,EAAG;MACT,OAAOL,IAAI;IACb;EACF,CAAC;AACH;AACA,SAASM,QAAQA,CAAC/J,KAAK,EAAEyJ,IAAI,EAAE;EAC7B,IAAIT,0BAA0B,CAAC,CAAC,EAAE;IAChChJ,KAAK,CAACgK,kBAAkB,GAAGP,IAAI,CAACtF,GAAG,CAAE8F,IAAI,IAAKA,IAAI,CAACL,KAAK,CAAC;EAC3D,CAAC,MAAM;IACL,MAAMM,KAAK,GAAGnF,QAAQ,CAACoF,aAAa,CAAC,OAAO,CAAC;IAC7CD,KAAK,CAACtD,WAAW,GAAG6C,IAAI,CAACtF,GAAG,CAAE8F,IAAI,IAAKA,IAAI,CAAC/C,IAAI,CAAC,CAACkD,IAAI,CAAC,EAAE,CAAC;IAC1DpK,KAAK,CAAC6G,WAAW,CAACqD,KAAK,CAAC;EAC1B;AACF;;AAEA;AACA,SAASG,qBAAqBA,CAACC,UAAU,EAAE;EACzCC,QAAQ,CAACD,UAAU,EAAE;IACnB3E,MAAM;IACNoE;EACF,CAAC,CAAC;AACJ;AACA,SAASS,yBAAyBA,CAACF,UAAU,EAAE;EAC7CC,QAAQ,CAACD,UAAU,EAAE;IACnB3E,MAAM,EAAEmC;EACV,CAAC,CAAC;AACJ;AACA,SAAS2C,6BAA6BA,CAACH,UAAU,EAAE;EACjDC,QAAQ,CAACD,UAAU,CAAC;AACtB;AACA,IAAII,oBAAoB,GAAGpK,MAAM,CAAC,mBAAoB,CAAC;AACvD,IAAIqK,qBAAqB,GAAG,KAAK,CAAC;AAClC,SAASJ,QAAQA,CAACD,UAAU,EAAE3H,IAAI,EAAE;EAClC,MAAMiI,OAAO,GAAGN,UAAU,CAACxJ,EAAE,CAAC8J,OAAO;EACrC,IAAI,CAACC,MAAM,CAACC,cAAc,CAACpG,GAAG,CAACkG,OAAO,CAAC,EAAE;IACvC,IAAI,CAACC,MAAM,CAACH,oBAAoB,CAAC,EAC/BG,MAAM,CAACH,oBAAoB,CAAC,GAAG,eAAgB,IAAInG,GAAG,CAAC,CAAC;IAC1DsG,MAAM,CAACH,oBAAoB,CAAC,CAAClG,GAAG,CAACoG,OAAO,EAAEN,UAAU,CAAC;IACrDO,MAAM,CAACC,cAAc,CAACC,MAAM,CAACH,OAAO,EAAEI,iBAAiB,CAACV,UAAU,EAAE3H,IAAI,CAAC,CAAC;EAC5E;AACF;;AAEA;AACA,SAASsI,kBAAkBA,CAACrK,IAAI,EAAE;EAChC,MAAMsK,QAAQ,GAAGnG,QAAQ,CAACoF,aAAa,CAAC,UAAU,CAAC;EACnDe,QAAQ,CAACC,SAAS,GAAGvK,IAAI;EACzB,OAAOsK,QAAQ,CAACE,OAAO;AACzB;AACA,IAAIC,kBAAkB,GAAGrO,cAAc;AACvC,SAASsO,gBAAgBA,CAAC9C,QAAQ,EAAE+C,MAAM,GAAGnG,SAAS,EAAEK,CAAC,EAAE;EACzD,IAAI;IACF,OAAO,CAAC+F,eAAe,CAACD,MAAM,CAAC,EAAEA,MAAM,CAAC;EAC1C,CAAC,CAAC,OAAOE,CAAC,EAAE;IACV,OAAOH,gBAAgB,CAAC9C,QAAQ,EAAE1D,kBAAkB,CAACC,QAAQ,CAAC2G,UAAU,CAAClD,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;EAC5F;AACF;AACA,SAASmD,gBAAgBA,CAACnD,QAAQ,EAAE;EAClC,OAAO8C,gBAAgB,CAAC9C,QAAQ,CAAC,CAAC,CAAC,CAAC;AACtC;AACA,SAASgD,eAAeA,CAACD,MAAM,EAAE;EAC/B,IAAIK,OAAO,GAAGL,MAAM,CAACM,QAAQ,CAAC,CAAC,CAAC3H,WAAW;EAC3C,IAAI0H,OAAO,CAACE,SAAS,CAACrM,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,IAAImM,OAAO,CAACjF,UAAU,IAAIiF,OAAO,CAACjF,UAAU,CAACoF,QAAQ,KAAK,aAAa,EAAE;IAC7G,IAAIxL,IAAI,GAAGqL,OAAO,CAACjF,UAAU,CAACzC,WAAW,IAAI0H,OAAO,CAAC1H,WAAW;IAChE,IAAI3D,IAAI,EACNgL,MAAM,CAACS,WAAW,GAAGzL,IAAI;EAC7B;EACA,OAAOqL,OAAO;AAChB;AACA,IAAIK,YAAY,GAAG7G,SAAS;AAC5B,SAAS8G,uBAAuBA,CAACC,IAAI,EAAEC,KAAK,EAAE;EAC5C,MAAM9B,UAAU,GAAGO,MAAM,CAACH,oBAAoB,CAAC,EAAEhG,GAAG,CAACyH,IAAI,CAACL,SAAS,CAAC;EACpE,IAAI,CAACxB,UAAU,EAAE;IACf,MAAMZ,KAAK,CACR,6CAA4CyC,IAAI,CAACL,SAAU,EAC9D,CAAC;EACH;EACA,MAAMO,SAAS,GAAGC,eAAe,CAAChC,UAAU,EAAE;IAAE8B;EAAM,CAAC,CAAC;EACxDD,IAAI,CAACI,eAAe,CAACF,SAAS,CAAC;EAC/B,OAAOA,SAAS,CAACtL,QAAQ,CAACyL,MAAM;AAClC;AACA,SAASC,QAAQA,CAACjE,QAAQ,EAAE;EAC1B,MAAMkE,KAAK,GAAG3H,QAAQ,CAAC2G,UAAU,CAAClD,QAAQ,EAAE,IAAI,CAAC;EACjD,OAAOkE,KAAK,CAACC,iBAAiB;AAChC;AACA,SAASC,iBAAiBA,CAAChC,OAAO,EAAE;EAClC,OAAO7F,QAAQ,CAACoF,aAAa,CAACS,OAAO,CAAC;AACxC;AACA,SAASiC,gCAAgCA,CAACjB,OAAO,EAAE;EACjD,IAAIA,OAAO,CAACjF,UAAU,EAAEoF,QAAQ,KAAK,UAAU,EAAE;IAC/C,IAAIH,OAAO,CAACjF,UAAU,CAACmG,YAAY,CAAC,YAAY,CAAC,EAAE;MACjD7P,0BAA0B,CAAC2O,OAAO,CAAC;IACrC,CAAC,MAAM;MACLA,OAAO,CAACjF,UAAU,CAACrC,MAAM,CAAC,CAAC;IAC7B;EACF;AACF;AACA,IAAIyI,SAAS,GAAGpH,MAAM;AACtB,SAASqH,mBAAmBA,CAACnH,MAAM,EAAE1G,KAAK,EAAE;EAC1CwG,MAAM,CAACE,MAAM,CAACoH,aAAa,EAAE9N,KAAK,EAAE0G,MAAM,CAAC;AAC7C;AACA,IAAIqH,cAAc,GAAGpF,UAAU;AAC/B,SAASqF,wBAAwBA,CAACtH,MAAM,EAAE1G,KAAK,EAAE;EAC/C2I,UAAU,CAACjC,MAAM,CAACoH,aAAa,EAAE9N,KAAK,EAAE0G,MAAM,CAAC;AACjD;AACA,SAASuH,mBAAmBA,CAACf,SAAS,EAAED,KAAK,GAAG,CAAC,CAAC,EAAE;EAClD,OAAOjO,IAAI,CAAC,MAAMkO,SAAS,CAACD,KAAK,CAAC,CAAC;AACrC;AACA,IAAIrG,UAAU,GAAG,eAAgBzF,MAAM,CAAC,YAAa,CAAC;AACtD,SAAS+M,WAAWA,CAACC,EAAE,EAAE;EACvBA,EAAE,CAACvH,UAAU,CAAC,GAAG,IAAI;EACrB,OAAOuH,EAAE;AACX;AACA,SAASC,MAAMA,CAAC3B,OAAO,EAAE4B,GAAG,EAAE;EAC5B,IAAI5P,OAAO,CAAC4P,GAAG,CAAC,EAAE;IAChBA,GAAG,CAACC,MAAM,CAAC9P,UAAU,CAAC,CAAC+P,OAAO,CAAEC,IAAI,IAAKA,IAAI,CAAC/B,OAAO,CAAC,CAAC;EACzD,CAAC,MAAM,IAAIjO,UAAU,CAAC6P,GAAG,CAAC,EAAE;IAC1BA,GAAG,CAAC5B,OAAO,CAAC;EACd;AACF;AACA,SAASgC,YAAYA,CAAChC,OAAO,EAAEiC,SAAS,EAAEC,IAAI,EAAE;EAC9C,IAAInQ,UAAU,CAACkQ,SAAS,CAAC,EACvBA,SAAS,CAACjC,OAAO,EAAE,GAAGkC,IAAI,CAAC;AAC/B;AACA,IAAIC,OAAO,GAAG7Q,YAAY;AAC1B,IAAI8Q,QAAQ,GAAG7Q,WAAW;AAC1B,IAAI8Q,QAAQ,GAAG7Q,QAAQ;AACvB,SAAS8Q,SAASA,CAACtC,OAAO,EAAEQ,KAAK,EAAE;EACjC,MAAM+B,IAAI,GAAGhM,MAAM,CAACgM,IAAI,CAAC/B,KAAK,CAAC;EAC/B,KAAK,IAAI1L,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyN,IAAI,CAACrO,MAAM,EAAEY,CAAC,EAAE,EAAE;IACpC,MAAM0N,KAAK,GAAGD,IAAI,CAACzN,CAAC,CAAC;IACrB,IAAI0N,KAAK,IAAIxC,OAAO,EAAE;MACpB,IAAIjO,UAAU,CAACyO,KAAK,CAACgC,KAAK,CAAC,CAAC,EAAE;QAC5BnQ,MAAM,CAAC,MAAM,MAAM2N,OAAO,CAACwC,KAAK,CAAC,GAAGhC,KAAK,CAACgC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MACtD,CAAC,MAAM;QACLxC,OAAO,CAACwC,KAAK,CAAC,GAAGhC,KAAK,CAACgC,KAAK,CAAC;MAC/B;IACF,CAAC,MAAM,IAAIzQ,UAAU,CAACyO,KAAK,CAACgC,KAAK,CAAC,CAAC,EAAE;MACnCnQ,MAAM,CAAC,MAAM,KAAK8P,OAAO,CAACnC,OAAO,EAAEwC,KAAK,EAAEhC,KAAK,CAACgC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC,MAAM;MACLL,OAAO,CAACnC,OAAO,EAAEwC,KAAK,EAAEhC,KAAK,CAACgC,KAAK,CAAC,CAAC;IACvC;EACF;AACF;AACA,SAASC,cAAcA,CAAC,GAAGC,OAAO,EAAE;EAClC,MAAM5I,MAAM,GAAG4I,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;EAC/B,KAAK,IAAI5N,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4N,OAAO,CAACxO,MAAM,EAAEY,CAAC,EAAE,EAAE;IACvC,MAAM6N,MAAM,GAAGD,OAAO,CAAC5N,CAAC,CAAC;IACzB,IAAI6N,MAAM,EACRpM,MAAM,CAACC,MAAM,CAACsD,MAAM,EAAE6I,MAAM,CAAC;EACjC;EACA,OAAO7I,MAAM;AACf;AACA,SAAS8I,SAASA,CAAC9I,MAAM,EAAErG,IAAI,EAAE2D,OAAO,EAAEyL,OAAO,GAAG,KAAK,EAAE;EACzD,IAAI9Q,UAAU,CAACqF,OAAO,CAAC,EAAE;IACvBlG,WAAW,CAAC4I,MAAM,EAAErG,IAAI,EAAE2D,OAAO,EAAE;MAAEyL;IAAQ,CAAC,CAAC;EACjD;AACF;AACA,IAAIC,gBAAgB,GAAG,eAAgBpO,MAAM,CAAC,kBAAmB,CAAC;AAClE,SAASqO,kBAAkBA,CAACC,KAAK,EAAEC,SAAS,GAAGhE,MAAM,CAAC9F,QAAQ,EAAE;EAC9D,MAAM+J,MAAM,GAAGD,SAAS,CAACH,gBAAgB,CAAC,KAAK,eAAgB,IAAIK,GAAG,CAAC,CAAC;EACxE,KAAK,IAAIrO,CAAC,GAAG,CAAC,EAAEsO,GAAG,GAAGJ,KAAK,CAAC9O,MAAM,EAAEY,CAAC,GAAGsO,GAAG,EAAEtO,CAAC,EAAE,EAAE;IAChD,MAAMrB,IAAI,GAAGuP,KAAK,CAAClO,CAAC,CAAC;IACrB,IAAI,CAACoO,MAAM,CAACzK,GAAG,CAAChF,IAAI,CAAC,EAAE;MACrByP,MAAM,CAACG,GAAG,CAAC5P,IAAI,CAAC;MAChBwP,SAAS,CAACK,gBAAgB,CAAC7P,IAAI,EAAE8P,uBAAuB,CAAC;IAC3D;EACF;AACF;AACA,SAASA,uBAAuBA,CAACtM,KAAK,EAAE;EACtC,MAAMuM,QAAQ,GAAI,KAAIvM,KAAK,CAACxD,IAAK,EAAC;IAAEgQ,OAAO,GAAI,KAAIxM,KAAK,CAACxD,IAAK,MAAK;EACnE,IAAIkB,IAAI,GAAGsC,KAAK,CAACyM,YAAY,IAAIzM,KAAK,CAACyM,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,IAAIzM,KAAK,CAAC6C,MAAM;EACxE,IAAI7C,KAAK,CAAC6C,MAAM,KAAKnF,IAAI,EAAE;IACzB4B,MAAM,CAACoN,cAAc,CAAC1M,KAAK,EAAE,QAAQ,EAAE;MACrC2M,YAAY,EAAE,IAAI;MAClBrQ,KAAK,EAAEoB;IACT,CAAC,CAAC;EACJ;EACA4B,MAAM,CAACoN,cAAc,CAAC1M,KAAK,EAAE,eAAe,EAAE;IAC5C2M,YAAY,EAAE,IAAI;IAClB9K,GAAGA,CAAA,EAAG;MACJ,OAAOnE,IAAI,IAAIwE,QAAQ;IACzB;EACF,CAAC,CAAC;EACF,IAAI/B,OAAO,EAAEyD,IAAI;EACjB,OAAOlG,IAAI,EAAE;IACXyC,OAAO,GAAGzC,IAAI,CAAC6O,QAAQ,CAAC;IACxB,IAAIpM,OAAO,IAAI,CAACzC,IAAI,CAACkP,QAAQ,IAAI9R,UAAU,CAACqF,OAAO,CAAC,EAAE;MACpDyD,IAAI,GAAGlG,IAAI,CAAC8O,OAAO,CAAC;MACpB,CAACnR,WAAW,CAACuI,IAAI,CAAC,GAAGzD,OAAO,CAAC0M,IAAI,CAACnP,IAAI,EAAEkG,IAAI,EAAE5D,KAAK,CAAC,GAAGG,OAAO,CAAC0M,IAAI,CAACnP,IAAI,EAAEsC,KAAK,CAAC;IAClF;IACAtC,IAAI,GAAGA,IAAI,CAACgH,UAAU,IAAIhH,IAAI,CAAC4L,IAAI;EACrC;AACF;AACA,IAAIwD,OAAO,GAAGxR,IAAI;AAClB,IAAIyR,SAAS,GAAGxR,MAAM;AACtB,IAAIyR,SAAS,GAAG5R,MAAM;AACtB,IAAI6R,WAAW,GAAGzR,QAAQ;AAC1B,SAAS0R,WAAWA,CAAC/P,KAAK,EAAEiD,OAAO,EAAE;EACnC,OAAOqC,YAAY,CAAC,MAAM0K,UAAU,CAAChQ,KAAK,EAAEiD,OAAO,CAAC,EAAEA,OAAO,CAAC;AAChE;AACA,SAAS+M,UAAUA,CAAChQ,KAAK,EAAEiD,OAAO,EAAE;EAClC,OAAOxE,MAAM,CAAEyB,OAAO,IAAK;IACzB,IAAI,CAACkF,SAAS,EAAE;MACd0C,UAAU,CAAC7E,OAAO,CAACyC,MAAM,EAAE1F,KAAK,CAAC,CAAC,CAAC;IACrC,CAAC,MAAM;MACLhC,UAAU,CAACgC,KAAK,CAAC;IACnB;IACA,OAAOE,OAAO;EAChB,CAAC,CAAC;AACJ;;AAEA;AACA,IAAI+P,OAAO,GAAG,eAAgB3P,MAAM,CAAC,SAAU,CAAC;AAChD,IAAI4P,KAAK,GAAG,eAAgB5P,MAAM,CAAC,OAAQ,CAAC;AAC5C,IAAI6P,OAAO,GAAG,eAAgB7P,MAAM,CAAC,SAAU,CAAC;AAChD,SAASgM,eAAeA,CAAChC,UAAU,EAAE3H,IAAI,EAAE;EACzC,MAAM5B,QAAQ,GAAG,IAAIqP,iBAAiB,CAAC9F,UAAU,EAAE3H,IAAI,CAAC;EACxD,OAAOjE,QAAQ,CAAC,MAAM,IAAI4L,UAAU,CAACvJ,QAAQ,CAAC,EAAEA,QAAQ,CAACyL,MAAM,CAAC;AAClE;AACA,IAAI4D,iBAAiB,GAAG,MAAM;EAC5B/O,WAAWA,CAACiJ,UAAU,EAAE3H,IAAI,GAAG,CAAC,CAAC,EAAE;IACjC,IAAI,CAAC3B,GAAG,GAAG,IAAI;IACf,IAAI,CAACqC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACD,UAAU,GAAG,KAAK;IACvB,IAAI,CAACiN,UAAU,GAAG,KAAK;IACvB,IAAI,CAACnO,MAAM,GAAG,CAAC,CAAC;IAChB,IAAI,CAACK,OAAO,GAAG,CAAC,CAAC;IACjB,IAAI,CAACrB,MAAM,GAAG,CAAC,CAAC;IAChB;IACA,IAAI,CAACoP,MAAM,GAAG,IAAI;IAClB,IAAI,CAAClP,MAAM,GAAG,IAAI;IAClB,IAAI,CAACG,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACI,iBAAiB,GAAG,EAAE;IAC3B,IAAI,CAACE,oBAAoB,GAAG,EAAE;IAC9B,IAAI,CAACE,iBAAiB,GAAG,EAAE;IAC3BtD,MAAM,CAAEyB,OAAO,IAAK;MAClB,IAAI,CAACsM,MAAM,GAAG7N,QAAQ,CAAC,CAAC;MACxB,IAAI,CAAC4R,QAAQ,GAAGrQ,OAAO;MACvB,IAAIyC,IAAI,CAAC6N,KAAK,EACZ7N,IAAI,CAAC6N,KAAK,CAAC7H,MAAM,CAAC,IAAI,CAAC6D,MAAM,CAAC;MAChC,MAAMiE,KAAK,GAAGnG,UAAU,CAACxJ,EAAE,CAAC2P,KAAK;MACjC,IAAIA,KAAK,EAAE;QACT,IAAI,CAACrP,MAAM,GAAGqP,KAAK,CAACC,MAAM,CAAC,CAAC;QAC5B,IAAI,CAACJ,MAAM,GAAG,IAAIK,KAAK,CAAC,IAAI,CAACvP,MAAM,EAAE;UACnCsD,GAAG,EAAEA,CAACkM,CAAC,EAAExC,KAAK,KAAK,IAAI,CAAChN,MAAM,CAACgN,KAAK,CAAC,CAAC;QACxC,CAAC,CAAC;QACF9P,cAAc,CAACmS,KAAK,EAAE,IAAI,CAACrP,MAAM,CAAC;MACpC;MACA,MAAMgL,KAAK,GAAG9B,UAAU,CAACxJ,EAAE,CAACsL,KAAK;MACjC,IAAIA,KAAK,EAAE;QACT,IAAI,CAAClL,MAAM,GAAG2P,mBAAmB,CAACzE,KAAK,CAAC;QACxC,IAAIzJ,IAAI,CAACyJ,KAAK,EAAE;UACd,KAAK,MAAMgC,KAAK,IAAIjM,MAAM,CAACgM,IAAI,CAACxL,IAAI,CAACyJ,KAAK,CAAC,EAAE;YAC3C,IAAIgC,KAAK,IAAIhC,KAAK,EAAE;cAClB,MAAMjN,KAAK,GAAGwD,IAAI,CAACyJ,KAAK,CAACgC,KAAK,CAAC;cAC/B,IAAIxP,YAAY,CAACO,KAAK,CAAC,EAAE;gBACvBN,QAAQ,CAAC,MAAM,KAAK,IAAI,CAACqC,MAAM,CAACkN,KAAK,CAAC,CAAC5J,GAAG,CAACrF,KAAK,CAAC,CAAC,CAAC,CAAC;cACtD,CAAC,MAAM;gBACL,IAAI,CAAC+B,MAAM,CAACkN,KAAK,CAAC,CAAC5J,GAAG,CAACrF,KAAK,CAAC;cAC/B;YACF;UACF;QACF;MACF;MACA,IAAIwD,IAAI,CAACyJ,KAAK,EAAEjB,SAAS,EAAE;QACzB,IAAI,CAAC/H,UAAU,GAAG,IAAI;MACxB;MACAtE,SAAS,CAAC,IAAI,CAACyE,QAAQ,CAAC9B,IAAI,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC,CAAC;EACJ;EACA8B,QAAQA,CAAA,EAAG;IACT,IAAI,IAAI,CAAC8M,UAAU,EACjB;IACF,IAAI,CAACA,UAAU,GAAG,IAAI;IACtB,KAAK,MAAM/M,OAAO,IAAI,IAAI,CAACvB,iBAAiB,EAAE;MAC5CrD,QAAQ,CAAC,MAAM4E,OAAO,CAAC,IAAI,CAACtC,GAAG,CAAC,EAAE,IAAI,CAACwL,MAAM,CAAC;IAChD;IACA,IAAI,CAACxL,GAAG,EAAEsC,OAAO,CAAC,CAAC;IACnB,IAAI,CAAC/B,gBAAgB,CAACzB,MAAM,GAAG,CAAC;IAChC,IAAI,CAAC6B,iBAAiB,CAAC7B,MAAM,GAAG,CAAC;IACjC,IAAI,CAAC+B,oBAAoB,CAAC/B,MAAM,GAAG,CAAC;IACpC,IAAI,CAACiC,iBAAiB,CAACjC,MAAM,GAAG,CAAC;IACjCf,IAAI,CAAC,CAAC;IACN,IAAI,CAACwR,QAAQ,CAAC,CAAC;IACf,IAAI,CAACvP,GAAG,GAAG,IAAI;IACf,IAAI,CAACqC,SAAS,GAAG,IAAI;EACvB;AACF,CAAC;AACD,SAASwN,mBAAmBA,CAACC,IAAI,EAAE;EACjC,MAAM1E,KAAK,GAAG,CAAC,CAAC;EAChB,KAAK,MAAM2E,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAAC2C,IAAI,CAAC,EAAE;IACpC,MAAME,GAAG,GAAGF,IAAI,CAACC,IAAI,CAAC;IACtB3E,KAAK,CAAC2E,IAAI,CAAC,GAAG/R,MAAM,CAACgS,GAAG,CAAC7R,KAAK,EAAE6R,GAAG,CAAC;EACtC;EACA,OAAO5E,KAAK;AACd;;AAEA;AACA,eAAe6E,KAAKA,CAAC9E,IAAI,EAAE;EACzB,MAAM1I,MAAM,GAAGyN,UAAU,CAAC/E,IAAI,CAAC;EAC/B,MAAMgF,QAAQ,GAAGhF,IAAI,CAAC9K,WAAW;IAAE+P,aAAa,GAAGD,QAAQ,CAACE,UAAU;EACtE,IAAI5N,MAAM,EAAE;IACV,MAAMqH,cAAc,CAACwG,WAAW,CAAC7N,MAAM,CAACqI,SAAS,CAAC;IAClDrI,MAAM,CAACwM,OAAO,CAAC,KAAK,IAAI,KAAI,MAAM,IAAIsB,OAAO,CAAEC,GAAG,IAAK/N,MAAM,CAACwM,OAAO,CAAC,CAACzO,IAAI,CAACgQ,GAAG,CAAC,CAAC;EACnF;EACA,IAAIrF,IAAI,CAACsF,WAAW,EAAE;IACpB,IAAIhO,MAAM,EAAEiO,SAAS,EACnBvF,IAAI,CAACuF,SAAS,GAAG,IAAI;IACvBvF,IAAI,CAACI,eAAe,CAClBD,eAAe,CAAC8E,aAAa,EAAE;MAC7BZ,KAAK,EAAE/M,MAAM,EAAE4I,SAAS,EAAEtL,QAAQ,CAACyL;IACrC,CAAC,CACH,CAAC;EACH;AACF;AACA,SAASmF,qBAAqBA,CAACxF,IAAI,EAAE;EACnC,MAAMgF,QAAQ,GAAGhF,IAAI,CAAC9K,WAAW;IAAE+P,aAAa,GAAGD,QAAQ,CAACE,UAAU;IAAEjF,KAAK,GAAG,CAAC,CAAC;EAClF,IAAI,CAAC+E,QAAQ,CAACjP,MAAM,EAClB,OAAOkK,KAAK;EACd,KAAK,MAAMwF,IAAI,IAAIzF,IAAI,CAAClK,UAAU,EAAE;IAClC,IAAI4P,QAAQ,GAAGV,QAAQ,CAACjP,MAAM,CAACwC,GAAG,CAACkN,IAAI,CAACb,IAAI,CAAC;MAAEe,OAAO,GAAGD,QAAQ,IAAIT,aAAa,CAACtQ,EAAE,CAACsL,KAAK,CAACyF,QAAQ,CAAC,CAACxS,IAAI,EAAE0S,IAAI;IAChH,IAAID,OAAO,EAAE;MACX,IAAIE,SAAS,GAAG7F,IAAI,CAAC8F,YAAY,CAACL,IAAI,CAACb,IAAI,CAAC;MAC5C3E,KAAK,CAACyF,QAAQ,CAAC,GAAGC,OAAO,CAACE,SAAS,CAAC;IACtC;EACF;EACA,OAAO5F,KAAK;AACd;AACA,SAAS8E,UAAUA,CAAC/E,IAAI,EAAE;EACxB,IAAIgF,QAAQ,GAAGhF,IAAI,CAAC9K,WAAW;IAAE+P,aAAa,GAAGD,QAAQ,CAACE,UAAU;IAAE9Q,IAAI,GAAG4L,IAAI,CAAC5E,UAAU;IAAE2K,MAAM,GAAGd,aAAa,CAACtQ,EAAE,CAAC8J,OAAO,CAACuH,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG;EACtJ,OAAO5R,IAAI,EAAE;IACX,IAAIA,IAAI,CAACiG,QAAQ,KAAK,CAAC,IAAIjG,IAAI,CAACuL,SAAS,CAACsG,UAAU,CAACF,MAAM,CAAC,EAAE;MAC5D,OAAO3R,IAAI;IACb;IACAA,IAAI,GAAGA,IAAI,CAACgH,UAAU;EACxB;EACA,OAAO,IAAI;AACb;;AAEA;AACA,SAASyD,iBAAiBA,CAACV,UAAU,EAAE3H,IAAI,EAAE;EAC3C,MAAM0P,SAAS,GAAG/H,UAAU,CAACC,QAAQ;EACrC,IAAID,UAAU,CAACC,QAAQ,EAAE;IACvB,MAAMtK,MAAM,GAAGrC,OAAO,CAACyU,SAAS,CAAC,GAAGA,SAAS,GAAGA,SAAS,GAAG,CAAC;IAC7D,IAAIzU,OAAO,CAACqC,MAAM,CAAC,EACjB,KAAK,MAAMqS,UAAU,IAAIrS,MAAM,EAC7BsK,QAAQ,CAAC+H,UAAU,EAAE3P,IAAI,CAAC;EAChC;EACA,IAAI4P,KAAK;EACT,IAAIjI,UAAU,CAACxJ,EAAE,CAACsL,KAAK,EAAE;IACvBmG,KAAK,GAAG,eAAgB,IAAIhO,GAAG,CAAC,CAAC;IACjC,KAAK,MAAMsN,QAAQ,IAAI1P,MAAM,CAACgM,IAAI,CAAC7D,UAAU,CAACxJ,EAAE,CAACsL,KAAK,CAAC,EAAE;MACvD,MAAM4E,GAAG,GAAG1G,UAAU,CAACxJ,EAAE,CAACsL,KAAK,CAACyF,QAAQ,CAAC;MACzC,MAAMD,IAAI,GAAGZ,GAAG,CAACwB,SAAS;MAC1B,IAAIZ,IAAI,KAAK,KAAK,EAAE;QAClB,MAAMa,QAAQ,GAAGb,IAAI,IAAIvU,gBAAgB,CAACwU,QAAQ,CAAC;QACnDU,KAAK,CAAC/N,GAAG,CAACiO,QAAQ,EAAEZ,QAAQ,CAAC;MAC/B;IACF;EACF;EACA,MAAMa,eAAe,SAASC,iBAAiB,CAAC;IAC9C,WAAWtB,UAAUA,CAAA,EAAG;MACtB,OAAO/G,UAAU;IACnB;EACF;EACAoI,eAAe,CAACE,KAAK,GAAGjQ,IAAI;EAC5B+P,eAAe,CAACxQ,MAAM,GAAGqQ,KAAK;EAC9B,MAAMM,KAAK,GAAGH,eAAe,CAACvJ,SAAS;IAAE2J,cAAc,GAAGxI,UAAU,CAACnB,SAAS;EAC9E,IAAImB,UAAU,CAACxJ,EAAE,CAACsL,KAAK,EAAE;IACvB,KAAK,MAAMgC,KAAK,IAAIjM,MAAM,CAACgM,IAAI,CAAC7D,UAAU,CAACxJ,EAAE,CAACsL,KAAK,CAAC,EAAE;MACpDjK,MAAM,CAACoN,cAAc,CAACsD,KAAK,EAAEzE,KAAK,EAAE;QAClC2E,UAAU,EAAE,IAAI;QAChBvD,YAAY,EAAE,IAAI;QAClB9K,GAAGA,CAAA,EAAG;UACJ,OAAO,CAAC,IAAI,CAAC2H,SAAS,GAAG/B,UAAU,CAACxJ,EAAE,CAACsL,KAAK,CAACgC,KAAK,CAAC,CAACjP,KAAK,GAAG,IAAI,CAACkN,SAAS,CAACtL,QAAQ,CAACG,MAAM,CAACkN,KAAK,CAAC,CAAC,CAAC;QACrG,CAAC;QACD5J,GAAGA,CAACrF,KAAK,EAAE;UACT,MAAMmO,EAAE,GAAGA,CAAA,KAAM,IAAI,CAACjB,SAAS,CAACtL,QAAQ,CAACG,MAAM,CAACkN,KAAK,CAAC,CAAC5J,GAAG,CAACrF,KAAK,CAAC;UACjE,IAAI,CAAC,IAAI,CAACkN,SAAS,EAAE;YACnB,IAAI,CAAC2G,cAAc,CAACC,MAAM,CAAC7E,KAAK,CAAC;YACjC,IAAI,CAAC4E,cAAc,CAACxO,GAAG,CAAC4J,KAAK,EAAEd,EAAE,CAAC;YAClC;UACF;UACAA,EAAE,CAAC,CAAC;QACN;MACF,CAAC,CAAC;IACJ;EACF;EACA,IAAIwF,cAAc,CAAC5C,KAAK,CAAC,EAAE;IACzB,KAAK,MAAMa,IAAI,IAAI+B,cAAc,CAAC5C,KAAK,CAAC,EAAE;MACxC/N,MAAM,CAACoN,cAAc,CAACsD,KAAK,EAAE9B,IAAI,EAAE;QACjCgC,UAAU,EAAE,IAAI;QAChBvD,YAAY,EAAE,IAAI;QAClB9K,GAAGA,CAAA,EAAG;UACJ,OAAO,IAAI,CAAC2H,SAAS,GAAG,IAAI,CAACA,SAAS,CAAC0E,IAAI,CAAC,GAAG,KAAK,CAAC;QACvD,CAAC;QACDvM,GAAGA,CAACrF,KAAK,EAAE;UACT,IAAI,CAAC,IAAI,CAACkN,SAAS,EAAE;YACnB,IAAI,CAAC2G,cAAc,CAACC,MAAM,CAAClC,IAAI,CAAC;YAChC,IAAI,CAACiC,cAAc,CAACxO,GAAG,CAACuM,IAAI,EAAE,MAAM;cAClC,IAAI,CAAC1E,SAAS,CAAC0E,IAAI,CAAC,GAAG5R,KAAK;YAC9B,CAAC,CAAC;YACF;UACF;UACA,IAAI,CAACkN,SAAS,CAAC0E,IAAI,CAAC,GAAG5R,KAAK;QAC9B;MACF,CAAC,CAAC;IACJ;EACF;EACA,IAAI2T,cAAc,CAAC3C,OAAO,CAAC,EAAE;IAC3B,KAAK,MAAMY,IAAI,IAAI+B,cAAc,CAAC3C,OAAO,CAAC,EAAE;MAC1C0C,KAAK,CAAC9B,IAAI,CAAC,GAAG,UAAS,GAAGjD,IAAI,EAAE;QAC9B,IAAI,CAAC,IAAI,CAACzB,SAAS,EACjB,IAAI,CAAC6G,iBAAiB,CAAC,CAAE,MAAKnC,IAAK,OAAM,CAAC,CAAC;QAC7C,OAAO,IAAI,CAAC1E,SAAS,CAAC0E,IAAI,CAAC,CAAC,GAAGjD,IAAI,CAAC;MACtC,CAAC;IACH;EACF;EACA,OAAO4E,eAAe;AACxB;AACA,IAAIS,YAAY,GAAGC,WAAW;AAC9B,IAAIC,EAAE;AACN,IAAIV,iBAAiB,GAAG,cAAcQ,YAAY,CAAC;EACjD9R,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,GAAGiS,SAAS,CAAC;IACnB,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB,IAAI,CAAClD,UAAU,GAAG,KAAK;IACvB,IAAI,CAACgB,UAAU,GAAG,IAAI;IACtB,IAAI,CAACmC,aAAa,GAAG,IAAI;IACzB,IAAI,CAACjS,gBAAgB,GAAG,eAAgB,IAAIwN,GAAG,CAAC,CAAC;IACjD,IAAI,CAAClN,oBAAoB,GAAG,EAAE;IAC9B,IAAI,CAACmR,cAAc,GAAG,eAAgB,IAAIzO,GAAG,CAAC,CAAC;IAC/C,IAAI,CAACmN,SAAS,GAAG,KAAK;IACtB;IACA,IAAI,CAAC2B,EAAE,CAAC,GAAG,EAAE;IACb,IAAI,CAACI,aAAa,GAAG,KAAK;EAC5B;EACA,IAAIC,SAASA,CAAA,EAAG;IACd,OAAO,IAAI,CAAC5G,YAAY,CAAC,MAAM,CAAC;EAClC;EACA,IAAIT,SAASA,CAAA,EAAG;IACd,OAAO,IAAI,CAACgF,UAAU;EACxB;EACA,IAAIlQ,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACkQ,UAAU,EAAEtQ,QAAQ,CAACK,MAAM;EACzC;EACA,IAAIuS,KAAKA,CAAA,EAAG;IACV,IAAI,CAAC,IAAI,CAACtC,UAAU,EAAE;MACpB,IAAI,CAAC6B,iBAAiB,CAAC,CAAC,cAAc,CAAC,CAAC;IAC1C;IACA,OAAO,IAAI,CAAC7B,UAAU,CAACtQ,QAAQ,CAACuP,MAAM;EACxC;EACA,WAAWsD,kBAAkBA,CAAA,EAAG;IAC9B,OAAO,IAAI,CAAC1R,MAAM,GAAG2R,KAAK,CAAC9B,IAAI,CAAC,IAAI,CAAC7P,MAAM,CAACiM,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE;EAC1D;EACA2F,wBAAwBA,CAAC/C,IAAI,EAAEH,CAAC,EAAEmD,QAAQ,EAAE;IAC1C,MAAMC,IAAI,GAAG,IAAI,CAAC3S,WAAW;IAC7B,IAAI,CAAC,IAAI,CAACgQ,UAAU,IAAI,CAAC2C,IAAI,CAAC9R,MAAM,EAClC;IACF,MAAM2P,QAAQ,GAAGmC,IAAI,CAAC9R,MAAM,CAACwC,GAAG,CAACqM,IAAI,CAAC;IACtC,MAAMgB,IAAI,GAAGiC,IAAI,CAAC3C,UAAU,CAACvQ,EAAE,CAACsL,KAAK,CAACyF,QAAQ,CAAC,EAAExS,IAAI,EAAE0S,IAAI;IAC3D,IAAIA,IAAI,EACN,IAAI,CAACV,UAAU,CAACtQ,QAAQ,CAACG,MAAM,CAAC2Q,QAAQ,CAAC,CAACrN,GAAG,CAACuN,IAAI,CAACgC,QAAQ,CAAC,CAAC;EACjE;EACAE,iBAAiBA,CAAA,EAAG;IAClB,MAAMlT,QAAQ,GAAG,IAAI,CAACsQ,UAAU,EAAEtQ,QAAQ;IAC1C,IAAI,CAAC,IAAI,CAAC2S,SAAS,IAAI,CAAC3S,QAAQ,EAC9B,OAAO,IAAI,CAACmT,MAAM,CAAC,CAAC;IACtB,IAAI,CAACnT,QAAQ,IAAI,CAAC,IAAI,CAAC0Q,WAAW,IAAI,IAAI,CAAC8B,UAAU,EACnD;IACF,IAAI,IAAI,CAAClD,UAAU,EAAE;MACnB;QACE,MAAM3G,KAAK,CACT,qEACF,CAAC;MACH;IACF;IACA,IAAI,IAAI,CAACoD,YAAY,CAAC,YAAY,CAAC,EACjC,IAAI,CAAC4E,SAAS,GAAG,IAAI;IACvB,IAAI,CAAC6B,UAAU,GAAG,IAAI;IACtB,IAAIxS,QAAQ,CAACY,iBAAiB,CAAC7B,MAAM,EAAE;MACrCpB,QAAQ,CAAC,MAAM;QACbD,MAAM,CAAEyB,OAAO,IAAK;UAClB,IAAI,CAACsT,aAAa,GAAG7U,QAAQ,CAAC,CAAC;UAC/B,KAAK,MAAMwV,eAAe,IAAIpT,QAAQ,CAACY,iBAAiB,EAAE;YACxDjD,QAAQ,CAAC,MAAM;cACb,MAAM0V,kBAAkB,GAAGD,eAAe,CAAC,IAAI,CAAC;cAChD,IAAIvV,YAAY,CAACwV,kBAAkB,CAAC,EAAE;gBACpC,IAAI,CAACvS,oBAAoB,CAACL,IAAI,CAAC4S,kBAAkB,CAAC;cACpD;YACF,CAAC,EAAE,IAAI,CAACZ,aAAa,CAAC;UACxB;UACA,IAAI,CAAC3R,oBAAoB,CAACL,IAAI,CAACtB,OAAO,CAAC;QACzC,CAAC,CAAC;MACJ,CAAC,EAAEa,QAAQ,CAACyL,MAAM,CAAC;IACrB;IACA,IAAI5O,OAAO,CAAC,IAAI,CAACqS,OAAO,CAAC,CAAC,EAAE;MAC1BzS,MAAM,CAAC,IAAI,CAACyS,OAAO,CAAC,EAAE,IAAI,CAAC;MAC3B,IAAI,CAACA,OAAO,CAAC,GAAG,IAAI;IACtB;IACA;EACF;EACAoE,oBAAoBA,CAAA,EAAG;IACrB,MAAMtT,QAAQ,GAAG,IAAI,CAACsQ,UAAU,EAAEtQ,QAAQ;IAC1C,IAAI,CAAC,IAAI,CAACwS,UAAU,IAAI,IAAI,CAAClD,UAAU,EACrC;IACF,IAAI,CAACkD,UAAU,GAAG,KAAK;IACvB,KAAK,MAAMe,QAAQ,IAAI,IAAI,CAACzS,oBAAoB,EAAE;MAChDnD,QAAQ,CAAC4V,QAAQ,EAAE,IAAI,CAACd,aAAa,CAAC;IACxC;IACA,IAAIzS,QAAQ,EAAEc,oBAAoB,CAAC/B,MAAM,EAAE;MACzC,KAAK,MAAMwU,QAAQ,IAAIvT,QAAQ,CAACc,oBAAoB,EAAE;QACpDnD,QAAQ,CAAC,MAAM4V,QAAQ,CAAC,IAAI,CAAC,EAAEvT,QAAQ,CAACyL,MAAM,CAAC;MACjD;IACF;IACA,IAAI,CAACgH,aAAa,GAAG,IAAI;IACzB,IAAI,CAAC,IAAI,CAACE,SAAS,IAAI,CAAC,IAAI,CAAChC,SAAS,EAAE;MACtC6C,qBAAqB,CAAC,MAAM;QAC1B,IAAI,CAAC,IAAI,CAAC9C,WAAW,EAAE;UACrB1Q,QAAQ,EAAEwC,QAAQ,CAAC,CAAC;UACpB,IAAI,CAAC8M,UAAU,GAAG,IAAI;QACxB;MACF,CAAC,CAAC;IACJ;EACF;EACA9D,eAAeA,CAACF,SAAS,EAAE;IACzB,MAAMtL,QAAQ,GAAGsL,SAAS,CAACtL,QAAQ;MAAEiT,IAAI,GAAG,IAAI,CAAC3S,WAAW;MAAE2P,GAAG,GAAGgD,IAAI,CAAC3C,UAAU,CAACvQ,EAAE;MAAE6B,IAAI,GAAGqR,IAAI,CAACpB,KAAK;IACzG,IAAI,IAAI,CAACvB,UAAU,EAAE;MACnBmD,OAAO,CAACC,IAAI,CAAE,wBAAuBzD,GAAG,CAACpG,OAAQ,mCAAkC,CAAC;IACtF;IACA,IAAI,IAAI,CAACyF,UAAU,EAAE;MACnBmE,OAAO,CAACC,IAAI,CAAE,yDAAwDzD,GAAG,CAACpG,OAAQ,IAAG,CAAC;IACxF;IACA,IAAI,IAAI,CAACyG,UAAU,IAAI,IAAI,CAAChB,UAAU,EACpC;IACF3R,QAAQ,CAAC,MAAM;MACb,IAAI,CAACgW,KAAK,GAAG3T,QAAQ,CAACsC,SAAS,GAAG2N,GAAG,CAAC2D,UAAU,GAAG,IAAI,CAACA,UAAU,IAAI,IAAI,CAACC,YAAY,CAACpW,SAAS,CAACwS,GAAG,CAAC2D,UAAU,CAAC,GAAG;QAAEE,IAAI,EAAE;MAAO,CAAC,GAAG7D,GAAG,CAAC2D,UAAU,CAAC,GAAGG,wBAAwB,CAAC,IAAI,CAAC,GAAG,IAAI;MAC9L,IAAI9D,GAAG,CAACzH,GAAG,IAAI,CAAC5G,IAAI,EAAEoH,QAAQ,EAAE;QAC9ByK,OAAO,CAACC,IAAI,CACT,yCAAwCzD,GAAG,CAACpG,OAAQ,6JACvD,CAAC;MACH;MACA,IAAI,CAACxF,SAAS,IAAI4L,GAAG,CAAC2D,UAAU,IAAI3D,GAAG,CAACzH,GAAG,IAAI5G,IAAI,EAAEoH,QAAQ,EAAE;QAC7DpH,IAAI,CAACoH,QAAQ,CAAC,IAAI,CAAC2K,KAAK,EAAE1D,GAAG,CAACzH,GAAG,CAAC;MACpC;MACAxI,QAAQ,CAACC,GAAG,GAAG,IAAI;MACnB,IAAI,CAACqQ,UAAU,GAAGhF,SAAS;MAC3B,MAAM0I,UAAU,GAAGpD,qBAAqB,CAAC,IAAI,CAAC;MAC9C,KAAK,MAAMZ,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAAC4G,UAAU,CAAC,EAAE;QAC1ChU,QAAQ,CAACG,MAAM,CAAC6P,IAAI,CAAC,CAACvM,GAAG,CAACuQ,UAAU,CAAChE,IAAI,CAAC,CAAC;MAC7C;MACA,IAAI,IAAI,CAACiC,cAAc,EAAEgC,IAAI,EAAE;QAC7B,KAAK,MAAMC,MAAM,IAAI,IAAI,CAACjC,cAAc,CAACjM,MAAM,CAAC,CAAC,EAC/CkO,MAAM,CAAC,CAAC;MACZ;MACA,IAAI,CAACjC,cAAc,GAAG,IAAI;MAC1B,KAAK,MAAMsB,QAAQ,IAAI,CAAC,GAAGvT,QAAQ,CAACQ,gBAAgB,EAAE,GAAG,IAAI,CAACA,gBAAgB,CAAC,EAAE;QAC/E7C,QAAQ,CAAC,MAAM4V,QAAQ,CAAC,IAAI,CAAC,EAAEvT,QAAQ,CAACyL,MAAM,CAAC;MACjD;MACAzL,QAAQ,CAACQ,gBAAgB,CAACzB,MAAM,GAAG,CAAC;MACpC,IAAI,CAACyB,gBAAgB,GAAG,IAAI;MAC5B,MAAM2T,MAAM,GAAGnU,QAAQ,CAACmB,MAAM;QAAEiT,OAAO,GAAGpU,QAAQ,CAACwB,OAAO;MAC1D,IAAI2S,MAAM,EAAE;QACV,KAAK,MAAMnE,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAAC+G,MAAM,CAAC,EAAE;UACtC,IAAItW,YAAY,CAACsW,MAAM,CAACnE,IAAI,CAAC,CAAC,EAAE;YAC9BlS,QAAQ,CAAC,MAAM3B,YAAY,CAAC,IAAI,EAAE6T,IAAI,EAAEmE,MAAM,CAACnE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;UAC1D,CAAC,MAAM;YACL7T,YAAY,CAAC,IAAI,EAAE6T,IAAI,EAAEmE,MAAM,CAACnE,IAAI,CAAC,CAAC;UACxC;QACF;MACF;MACA,IAAIoE,OAAO,EAAE;QACX,KAAK,MAAMpE,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAACgH,OAAO,CAAC,EAAE;UACvC,IAAIvW,YAAY,CAACuW,OAAO,CAACpE,IAAI,CAAC,CAAC,EAAE;YAC/BlS,QAAQ,CAAC,MAAMzB,QAAQ,CAAC,IAAI,EAAE2T,IAAI,EAAEoE,OAAO,CAACpE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;UACvD,CAAC,MAAM;YACL3T,QAAQ,CAAC,IAAI,EAAE2T,IAAI,EAAEoE,OAAO,CAACpE,IAAI,CAAC,CAAC;UACrC;QACF;MACF;MACA,IAAI,CAACjO,aAAa,CAAC,IAAIsS,KAAK,CAAC,UAAU,CAAC,CAAC;MACzC,IAAI,IAAI,CAACV,KAAK,IAAI/R,IAAI,IAAI5B,QAAQ,CAACsC,SAAS,EAAE;QAC5C,MAAMgS,OAAO,GAAGA,CAAA,KAAM1S,IAAI,CAACgD,MAAM,CAAC,IAAI,CAAC+O,KAAK,EAAE3T,QAAQ,CAACsC,SAAS,CAAC;QACjE,IAAI,IAAI,CAACyJ,YAAY,CAAC,MAAM,CAAC,IAAI,CAACkH,IAAI,CAAC3C,UAAU,CAACvQ,EAAE,CAACwU,SAAS,EAAE;UAC9DhQ,YAAY,CAAC+P,OAAO,EAAE;YAAE3P,MAAM,EAAE,IAAI,CAACgP;UAAM,CAAC,CAAC;QAC/C,CAAC,MAAM;UACLW,OAAO,CAAC,CAAC;QACX;MACF;MACA,IAAI,CAACpB,iBAAiB,CAAC,CAAC;IAC1B,CAAC,EAAElT,QAAQ,CAACyL,MAAM,CAAC;EACrB;EACA+I,SAASA,CAACjB,QAAQ,EAAE;IAClB,IAAI,CAAC,IAAI,CAACjD,UAAU,EAAE;MACpB,IAAI,CAAC6B,iBAAiB,CAAC,CAAC,kCAAkC,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;IACjF;IACA,IAAI,CAAC,IAAI,CAAC7B,UAAU,EAAEtQ,QAAQ,CAACuP,MAAM,EAAE;MACrC,MAAM0D,IAAI,GAAG,IAAI,CAAC3S,WAAW;MAC7B,MAAMuJ,OAAO,GAAGoJ,IAAI,CAAC3C,UAAU,CAACvQ,EAAE,CAAC8J,OAAO;MAC1C,MAAMlB,KAAK,CAAE,gBAAekB,OAAQ,kDAAiD,CAAC;IACxF;IACA,OAAOlM,QAAQ,CAAC,MAAM;MACpB,OAAOG,QAAQ,CAAC,MAAMyV,QAAQ,CAAC,IAAI,CAACjD,UAAU,CAACtQ,QAAQ,CAACuP,MAAM,CAAC,CAAC;IAClE,CAAC,EAAE,IAAI,CAACe,UAAU,CAACtQ,QAAQ,CAACyL,MAAM,CAAC;EACrC;EACAlL,QAAQA,CAACgT,QAAQ,EAAE;IACjB,IAAI,IAAI,CAACjD,UAAU,EAAE;MACnBiD,QAAQ,CAAC,IAAI,CAAC;MACd,OAAOvW,IAAI;IACb,CAAC,MAAM;MACL,IAAI,CAACwD,gBAAgB,CAAC0N,GAAG,CAACqF,QAAQ,CAAC;MACnC,OAAO,MAAM,IAAI,CAAC/S,gBAAgB,EAAE0R,MAAM,CAACqB,QAAQ,CAAC;IACtD;EACF;EACAkB,eAAeA,CAAClB,QAAQ,EAAE;IACxB,MAAMN,IAAI,GAAG,IAAI,CAAC3S,WAAW;IAC7B,IAAI2S,IAAI,CAACyB,iBAAiB,EACxB,KAAK,MAAMC,SAAS,IAAI1B,IAAI,CAACyB,iBAAiB,EAC5CnB,QAAQ,CAACoB,SAAS,CAAC;IACvB,IAAI,CAACC,gBAAgB,GAAGrB,QAAQ;EAClC;EACAhR,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC+Q,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAAChD,UAAU,EAAE/N,OAAO,CAAC,CAAC;IAC1B,IAAI,CAAC+N,UAAU,GAAG,IAAI;IACtB,IAAI,CAAChB,UAAU,GAAG,IAAI;EACxB;EACAvN,aAAaA,CAACD,KAAK,EAAE;IACnB,IAAI,IAAI,CAAC6Q,SAAS,EAAE;MAClB,MAAMM,IAAI,GAAG,IAAI,CAAC3S,WAAW;MAC7B,IAAI,CAAC2S,IAAI,CAACyB,iBAAiB,EACzBzB,IAAI,CAACyB,iBAAiB,GAAG,eAAgB,IAAI1G,GAAG,CAAC,CAAC;MACpD,IAAI,CAACiF,IAAI,CAACyB,iBAAiB,CAACpR,GAAG,CAACxB,KAAK,CAACxD,IAAI,CAAC,EAAE;QAC3C,IAAI,CAACsW,gBAAgB,GAAG9S,KAAK,CAACxD,IAAI,CAAC;QACnC2U,IAAI,CAACyB,iBAAiB,CAACxG,GAAG,CAACpM,KAAK,CAACxD,IAAI,CAAC;MACxC;IACF;IACA,OAAOJ,OAAO,CAAC,MAAM,KAAK,CAAC6D,aAAa,CAACD,KAAK,CAAC,CAAC;EAClD;EACA,MAAMqR,MAAMA,CAAA,EAAG;IACb,IAAI,IAAI,CAACT,aAAa,EACpB;IACF,IAAI,CAACA,aAAa,GAAG,IAAI;IACzB,MAAMxC,KAAK,CAAC,IAAI,CAAC;IACjB,IAAI,CAACwC,aAAa,GAAG,KAAK;EAC5B;EACAP,iBAAiBA,CAAC/S,IAAI,EAAE;IACtB;MACE,MAAM6T,IAAI,GAAG,IAAI,CAAC3S,WAAW;MAC7B,MAAMuJ,OAAO,GAAGoJ,IAAI,CAAC3C,UAAU,CAACvQ,EAAE,CAAC8J,OAAO;MAC1C,MAAMlB,KAAK,CACR;AACT;AACA,qCAAqCkB,OAAQ;AAC7C;AACA,CAAC,IAAI,IAAI,GAAGzK,IAAI,CAACiK,IAAI,CAAC,MAAM,CAAC,CAAC,GAAI;AAClC;AACA,CACM,CAAC;IACH;EACF;AACF,CAAC;AACDiJ,EAAE,GAAGpD,OAAO;AACZ,SAAS6E,wBAAwBA,CAAC9U,KAAK,EAAE;EACvC,IAAIA,KAAK,CAAC2G,UAAU,IAAIlJ,YAAY,CAACuC,KAAK,CAAC2G,UAAU,CAAC,IAAI3G,KAAK,CAAC2G,UAAU,CAACmF,SAAS,KAAK,aAAa,EAAE;IACtG,OAAO9L,KAAK,CAAC2G,UAAU;EACzB,CAAC,MAAM;IACL,MAAMgO,UAAU,GAAG/H,iBAAiB,CAAC,aAAa,CAAC;IACnD5M,KAAK,CAAC4V,OAAO,CAACjB,UAAU,CAAC;IACzB,OAAOA,UAAU;EACnB;AACF;AACA,IAAIkB,QAAQ,GAAG,eAAgB,IAAItR,GAAG,CAAC,CAAC;AACxC,SAASuR,mBAAmBA,CAACxL,UAAU,EAAE;EACvC,IAAIuL,QAAQ,CAACxR,GAAG,CAACiG,UAAU,CAAC,EAC1B,OAAOuL,QAAQ,CAACnR,GAAG,CAAC4F,UAAU,CAAC;EACjC,MAAMyL,SAAS,GAAGzL,UAAU,CAACC,QAAQ;EACrC,IAAID,UAAU,CAACC,QAAQ,EAAE;IACvB,MAAMtK,MAAM,GAAGrC,OAAO,CAACmY,SAAS,CAAC,GAAGA,SAAS,GAAGA,SAAS,GAAG,CAAC;IAC7D,IAAInY,OAAO,CAACqC,MAAM,CAAC,EAAE;MACnB,KAAK,MAAMqS,UAAU,IAAIrS,MAAM,EAAE;QAC/B0K,qBAAqB,CAACnG,GAAG,CAAC8N,UAAU,CAACxR,EAAE,CAAC8J,OAAO,EAAE0H,UAAU,CAAC;MAC9D;IACF;EACF;EACA,MAAMI,eAAe,SAASsD,mBAAmB,CAAC;IAChD,WAAW3E,UAAUA,CAAA,EAAG;MACtB,OAAO/G,UAAU;IACnB;EACF;EACAuL,QAAQ,CAACrR,GAAG,CAAC8F,UAAU,EAAEoI,eAAe,CAAC;EACzC,OAAOA,eAAe;AACxB;AACA,IAAIsD,mBAAmB,GAAG,MAAM;EAC9B3U,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACqQ,SAAS,GAAG,KAAK;IACtB,IAAI,CAACL,UAAU,GAAG,IAAI;IACtB,IAAI,CAAC4E,SAAS,GAAG,KAAK;IACtB,IAAI,CAAC1U,gBAAgB,GAAG,eAAgB,IAAIwN,GAAG,CAAC,CAAC;IACjD,IAAI,CAAC9M,UAAU,GAAG,IAAIiU,UAAU,CAAC,CAAC;IAClC,IAAI,CAAChM,KAAK,GAAG,IAAIiM,KAAK,CAAC,CAAC;IACxB,IAAI,CAACC,SAAS,GAAG,IAAIC,SAAS,CAAC,CAAC;EAClC;EACA,IAAIhK,SAASA,CAAA,EAAG;IACd,OAAO,IAAI,CAACgF,UAAU;EACxB;EACA,IAAIlQ,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACkQ,UAAU,EAAEtQ,QAAQ,CAACK,MAAM;EACzC;EACA,IAAIuS,KAAKA,CAAA,EAAG;IACV,OAAO,CAAC,CAAC;EACX;EACApH,eAAeA,CAACF,SAAS,EAAE;IACzB3N,QAAQ,CAAC,MAAM;MACb,IAAI,CAACxB,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC;MAC7B,IAAI,CAACA,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC;MAC7B,IAAI,IAAI,CAAC4P,YAAY,CAAC,OAAO,CAAC,EAAE;QAC9BwJ,cAAc,CAAC,IAAI,CAACF,SAAS,CAACG,MAAM,EAAE,IAAI,CAACtE,YAAY,CAAC,OAAO,CAAC,CAAC;MACnE;MACA,IAAI,IAAI,CAACnF,YAAY,CAAC,OAAO,CAAC,EAAE;QAC9B0J,cAAc,CAAC,IAAI,CAACtM,KAAK,CAACqM,MAAM,EAAE,IAAI,CAACtE,YAAY,CAAC,OAAO,CAAC,CAAC;MAC/D;MACA,MAAMlR,QAAQ,GAAGsL,SAAS,CAACtL,QAAQ;MACnCA,QAAQ,CAACC,GAAG,GAAG,IAAI;MACnB,IAAI,CAACqQ,UAAU,GAAGhF,SAAS;MAC3B,KAAK,MAAMiI,QAAQ,IAAI,CAAC,GAAGvT,QAAQ,CAACQ,gBAAgB,EAAE,GAAG,IAAI,CAACA,gBAAgB,CAAC,EAAE;QAC/E+S,QAAQ,CAAC,IAAI,CAAC;MAChB;MACA,IAAI,CAAC/S,gBAAgB,GAAG,IAAI;MAC5B,MAAM2T,MAAM,GAAGnU,QAAQ,CAACmB,MAAM;QAAEiT,OAAO,GAAGpU,QAAQ,CAACwB,OAAO;MAC1D,IAAI2S,MAAM,EAAE;QACV,KAAK,MAAMnE,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAAC+G,MAAM,CAAC,EACpChY,YAAY,CAAC,IAAI,EAAE6T,IAAI,EAAE/S,UAAU,CAACkX,MAAM,CAACnE,IAAI,CAAC,CAAC,CAAC;MACtD;MACA,IAAIoE,OAAO,EAAE;QACX,KAAK,MAAMpE,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAACgH,OAAO,CAAC,EACrC/X,QAAQ,CAAC,IAAI,EAAE2T,IAAI,EAAE/S,UAAU,CAACmX,OAAO,CAACpE,IAAI,CAAC,CAAC,CAAC;MACnD;MACA,IAAI,CAACkF,SAAS,GAAG,CAAC,CAAClV,QAAQ,CAACsC,SAAS;MACrC,IAAI,CAACoT,IAAI,GAAG1V,QAAQ,CAACsC,SAAS,GAAGtD,cAAc,CAACgB,QAAQ,CAACsC,SAAS,CAAC,CAAClD,IAAI,GAAG,EAAE;MAC7E,IAAI,IAAI,CAACiW,SAAS,CAACtW,MAAM,GAAG,CAAC,EAAE;QAC7B,IAAI,CAAC5C,YAAY,CAAC,OAAO,EAAE,IAAI,CAACkZ,SAAS,CAACtM,QAAQ,CAAC,CAAC,CAAC;MACvD;MACA,IAAI,IAAI,CAACI,KAAK,CAACpK,MAAM,GAAG,CAAC,EAAE;QACzB,IAAI,CAAC5C,YAAY,CAAC,OAAO,EAAE,IAAI,CAACgN,KAAK,CAACJ,QAAQ,CAAC,CAAC,CAAC;MACnD;IACF,CAAC,EAAEuC,SAAS,CAACtL,QAAQ,CAACyL,MAAM,CAAC;EAC/B;EACArJ,MAAMA,CAAA,EAAG;IACP,IAAI,OAAO,IAAI,CAACsT,IAAI,KAAK,QAAQ,EAAE;MACjC,MAAM/M,KAAK,CAAC,uDAAuD,CAAC;IACtE;IACA,MAAMyB,SAAS,GAAG,IAAI,CAACuL,eAAe,CAAC,CAAC;MAAE1F,GAAG,GAAG,IAAI,CAAC3P,WAAW,CAACgQ,UAAU,CAACvQ,EAAE;IAC9E,OAAO,IAAI,CAACmV,SAAS,IAAIjF,GAAG,CAAC2D,UAAU,IAAI3D,GAAG,CAACzH,GAAG,GAAGyH,GAAG,CAAC2D,UAAU,GAAI,yBAAwB,IAAI,CAACgC,iBAAiB,CAAC,CAAE,KAAIxL,SAAU,aAAY,GAAI,gBAAeA,SAAU,gBAAe,GAAGA,SAAS;EAC5M;EACAuL,eAAeA,CAAA,EAAG;IAChB,IAAI,OAAO,IAAI,CAACD,IAAI,KAAK,QAAQ,EAAE;MACjC,MAAM/M,KAAK,CAAC,gEAAgE,CAAC;IAC/E;IACA,MAAMsH,GAAG,GAAG,IAAI,CAAC3P,WAAW,CAACgQ,UAAU,CAACvQ,EAAE;MAAE8V,QAAQ,GAAG5F,GAAG,CAAC2D,UAAU,IAAI3D,GAAG,CAACzH,GAAG,GAAI,UAASyH,GAAG,CAACzH,GAAG,CAACpF,GAAG,CAAEsF,IAAI,IAAKA,IAAI,CAACvC,IAAI,CAAC,CAACkD,IAAI,CAAC,EAAE,CAAE,UAAS,GAAG,EAAE;IACrJ,OAAOwM,QAAQ,GAAG,IAAI,CAACH,IAAI;EAC7B;EACAE,iBAAiBA,CAAA,EAAG;IAClB,MAAM3F,GAAG,GAAG,IAAI,CAAC3P,WAAW,CAACgQ,UAAU,CAACvQ,EAAE;IAC1C,OAAOkQ,GAAG,CAAC2D,UAAU,GAAGnW,SAAS,CAACwS,GAAG,CAAC2D,UAAU,CAAC,GAAG,MAAM,GAAG3D,GAAG,CAAC2D,UAAU,CAACE,IAAI,GAAG,MAAM;EAC3F;EACA5C,YAAYA,CAAClB,IAAI,EAAE;IACjB,OAAO,IAAI,CAAC9O,UAAU,CAACgQ,YAAY,CAAClB,IAAI,CAAC;EAC3C;EACA7T,YAAYA,CAAC6T,IAAI,EAAE5R,KAAK,EAAE;IACxB,IAAI,CAAC8C,UAAU,CAAC/E,YAAY,CAAC6T,IAAI,EAAE5R,KAAK,CAAC;EAC3C;EACA2N,YAAYA,CAACiE,IAAI,EAAE;IACjB,OAAO,IAAI,CAAC9O,UAAU,CAAC6K,YAAY,CAACiE,IAAI,CAAC;EAC3C;EACA8F,eAAeA,CAAC9F,IAAI,EAAE;IACpB,OAAO,IAAI,CAAC9O,UAAU,CAAC4U,eAAe,CAAC9F,IAAI,CAAC;EAC9C;EACAjO,aAAaA,CAAA,EAAG;IACd,OAAO,KAAK;EACd;EACA0S,eAAeA,CAAA,EAAG,CAClB;EACAtG,gBAAgBA,CAAA,EAAG,CACnB;EACA4H,mBAAmBA,CAAA,EAAG,CACtB;EACAvB,SAASA,CAAA,EAAG;IACV,OAAOxX,IAAI;EACb;EACAuD,QAAQA,CAACgT,QAAQ,EAAE;IACjB,IAAI,IAAI,CAACjD,UAAU,EAAE;MACnBiD,QAAQ,CAAC,IAAI,CAAC;MACd,OAAOvW,IAAI;IACb,CAAC,MAAM;MACL,IAAI,CAACwD,gBAAgB,CAAC0N,GAAG,CAACqF,QAAQ,CAAC;MACnC,OAAO,MAAM,IAAI,CAAC/S,gBAAgB,EAAE0R,MAAM,CAACqB,QAAQ,CAAC;IACtD;EACF;EACAhR,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC+N,UAAU,EAAE/N,OAAO,CAAC,CAAC;EAC5B;AACF,CAAC;AACD,IAAI4S,UAAU,GAAG,MAAM;EACrB7U,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC0V,OAAO,GAAG,eAAgB,IAAIxS,GAAG,CAAC,CAAC;EAC1C;EACA,IAAIzE,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACiX,OAAO,CAAC/B,IAAI;EAC1B;EACA,IAAIuB,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACQ,OAAO;EACrB;EACA9E,YAAYA,CAAClB,IAAI,EAAE;IACjB,OAAO,IAAI,CAACgG,OAAO,CAACrS,GAAG,CAACqM,IAAI,CAAC,IAAI,IAAI;EACvC;EACAjE,YAAYA,CAACiE,IAAI,EAAE;IACjB,OAAO,IAAI,CAACgG,OAAO,CAAC1S,GAAG,CAAC0M,IAAI,CAAC;EAC/B;EACA7T,YAAYA,CAAC6T,IAAI,EAAE5R,KAAK,EAAE;IACxB,IAAI,CAAC4X,OAAO,CAACvS,GAAG,CAACuM,IAAI,EAAE5R,KAAK,GAAG,EAAE,CAAC;EACpC;EACA0X,eAAeA,CAAC9F,IAAI,EAAE;IACpB,IAAI,CAACgG,OAAO,CAAC9D,MAAM,CAAClC,IAAI,CAAC;EAC3B;EACAjH,QAAQA,CAAA,EAAG;IACT,IAAI,IAAI,CAACiN,OAAO,CAAC/B,IAAI,KAAK,CAAC,EACzB,OAAO,EAAE;IACX,IAAI/U,MAAM,GAAG,EAAE;IACf,KAAK,MAAM,CAAC8Q,IAAI,EAAE5R,KAAK,CAAC,IAAI,IAAI,CAAC4X,OAAO,EAAE;MACxC9W,MAAM,IAAK,IAAG8Q,IAAK,KAAI7R,MAAM,CAACC,KAAK,EAAE,IAAI,CAAE,GAAE;IAC/C;IACA,OAAOc,MAAM;EACf;AACF,CAAC;AACD,IAAIkW,KAAK,GAAG,MAAM;EAChB9U,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC0V,OAAO,GAAG,eAAgB,IAAIxS,GAAG,CAAC,CAAC;EAC1C;EACA,IAAIzE,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACiX,OAAO,CAAC/B,IAAI;EAC1B;EACA,IAAIuB,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACQ,OAAO;EACrB;EACAC,gBAAgBA,CAAC5I,KAAK,EAAE;IACtB,OAAO,IAAI,CAAC2I,OAAO,CAACrS,GAAG,CAAC0J,KAAK,CAAC,IAAI,EAAE;EACtC;EACA6I,WAAWA,CAAC7I,KAAK,EAAEjP,KAAK,EAAE;IACxB,IAAI,CAAC4X,OAAO,CAACvS,GAAG,CAAC4J,KAAK,EAAEjP,KAAK,IAAI,EAAE,CAAC;EACtC;EACA+X,cAAcA,CAAC9I,KAAK,EAAE;IACpB,MAAMjP,KAAK,GAAG,IAAI,CAAC4X,OAAO,CAACrS,GAAG,CAAC0J,KAAK,CAAC;IACrC,IAAI,CAAC2I,OAAO,CAAC9D,MAAM,CAAC7E,KAAK,CAAC;IAC1B,OAAOjP,KAAK,IAAI,EAAE;EACpB;EACA2K,QAAQA,CAAA,EAAG;IACT,IAAI,IAAI,CAACiN,OAAO,CAAC/B,IAAI,KAAK,CAAC,EACzB,OAAO,EAAE;IACX,IAAI/U,MAAM,GAAG,EAAE;IACf,KAAK,MAAM,CAAC8Q,IAAI,EAAE5R,KAAK,CAAC,IAAI,IAAI,CAAC4X,OAAO,EAAE;MACxC9W,MAAM,IAAK,GAAE8Q,IAAK,KAAI5R,KAAM,GAAE;IAChC;IACA,OAAOc,MAAM;EACf;AACF,CAAC;AACD,IAAIoW,SAAS,GAAG,MAAM;EACpBhV,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC0V,OAAO,GAAG,eAAgB,IAAIhI,GAAG,CAAC,CAAC;EAC1C;EACA,IAAIjP,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACiX,OAAO,CAAC/B,IAAI;EAC1B;EACA,IAAIuB,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACQ,OAAO;EACrB;EACA9H,GAAGA,CAAC,GAAGsH,MAAM,EAAE;IACb,KAAK,MAAMY,KAAK,IAAIZ,MAAM,EAAE;MAC1B,IAAI,CAACQ,OAAO,CAAC9H,GAAG,CAACkI,KAAK,CAAC;IACzB;EACF;EACAC,QAAQA,CAACD,KAAK,EAAE;IACd,OAAO,IAAI,CAACJ,OAAO,CAAC1S,GAAG,CAAC8S,KAAK,CAAC;EAChC;EACA7S,MAAMA,CAAC6S,KAAK,EAAE;IACZ,IAAI,CAACJ,OAAO,CAAC9D,MAAM,CAACkE,KAAK,CAAC;EAC5B;EACA/P,OAAOA,CAAC+P,KAAK,EAAEE,QAAQ,EAAE;IACvB,IAAI,CAAC,IAAI,CAACN,OAAO,CAAC1S,GAAG,CAAC8S,KAAK,CAAC,EAC1B,OAAO,KAAK;IACd,IAAI,CAACJ,OAAO,CAAC9D,MAAM,CAACkE,KAAK,CAAC;IAC1B,IAAI,CAACJ,OAAO,CAAC9H,GAAG,CAACoI,QAAQ,CAAC;IAC1B,OAAO,IAAI;EACb;EACAC,MAAMA,CAACH,KAAK,EAAEI,KAAK,EAAE;IACnB,IAAIA,KAAK,KAAK,IAAI,KAAK,IAAI,CAACR,OAAO,CAAC1S,GAAG,CAAC8S,KAAK,CAAC,IAAII,KAAK,KAAK,KAAK,CAAC,EAAE;MAClE,IAAI,CAACR,OAAO,CAAC9D,MAAM,CAACkE,KAAK,CAAC;MAC1B,OAAO,KAAK;IACd,CAAC,MAAM;MACL,IAAI,CAACJ,OAAO,CAAC9H,GAAG,CAACkI,KAAK,CAAC;MACvB,OAAO,IAAI;IACb;EACF;EACArN,QAAQA,CAAA,EAAG;IACT,OAAO+J,KAAK,CAAC9B,IAAI,CAAC,IAAI,CAACgF,OAAO,CAAC,CAAC3M,IAAI,CAAC,GAAG,CAAC;EAC3C;AACF,CAAC;;AAED;AACA,IAAIoN,QAAQ,GAAGlX,MAAM,CAAC,UAAW,CAAC;AAClC,SAASmX,UAAUA,CAACC,UAAU,EAAE;EAC9B,OAAO;IAAE,CAACF,QAAQ,GAAG,IAAI;IAAE,GAAGE;EAAW,CAAC;AAC5C;;AAEA;AACA,SAASC,aAAaA,CAACC,WAAW,EAAE;EAClC,IAAI,OAAO,IAAIA,WAAW,EAAE;IAC1B,MAAMxL,KAAK,GAAGwL,WAAW,CAACxL,KAAK;IAC/B,KAAK,MAAM2E,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAAC/B,KAAK,CAAC,EAAE;MACrC,MAAM4E,GAAG,GAAG5E,KAAK,CAAC2E,IAAI,CAAC,GAAGyG,QAAQ,CAAC,GAAGpL,KAAK,CAAC2E,IAAI,CAAC,GAAG;QAAE,CAACyG,QAAQ,GAAG,IAAI;QAAErY,KAAK,EAAEiN,KAAK,CAAC2E,IAAI;MAAE,CAAC;MAC5F,IAAIC,GAAG,CAACwB,SAAS,KAAK,KAAK,IAAI,CAACxB,GAAG,CAAC3R,IAAI,EACtC2R,GAAG,CAAC3R,IAAI,GAAGwY,kBAAkB,CAAC7G,GAAG,CAAC7R,KAAK,CAAC;MAC1CiN,KAAK,CAAC2E,IAAI,CAAC,GAAGC,GAAG;IACnB;EACF;EACA,OAAO4G,WAAW;AACpB;AACA,IAAIE,MAAM,GAAG;EACX/F,IAAI,EAAGgG,CAAC,IAAKA,CAAC,KAAK,IAAI,GAAG,EAAE,GAAGA,CAAC,GAAG;AACrC,CAAC;AACD,IAAIC,MAAM,GAAG;EACXjG,IAAI,EAAGgG,CAAC,IAAKA,CAAC,KAAK,IAAI,GAAG,CAAC,GAAGE,MAAM,CAACF,CAAC;AACxC,CAAC;AACD,IAAIG,OAAO,GAAG;EACZnG,IAAI,EAAGgG,CAAC,IAAKA,CAAC,KAAK,IAAI;EACvBI,EAAE,EAAGJ,CAAC,IAAKA,CAAC,GAAG,EAAE,GAAG;AACtB,CAAC;AACD,IAAIK,QAAQ,GAAG;EACbrG,IAAI,EAAE,KAAK;EACXoG,EAAE,EAAEA,CAAA,KAAM;AACZ,CAAC;AACD,IAAIE,KAAK,GAAG;EACVtG,IAAI,EAAGgG,CAAC,IAAKA,CAAC,KAAK,IAAI,GAAG,EAAE,GAAGO,IAAI,CAACC,KAAK,CAACR,CAAC,CAAC;EAC5CI,EAAE,EAAGJ,CAAC,IAAKO,IAAI,CAACE,SAAS,CAACT,CAAC;AAC7B,CAAC;AACD,IAAIU,MAAM,GAAG;EACX1G,IAAI,EAAGgG,CAAC,IAAKA,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC,GAAGO,IAAI,CAACC,KAAK,CAACR,CAAC,CAAC;EAC5CI,EAAE,EAAGJ,CAAC,IAAKO,IAAI,CAACE,SAAS,CAACT,CAAC;AAC7B,CAAC;AACD,SAASF,kBAAkBA,CAAC1Y,KAAK,EAAE;EACjC,IAAIA,KAAK,KAAK,IAAI,EAChB,OAAO2Y,MAAM;EACf,QAAQ,OAAO3Y,KAAK;IAClB,KAAK,WAAW;MACd,OAAO2Y,MAAM;IACf,KAAK,QAAQ;MACX,OAAOA,MAAM;IACf,KAAK,SAAS;MACZ,OAAOI,OAAO;IAChB,KAAK,QAAQ;MACX,OAAOF,MAAM;IACf,KAAK,UAAU;MACb,OAAOI,QAAQ;IACjB,KAAK,QAAQ;MACX,OAAOxa,OAAO,CAACuB,KAAK,CAAC,GAAGkZ,KAAK,GAAGI,MAAM;IACxC;MACE,OAAOX,MAAM;EACjB;AACF;;AAEA;AACA,SAASY,IAAIA,CAAChT,MAAM,EAAEiT,WAAW,EAAEC,UAAU,EAAE;EAC7C,IAAI,CAAClT,MAAM,CAACwK,KAAK,CAAC,EAChBxK,MAAM,CAACwK,KAAK,CAAC,GAAG,eAAgB,IAAInB,GAAG,CAAC,CAAC;EAC3CrJ,MAAM,CAACwK,KAAK,CAAC,CAACjB,GAAG,CAAC0J,WAAW,CAAC;AAChC;AACA,SAASE,MAAMA,CAACnT,MAAM,EAAEiT,WAAW,EAAEC,UAAU,EAAE;EAC/C,IAAI,CAAClT,MAAM,CAACyK,OAAO,CAAC,EAClBzK,MAAM,CAACyK,OAAO,CAAC,GAAG,eAAgB,IAAIpB,GAAG,CAAC,CAAC;EAC7CrJ,MAAM,CAACyK,OAAO,CAAC,CAAClB,GAAG,CAAC0J,WAAW,CAAC;AAClC;;AAEA;AACA,SAASG,MAAMA,CAAC5N,QAAQ,EAAE,GAAG6N,KAAK,EAAE;EAClC,IAAI9Y,MAAM,GAAG,EAAE;EACf,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwK,QAAQ,CAACpL,MAAM,EAAEY,CAAC,EAAE,EAAE;IACxCT,MAAM,IAAIiL,QAAQ,CAACxK,CAAC,CAAC;IACrBT,MAAM,IAAIG,OAAO,CAAClB,MAAM,CAAC6Z,KAAK,CAACrY,CAAC,CAAC,CAAC,CAAC;EACrC;EACA,OAAO;IAAE,CAACL,YAAY,GAAGJ;EAAO,CAAC;AACnC;AACA,SAAS+Y,iBAAiBA,CAACpO,OAAO,EAAEwB,KAAK,EAAE6M,OAAO,EAAE;EAClD,MAAM3O,UAAU,GAAGK,qBAAqB,CAACjG,GAAG,CAACkG,OAAO,CAAC;EACrD,IAAI,CAACN,UAAU,EAAE;IACf,MAAMZ,KAAK,CAAE,6CAA4CkB,OAAQ,EAAC,CAAC;EACrE;EACA,MAAMuB,IAAI,GAAG,KAAK2J,mBAAmB,CAACxL,UAAU,CAAC,EAAE,CAAC;EACpD,IAAI2O,OAAO,IAAIA,OAAO,CAACnZ,MAAM,GAAG,CAAC,EAAE;IACjC,MAAMoZ,MAAM,GAAGC,gBAAgB,CAACF,OAAO,CAAC;IACxC,KAAK,MAAM,CAACG,GAAG,EAAEja,KAAK,CAAC,IAAI+Z,MAAM,CAACjX,UAAU,EAAE;MAC5CkK,IAAI,CAACjP,YAAY,CAACkc,GAAG,EAAEja,KAAK,CAAC;IAC/B;IACA,KAAK,MAAMgY,KAAK,IAAI+B,MAAM,CAAC9C,SAAS,EAAE;MACpCjK,IAAI,CAACiK,SAAS,CAACnH,GAAG,CAACkI,KAAK,CAAC;IAC3B;IACA,KAAK,MAAM,CAACiC,GAAG,EAAEja,KAAK,CAAC,IAAI+Z,MAAM,CAAC5W,MAAM,EAAE;MACxC6J,IAAI,CAACjC,KAAK,CAAC+M,WAAW,CAACmC,GAAG,EAAEja,KAAK,CAAC;IACpC;EACF;EACA,MAAMkN,SAAS,GAAGC,eAAe,CAAChC,UAAU,EAAE;IAAE8B;EAAM,CAAC,CAAC;EACxDD,IAAI,CAACI,eAAe,CAACF,SAAS,CAAC;EAC/B,MAAMgN,QAAQ,GAAG,CAACjN,KAAK,EAAEjB,SAAS,IAAIiB,KAAK,EAAEkN,SAAS,GAAGlb,MAAM,CAAC,MAAMgO,KAAK,CAACkN,SAAS,CAAC,CAAC,EAAEjN,SAAS,CAACtL,QAAQ,CAACyL,MAAM,CAAC,GAAG,EAAE;EACxH,OAAO,CACLL,IAAI,CAAClK,UAAU,GAAG,GAAG,EACrBtB,UAAU,CAAC,CAACyL,KAAK,EAAEjB,SAAS,GAAGgB,IAAI,CAAChJ,MAAM,CAAC,CAAC,GAAGiJ,KAAK,CAACjB,SAAS,CAAC,EAC/D,GAAGkO,QAAQ,CACZ;AACH;AACA,SAASE,QAAQA,CAACxI,IAAI,EAAE5R,KAAK,EAAE;EAC7B,MAAM6S,SAAS,GAAGwH,WAAW,CAACra,KAAK,CAAC;EACpC,OAAOtB,QAAQ,CAACmU,SAAS,CAAC,GAAI,IAAGjB,IAAK,KAAI7R,MAAM,CAAC8S,SAAS,EAAE,IAAI,CAAE,GAAE,GAAG,EAAE;AAC3E;AACA,SAASwH,WAAWA,CAACra,KAAK,EAAE;EAC1B,IAAIxB,UAAU,CAACwB,KAAK,CAAC,EACnB,OAAOqa,WAAW,CAACra,KAAK,CAAC,CAAC,CAAC;EAC7B,IAAI,CAACA,KAAK,IAAIA,KAAK,KAAK,EAAE,IAAIA,KAAK,KAAK,CAAC,EAAE;IACzC,OAAO,IAAI;EACb,CAAC,MAAM;IACL,OAAOA,KAAK,GAAG,EAAE;EACnB;AACF;AACA,SAASsa,UAAUA,CAACC,IAAI,EAAEnD,MAAM,EAAE;EAChC,IAAIoD,SAAS,GAAG3b,UAAU,CAAC0b,IAAI,CAAC;IAAEzZ,MAAM,GAAGpC,QAAQ,CAAC8b,SAAS,CAAC,GAAGA,SAAS,GAAG,EAAE;EAC/E,IAAIpD,MAAM,IAAIpU,MAAM,CAACgM,IAAI,CAACoI,MAAM,CAAC,CAACzW,MAAM,GAAG,CAAC,EAAE;IAC5C,MAAMsW,SAAS,GAAG,eAAgB,IAAIrH,GAAG,CAAC,CAAC;IAC3CuH,cAAc,CAACF,SAAS,EAAEnW,MAAM,CAAC;IACjC2Z,cAAc,CAACxD,SAAS,EAAEG,MAAM,CAAC;IACjCtW,MAAM,GAAG4T,KAAK,CAAC9B,IAAI,CAACqE,SAAS,CAAC,CAAChM,IAAI,CAAC,GAAG,CAAC;EAC1C;EACAnK,MAAM,GAAGA,MAAM,CAAC4Z,IAAI,CAAC,CAAC;EACtB,OAAO5Z,MAAM,CAACH,MAAM,GAAI,WAAUZ,MAAM,CAACe,MAAM,EAAE,IAAI,CAAE,GAAE,GAAG,EAAE;AAChE;AACA,IAAI6Z,YAAY,GAAG,KAAK;AACxB,SAASxD,cAAcA,CAACC,MAAM,EAAEvE,SAAS,EAAE;EACzC,MAAM+H,OAAO,GAAG/H,SAAS,CAAC6H,IAAI,CAAC,CAAC,CAAC1H,KAAK,CAAC2H,YAAY,CAAC;EACpD,KAAK,MAAM3C,KAAK,IAAI4C,OAAO,EACzBxD,MAAM,CAACtH,GAAG,CAACkI,KAAK,CAAC;AACrB;AACA,SAASyC,cAAcA,CAACxD,SAAS,EAAEG,MAAM,EAAE;EACzC,KAAK,MAAMxF,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAACoI,MAAM,CAAC,EAAE;IACtC,IAAIvY,UAAU,CAACuY,MAAM,CAACxF,IAAI,CAAC,CAAC,EAAE;MAC5BqF,SAAS,CAACnH,GAAG,CAAC8B,IAAI,CAAC;IACrB,CAAC,MAAM;MACLqF,SAAS,CAACnD,MAAM,CAAClC,IAAI,CAAC;IACxB;EACF;AACF;AACA,SAASiJ,SAASA,CAACN,IAAI,EAAEnD,MAAM,EAAE;EAC/B,IAAIoD,SAAS,GAAG3b,UAAU,CAAC0b,IAAI,CAAC;IAAEzZ,MAAM,GAAGpC,QAAQ,CAAC8b,SAAS,CAAC,GAAGrc,qBAAqB,CAACqc,SAAS,CAAC,GAAG,EAAE;EACtG,IAAIxX,MAAM,CAACgM,IAAI,CAACoI,MAAM,CAAC,CAACzW,MAAM,GAAG,CAAC,EAAE;IAClC,MAAMma,QAAQ,GAAG,eAAgB,IAAI1V,GAAG,CAAC,CAAC;IAC1CiS,cAAc,CAACyD,QAAQ,EAAEha,MAAM,CAAC;IAChCia,aAAa,CAACD,QAAQ,EAAE1D,MAAM,CAAC;IAC/BtW,MAAM,GAAG,EAAE;IACX,KAAK,MAAM,CAAC8Q,IAAI,EAAE5R,KAAK,CAAC,IAAI8a,QAAQ,EAClCha,MAAM,IAAK,GAAE8Q,IAAK,KAAI5R,KAAM,GAAE;EAClC;EACAc,MAAM,GAAGA,MAAM,CAAC4Z,IAAI,CAAC,CAAC;EACtB,OAAO5Z,MAAM,CAACH,MAAM,GAAI,WAAUZ,MAAM,CAACe,MAAM,EAAE,IAAI,CAAE,GAAE,GAAGA,MAAM;AACpE;AACA,IAAIka,YAAY,GAAG,SAAS;AAC5B,IAAIC,iBAAiB,GAAG,SAAS;AACjC,SAAS5D,cAAcA,CAACD,MAAM,EAAEvE,SAAS,EAAE;EACzC,MAAM1P,MAAM,GAAG0P,SAAS,CAAC6H,IAAI,CAAC,CAAC,CAAC1H,KAAK,CAACiI,iBAAiB,CAAC;EACxD,KAAK,IAAI1Z,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4B,MAAM,CAACxC,MAAM,EAAEY,CAAC,EAAE,EAAE;IACtC,IAAI4B,MAAM,CAAC5B,CAAC,CAAC,KAAK,EAAE,EAClB;IACF,MAAM,CAACqQ,IAAI,EAAE5R,KAAK,CAAC,GAAGmD,MAAM,CAAC5B,CAAC,CAAC,CAACyR,KAAK,CAACgI,YAAY,CAAC;IACnD5D,MAAM,CAAC/R,GAAG,CAACuM,IAAI,EAAE5R,KAAK,CAAC;EACzB;AACF;AACA,SAAS+a,aAAaA,CAAC3D,MAAM,EAAEjU,MAAM,EAAE;EACrC,KAAK,MAAMyO,IAAI,IAAI5O,MAAM,CAACgM,IAAI,CAAC7L,MAAM,CAAC,EAAE;IACtC,MAAMnD,KAAK,GAAGnB,UAAU,CAACsE,MAAM,CAACyO,IAAI,CAAC,CAAC;IACtC,IAAI,CAAC5R,KAAK,IAAIA,KAAK,KAAK,CAAC,EAAE;MACzBoX,MAAM,CAACtD,MAAM,CAAClC,IAAI,CAAC;IACrB,CAAC,MAAM;MACLwF,MAAM,CAAC/R,GAAG,CAACuM,IAAI,EAAE5R,KAAK,GAAG,EAAE,CAAC;IAC9B;EACF;AACF;AACA,IAAIkb,UAAU,GAAG,OAAO;AACxB,SAASlB,gBAAgBA,CAACF,OAAO,EAAE;EACjC,IAAIhX,UAAU,GAAG,eAAgB,IAAIsC,GAAG,CAAC,CAAC;IAAE6R,SAAS,GAAG,eAAgB,IAAIrH,GAAG,CAAC,CAAC;IAAEzM,MAAM,GAAG,eAAgB,IAAIiC,GAAG,CAAC,CAAC;EACrH,KAAK,IAAI7D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuY,OAAO,CAACnZ,MAAM,EAAEY,CAAC,EAAE,EAAE;IACvC,MAAM;MAAE4Z,OAAO;MAAEC,OAAO;MAAEC,KAAK,EAAEC,SAAS;MAAEvQ,KAAK,EAAEwQ,SAAS;MAAE,GAAGnI;IAAM,CAAC,GAAG0G,OAAO,CAACvY,CAAC,CAAC;IACrF,MAAMia,SAAS,GAAGxY,MAAM,CAACgM,IAAI,CAACoE,KAAK,CAAC;IACpC,KAAK,IAAIqI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,SAAS,CAAC7a,MAAM,EAAE8a,CAAC,EAAE,EAAE;MACzC,MAAMnI,QAAQ,GAAGkI,SAAS,CAACC,CAAC,CAAC;MAC7B,IAAI,CAACP,UAAU,CAACQ,IAAI,CAACpI,QAAQ,CAAC,EAAE;QAC9B,MAAMT,SAAS,GAAGwH,WAAW,CAACjH,KAAK,CAACE,QAAQ,CAAC,CAAC;QAC9C,IAAI5U,QAAQ,CAACmU,SAAS,CAAC,EAAE;UACvB/P,UAAU,CAACuC,GAAG,CAACiO,QAAQ,EAAET,SAAS,CAAC;QACrC,CAAC,MAAM;UACL/P,UAAU,CAACgR,MAAM,CAACR,QAAQ,CAAC;QAC7B;MACF;IACF;IACA,IAAI,OAAO,IAAIwG,OAAO,CAACvY,CAAC,CAAC,EAAE;MACzB,MAAMgZ,IAAI,GAAG1b,UAAU,CAACyc,SAAS,CAAC;MAClC,IAAIlc,MAAM,CAACmb,IAAI,CAAC,IAAIA,IAAI,KAAK,KAAK,EAAE;QAClCtD,SAAS,CAAC0E,KAAK,CAAC,CAAC;MACnB,CAAC,MAAM,IAAIjd,QAAQ,CAAC6b,IAAI,CAAC,IAAIA,IAAI,CAAC5Z,MAAM,EAAE;QACxCwW,cAAc,CAACF,SAAS,EAAEsD,IAAI,GAAG,EAAE,CAAC;MACtC;IACF;IACA,IAAIY,OAAO,EACTV,cAAc,CAACxD,SAAS,EAAEkE,OAAO,CAAC;IACpC,IAAI,OAAO,IAAIrB,OAAO,CAACvY,CAAC,CAAC,EAAE;MACzB,MAAMgZ,IAAI,GAAG1b,UAAU,CAAC0c,SAAS,CAAC;MAClC,IAAInc,MAAM,CAACmb,IAAI,CAAC,IAAIA,IAAI,KAAK,KAAK,EAAE;QAClCpX,MAAM,CAACwY,KAAK,CAAC,CAAC;MAChB,CAAC,MAAM,IAAIjd,QAAQ,CAAC6b,IAAI,CAAC,IAAIA,IAAI,CAAC5Z,MAAM,EAAE;QACxC0W,cAAc,CAAClU,MAAM,EAAEoX,IAAI,CAAC;MAC9B;IACF;IACA,IAAIa,OAAO,EACTL,aAAa,CAAC5X,MAAM,EAAEiY,OAAO,CAAC;EAClC;EACA,OAAO;IAAEtY,UAAU;IAAEmU,SAAS;IAAE9T;EAAO,CAAC;AAC1C;AACA,SAASyY,UAAUA,CAAC9B,OAAO,EAAE;EAC3B,MAAM;IAAEhX,UAAU;IAAEmU,SAAS;IAAE9T;EAAO,CAAC,GAAG6W,gBAAgB,CAACF,OAAO,CAAC;EACnE,IAAIhZ,MAAM,GAAG,EAAE;EACf,IAAImW,SAAS,CAACpB,IAAI,GAAG,CAAC,EAAE;IACtB,IAAIgG,MAAM,GAAGnH,KAAK,CAAC9B,IAAI,CAACqE,SAAS,CAAC,CAAChM,IAAI,CAAC,GAAG,CAAC;IAC5CnK,MAAM,IAAK,UAASf,MAAM,CAAC8b,MAAM,CAACnB,IAAI,CAAC,CAAC,EAAE,IAAI,CAAE,GAAE;EACpD;EACA,KAAK,MAAM,CAAC9I,IAAI,EAAE5R,KAAK,CAAC,IAAI8C,UAAU,EAAE;IACtChC,MAAM,IAAK,IAAG8Q,IAAK,KAAI7R,MAAM,CAACC,KAAK,EAAE,IAAI,CAAE,GAAE;EAC/C;EACA,IAAImD,MAAM,CAAC0S,IAAI,GAAG,CAAC,EAAE;IACnB,IAAIzS,OAAO,GAAG,EAAE;IAChB,KAAK,MAAM,CAACwO,IAAI,EAAE5R,KAAK,CAAC,IAAImD,MAAM,EAChCC,OAAO,IAAK,GAAEwO,IAAK,KAAI5R,KAAM,GAAE;IACjCc,MAAM,IAAK,WAAUf,MAAM,CAACqD,OAAO,CAACsX,IAAI,CAAC,CAAC,EAAE,IAAI,CAAE,GAAE;EACtD;EACA,OAAO5Z,MAAM,CAAC4Z,IAAI,CAAC,CAAC;AACtB;AACA,SAASoB,cAAcA,CAAC9b,KAAK,EAAE;EAC7B,OAAOwB,UAAU,CAACP,OAAO,CAACjB,KAAK,CAAC,CAAC;AACnC;AACA,IAAI+b,UAAU,GAAG9c,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS2H,UAAU,EAAE8G,gCAAgC,EAAE0M,QAAQ,IAAIxL,OAAO,EAAEA,OAAO,IAAIwL,QAAQ,EAAElM,WAAW,EAAEW,QAAQ,EAAEyL,UAAU,EAAEhN,QAAQ,EAAEqD,WAAW,EAAE1C,mBAAmB,EAAER,iBAAiB,EAAEvB,kBAAkB,EAAEJ,kBAAkB,EAAEK,gBAAgB,EAAE0N,iBAAiB,EAAErK,kBAAkB,EAAEf,YAAY,EAAEiC,SAAS,EAAE5D,YAAY,EAAEgP,cAAc,EAAElO,SAAS,EAAEC,mBAAmB,EAAEG,wBAAwB,EAAED,cAAc,EAAEsB,SAAS,EAAEH,cAAc,EAAE8K,gBAAgB,EAAE3N,eAAe,EAAEG,gBAAgB,EAAEgE,OAAO,EAAEpC,MAAM,EAAE2N,UAAU,IAAItL,SAAS,EAAEA,SAAS,IAAIsL,UAAU,EAAEhP,uBAAuB,EAAE6O,UAAU,IAAI7M,SAAS,EAAEA,SAAS,IAAI6M,UAAU,EAAEjC,MAAM,EAAE7K,QAAQ,EAAE+L,SAAS,EAAE3B,KAAK,EAAEH,OAAO,EAAEhV,SAAS,EAAErC,mBAAmB,EAAEuP,iBAAiB,EAAEgI,QAAQ,EAAEJ,MAAM,EAAES,MAAM,EAAEjB,QAAQ,EAAEnX,YAAY,EAAEyX,MAAM,EAAE/N,QAAQ,EAAEuC,eAAe,EAAEtB,iBAAiB,EAAE8K,mBAAmB,EAAEvM,GAAG,EAAEoO,aAAa,EAAEF,UAAU,EAAEpS,OAAO,EAAE0K,WAAW,EAAE3K,SAAS,EAAEyS,kBAAkB,EAAExO,SAAS,EAAE1I,UAAU,EAAEkY,MAAM,EAAEvC,cAAc,EAAEE,cAAc,EAAEkC,IAAI,EAAErO,qBAAqB,EAAEI,6BAA6B,EAAED,yBAAyB,EAAErH,MAAM,EAAE6M,UAAU,EAAEjQ,cAAc,EAAEK,OAAO,EAAEkF,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}