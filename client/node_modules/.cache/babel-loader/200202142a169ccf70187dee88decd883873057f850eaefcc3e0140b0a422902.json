{"ast":null,"code":"import { signal, effect, createContext, hasProvidedContext, useContext, provideContext, peek, isWriteSignal, StoreFactory, useStore, computed, onDispose, scoped, tick } from 'maverick.js';\nimport { ComponentController, Component, defineElement, prop, defineProp, method } from 'maverick.js/element';\nimport { s as scopedRaf, A as ARIAKeyShortcuts, a as setAttributeIfEmpty, o as onPress, u as useMedia, b as setARIALabel, i as isTrackCaptionKind, I as IS_SAFARI, f as functionThrottle, c as findActiveCue, d as canChangeVolume, e as onTrackChapterChange, g as isElementParent, h as isCueActive, p as preconnect } from './media-core.js';\nimport { $$_create_component, $$_create_walker, $$_effect, $$_attr, $$_next_element, $$_create_template, $$_listen, $$_ref, $$_setup_custom_element, $$_insert_at_marker_lite, $$_peek, $$_clone, $$_insert_lite, $$_computed, $$_next_template, $$_scoped } from 'maverick.js/dom';\nimport { I as Icon } from './icons/icon.js';\nimport { listenEvent, setAttribute, ariaBool as ariaBool$1, isNull, isNumber, setStyle, isDOMEvent, isKeyboardEvent, isUndefined, animationFrameThrottle, isDOMElement, isPointerEvent, isMouseEvent, isTouchEvent, kebabToCamelCase, createDisposalBin } from 'maverick.js/std';\nimport { CaptionsRenderer, renderVTTCueString, updateTimedVTTCueNodes } from 'media-captions';\nfunction round(num, decimalPlaces = 2) {\n  return Number(num.toFixed(decimalPlaces));\n}\nfunction getNumberOfDecimalPlaces(num) {\n  return String(num).split(\".\")[1]?.length ?? 0;\n}\nfunction clampNumber(min, value, max) {\n  return Math.max(min, Math.min(max, value));\n}\nlet $keyboard = signal(false);\n{\n  listenEvent(document, \"pointerdown\", () => {\n    $keyboard.set(false);\n  });\n  listenEvent(document, \"keydown\", e => {\n    if (e.metaKey || e.altKey || e.ctrlKey) return;\n    $keyboard.set(true);\n  });\n}\nclass FocusVisibleController extends ComponentController {\n  _focused = signal(false);\n  onConnect(el) {\n    effect(() => {\n      if (!$keyboard()) {\n        this._focused.set(false);\n        updateFocusAttr(el, false);\n        this.listen(\"pointerenter\", this._onPointerEnter.bind(this));\n        this.listen(\"pointerleave\", this._onPointerLeave.bind(this));\n        return;\n      }\n      const active = document.activeElement === el;\n      this._focused.set(active);\n      updateFocusAttr(el, active);\n      this.listen(\"focus\", this._onFocus.bind(this));\n      this.listen(\"blur\", this._onBlur.bind(this));\n    });\n  }\n  focused() {\n    return this._focused();\n  }\n  _onFocus() {\n    this._focused.set(true);\n    updateFocusAttr(this.el, true);\n  }\n  _onBlur() {\n    this._focused.set(false);\n    updateFocusAttr(this.el, false);\n  }\n  _onPointerEnter() {\n    updateHoverAttr(this.el, true);\n  }\n  _onPointerLeave() {\n    updateHoverAttr(this.el, false);\n  }\n}\nfunction updateFocusAttr(el, isFocused) {\n  setAttribute(el, \"data-focus\", isFocused);\n  setAttribute(el, \"data-hocus\", isFocused);\n}\nfunction updateHoverAttr(el, isHovering) {\n  setAttribute(el, \"data-hocus\", isHovering);\n  setAttribute(el, \"data-hover\", isHovering);\n}\nconst tooltipContext = createContext();\nclass Tooltip extends Component {\n  static el = defineElement({\n    tagName: \"media-tooltip\",\n    props: {\n      position: \"top center\"\n    }\n  });\n  onAttach(el) {\n    if (hasProvidedContext(tooltipContext)) {\n      scopedRaf(() => {\n        if (!el.isConnected) return;\n        const tooltip = useContext(tooltipContext);\n        tooltip._attachTooltip(el);\n      });\n    }\n    this.setAttributes({\n      position: this.$props.position\n    });\n  }\n}\nlet id = 0;\nclass TooltipController extends ComponentController {\n  constructor(instance) {\n    super(instance);\n    provideContext(tooltipContext, {\n      _attachTooltip: this._attachTooltip.bind(this)\n    });\n  }\n  _attachTooltip(tooltipEl) {\n    const tooltipId = `media-tooltip-${++id}`;\n    setAttribute(this.el, \"aria-describedby\", tooltipId);\n    setAttribute(tooltipEl, \"id\", tooltipId);\n    setAttribute(tooltipEl, \"role\", \"tooltip\");\n    this.el.removeAttribute(\"aria-label\");\n  }\n}\nvar __defProp$3 = Object.defineProperty;\nvar __getOwnPropDesc$3 = Object.getOwnPropertyDescriptor;\nvar __decorateClass$3 = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$3(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--) if (decorator = decorators[i]) result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result) __defProp$3(target, key, result);\n  return result;\n};\nconst toggleButtonProps = {\n  disabled: false,\n  defaultPressed: false,\n  defaultAppearance: false\n};\nclass ToggleButton extends Component {\n  static el = defineElement({\n    tagName: \"media-toggle-button\",\n    props: toggleButtonProps\n  });\n  _pressed = signal(false);\n  _keyShortcut;\n  constructor(instance) {\n    super(instance);\n    new FocusVisibleController(instance);\n    new TooltipController(instance);\n    if (this._keyShortcut) new ARIAKeyShortcuts(instance, this._keyShortcut);\n  }\n  get pressed() {\n    return peek(this._pressed);\n  }\n  onAttach(el) {\n    if (isWriteSignal(this._pressed)) {\n      this._pressed.set(this.$props.defaultPressed());\n    }\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    const {\n      disabled,\n      defaultAppearance\n    } = this.$props;\n    this.setAttributes({\n      disabled,\n      \"default-appearance\": defaultAppearance,\n      \"data-pressed\": this._pressed,\n      \"aria-pressed\": this._isARIAPressed.bind(this),\n      \"data-media-button\": true\n    });\n  }\n  onConnect(el) {\n    onPress(el, this._onMaybePress.bind(this));\n  }\n  _isARIAPressed() {\n    return ariaBool$1(this._pressed());\n  }\n  _onPress(event) {\n    if (isWriteSignal(this._pressed)) {\n      this._pressed.set(p => !p);\n    }\n  }\n  _onMaybePress(event) {\n    const disabled = this.$props.disabled();\n    if (disabled) {\n      if (disabled) event.stopImmediatePropagation();\n      return;\n    }\n    event.preventDefault();\n    this._onPress(event);\n  }\n}\n__decorateClass$3([prop], ToggleButton.prototype, \"pressed\", 1);\nvar Icon$56 = `<path d=\"M8.66667 6.66667C8.29848 6.66667 8 6.96514 8 7.33333V24.6667C8 25.0349 8.29848 25.3333 8.66667 25.3333H12.6667C13.0349 25.3333 13.3333 25.0349 13.3333 24.6667V7.33333C13.3333 6.96514 13.0349 6.66667 12.6667 6.66667H8.66667Z\" fill=\"currentColor\"/> <path d=\"M19.3333 6.66667C18.9651 6.66667 18.6667 6.96514 18.6667 7.33333V24.6667C18.6667 25.0349 18.9651 25.3333 19.3333 25.3333H23.3333C23.7015 25.3333 24 25.0349 24 24.6667V7.33333C24 6.96514 23.7015 6.66667 23.3333 6.66667H19.3333Z\" fill=\"currentColor\"/>`;\nvar Icon$59 = `<path d=\"M10.6667 6.6548C10.6667 6.10764 11.2894 5.79346 11.7295 6.11862L24.377 15.4634C24.7377 15.7298 24.7377 16.2692 24.3771 16.5357L11.7295 25.8813C11.2895 26.2065 10.6667 25.8923 10.6667 25.3451L10.6667 6.6548Z\" fill=\"currentColor\"/>`;\nvar Icon$71 = `<path d=\"M15.6038 12.2147C16.0439 12.5399 16.6667 12.2257 16.6667 11.6786V10.1789C16.6667 10.1001 16.7351 10.0384 16.8134 10.0479C20.1116 10.4494 22.6667 13.2593 22.6667 16.6659C22.6667 20.3481 19.6817 23.3332 15.9995 23.3332C12.542 23.3332 9.69927 20.7014 9.36509 17.332C9.32875 16.9655 9.03371 16.6662 8.66548 16.6662L6.66655 16.6666C6.29841 16.6666 5.99769 16.966 6.02187 17.3334C6.36494 22.5454 10.7012 26.6667 16 26.6667C21.5228 26.6667 26 22.1895 26 16.6667C26 11.4103 21.9444 7.10112 16.7916 6.69757C16.7216 6.69209 16.6667 6.63396 16.6667 6.56372V4.98824C16.6667 4.44106 16.0439 4.12689 15.6038 4.45206L11.0765 7.79738C10.7159 8.06387 10.7159 8.60326 11.0766 8.86973L15.6038 12.2147Z\" fill=\"currentColor\"/>`;\nclass PlayButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-play-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"togglePaused\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    const {\n      paused,\n      ended\n    } = this._media.$store;\n    this.setAttributes({\n      \"data-paused\": paused,\n      \"data-ended\": ended\n    });\n  }\n  _onPress(event) {\n    const remote = this._media.remote;\n    this._pressed() ? remote.pause(event) : remote.play(event);\n  }\n  _isPressed() {\n    const {\n      paused\n    } = this._media.$store;\n    return !paused();\n  }\n  _getLabel() {\n    const {\n      paused\n    } = this._media.$store;\n    return paused() ? \"Play\" : \"Pause\";\n  }\n  render() {\n    return [$$_create_component(Icon, {\n      paths: Icon$59,\n      slot: \"play\"\n    }), $$_create_component(Icon, {\n      paths: Icon$71,\n      slot: \"replay\"\n    }), $$_create_component(Icon, {\n      paths: Icon$56,\n      slot: \"pause\"\n    })];\n  }\n}\nvar Icon$24 = `<path d=\"M8 28.0003C8 27.6321 8.29848 27.3336 8.66667 27.3336H23.3333C23.7015 27.3336 24 27.6321 24 28.0003V29.3336C24 29.7018 23.7015 30.0003 23.3333 30.0003H8.66667C8.29848 30.0003 8 29.7018 8 29.3336V28.0003Z\" fill=\"currentColor\"/> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.66602 6.66699C4.29783 6.66699 3.99935 6.96547 3.99935 7.33366V24.667C3.99935 25.0352 4.29783 25.3337 4.66602 25.3337H27.3327C27.7009 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.7009 6.66699 27.3327 6.66699H4.66602ZM8.66659 21.3333C8.2984 21.3333 7.99992 21.0349 7.99992 20.6667V11.3333C7.99992 10.9651 8.2984 10.6667 8.66659 10.6667H13.9999C14.3681 10.6667 14.6666 10.9651 14.6666 11.3333V12.6667C14.6666 13.0349 14.3681 13.3333 13.9999 13.3333H10.7999C10.7263 13.3333 10.6666 13.393 10.6666 13.4667V18.5333C10.6666 18.607 10.7263 18.6667 10.7999 18.6667H13.9999C14.3681 18.6667 14.6666 18.9651 14.6666 19.3333V20.6667C14.6666 21.0349 14.3681 21.3333 13.9999 21.3333H8.66659ZM17.9999 21.3333C17.6317 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6317 10.6667 17.9999 10.6667H23.3333C23.7014 10.6667 23.9999 10.9651 23.9999 11.3333V12.6667C23.9999 13.0349 23.7014 13.3333 23.3333 13.3333H20.1333C20.0596 13.3333 19.9999 13.393 19.9999 13.4667V18.5333C19.9999 18.607 20.0596 18.6667 20.1333 18.6667H23.3333C23.7014 18.6667 23.9999 18.9651 23.9999 19.3333V20.6667C23.9999 21.0349 23.7014 21.3333 23.3333 21.3333H17.9999Z\" fill=\"currentColor\"/>`;\nvar Icon$25 = `<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.6661 6.66699C4.29791 6.66699 3.99943 6.96547 3.99943 7.33366V24.667C3.99943 25.0352 4.29791 25.3337 4.6661 25.3337H27.3328C27.701 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.701 6.66699 27.3328 6.66699H4.6661ZM8.66667 21.3333C8.29848 21.3333 8 21.0349 8 20.6667V11.3333C8 10.9651 8.29848 10.6667 8.66667 10.6667H14C14.3682 10.6667 14.6667 10.9651 14.6667 11.3333V12.6667C14.6667 13.0349 14.3682 13.3333 14 13.3333H10.8C10.7264 13.3333 10.6667 13.393 10.6667 13.4667V18.5333C10.6667 18.607 10.7264 18.6667 10.8 18.6667H14C14.3682 18.6667 14.6667 18.9651 14.6667 19.3333V20.6667C14.6667 21.0349 14.3682 21.3333 14 21.3333H8.66667ZM18 21.3333C17.6318 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6318 10.6667 18 10.6667H23.3333C23.7015 10.6667 24 10.9651 24 11.3333V12.6667C24 13.0349 23.7015 13.3333 23.3333 13.3333H20.1333C20.0597 13.3333 20 13.393 20 13.4667V18.5333C20 18.607 20.0597 18.6667 20.1333 18.6667H23.3333C23.7015 18.6667 24 18.9651 24 19.3333V20.6667C24 21.0349 23.7015 21.3333 23.3333 21.3333H18Z\" fill=\"currentColor\"/>`;\nfunction ariaBool(value) {\n  return value ? \"true\" : \"false\";\n}\nfunction $ariaBool(signal) {\n  return () => ariaBool(signal());\n}\nclass CaptionButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-caption-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"toggleCaptions\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  _onPress(event) {\n    this._media.remote.toggleCaptions(event);\n  }\n  _isPressed() {\n    const {\n        textTrack\n      } = this._media.$store,\n      track = textTrack();\n    return !!track && isTrackCaptionKind(track);\n  }\n  _isHidden() {\n    const {\n      textTracks\n    } = this._media.$store;\n    return textTracks().filter(isTrackCaptionKind).length == 0;\n  }\n  _getLabel() {\n    const {\n      textTrack\n    } = this._media.$store;\n    return textTrack() ? \"Closed-Captions Off\" : \"Closed-Captions On\";\n  }\n  render() {\n    return [$$_create_component(Icon, {\n      paths: Icon$24,\n      slot: \"on\"\n    }), $$_create_component(Icon, {\n      paths: Icon$25,\n      slot: \"off\"\n    })];\n  }\n}\nvar Icon$37 = `<path d=\"M19.3334 13.3333C18.9652 13.3333 18.6667 13.0349 18.6667 12.6667L18.6667 7.33333C18.6667 6.96514 18.9652 6.66666 19.3334 6.66666H21.3334C21.7015 6.66666 22 6.96514 22 7.33333V9.86666C22 9.9403 22.0597 10 22.1334 10L24.6667 10C25.0349 10 25.3334 10.2985 25.3334 10.6667V12.6667C25.3334 13.0349 25.0349 13.3333 24.6667 13.3333L19.3334 13.3333Z\" fill=\"currentColor\"/> <path d=\"M13.3334 19.3333C13.3334 18.9651 13.0349 18.6667 12.6667 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V21.3333C6.66669 21.7015 6.96516 22 7.33335 22H9.86669C9.94032 22 10 22.0597 10 22.1333L10 24.6667C10 25.0349 10.2985 25.3333 10.6667 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667L13.3334 19.3333Z\" fill=\"currentColor\"/> <path d=\"M18.6667 24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333H21.3334C21.7015 25.3333 22 25.0349 22 24.6667V22.1333C22 22.0597 22.0597 22 22.1334 22H24.6667C25.0349 22 25.3334 21.7015 25.3334 21.3333V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667L19.3334 18.6667C18.9652 18.6667 18.6667 18.9651 18.6667 19.3333L18.6667 24.6667Z\" fill=\"currentColor\"/> <path d=\"M10.6667 13.3333H12.6667C13.0349 13.3333 13.3334 13.0349 13.3334 12.6667L13.3334 10.6667V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H10.6667C10.2985 6.66666 10 6.96514 10 7.33333L10 9.86666C10 9.9403 9.94033 10 9.86669 10L7.33335 10C6.96516 10 6.66669 10.2985 6.66669 10.6667V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333L10.6667 13.3333Z\" fill=\"currentColor\"/>`;\nvar Icon$38 = `<path d=\"M25.3299 7.26517C25.2958 6.929 25.0119 6.66666 24.6667 6.66666H19.3334C18.9652 6.66666 18.6667 6.96514 18.6667 7.33333V9.33333C18.6667 9.70152 18.9652 10 19.3334 10L21.8667 10C21.9403 10 22 10.0597 22 10.1333V12.6667C22 13.0349 22.2985 13.3333 22.6667 13.3333H24.6667C25.0349 13.3333 25.3334 13.0349 25.3334 12.6667V7.33333C25.3334 7.31032 25.3322 7.28758 25.3299 7.26517Z\" fill=\"currentColor\"/> <path d=\"M22 21.8667C22 21.9403 21.9403 22 21.8667 22L19.3334 22C18.9652 22 18.6667 22.2985 18.6667 22.6667V24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333L24.6667 25.3333C25.0349 25.3333 25.3334 25.0349 25.3334 24.6667V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667H22.6667C22.2985 18.6667 22 18.9651 22 19.3333V21.8667Z\" fill=\"currentColor\"/> <path d=\"M12.6667 22H10.1334C10.0597 22 10 21.9403 10 21.8667V19.3333C10 18.9651 9.70154 18.6667 9.33335 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V24.6667C6.66669 25.0349 6.96516 25.3333 7.33335 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667V22.6667C13.3334 22.2985 13.0349 22 12.6667 22Z\" fill=\"currentColor\"/> <path d=\"M10 12.6667V10.1333C10 10.0597 10.0597 10 10.1334 10L12.6667 10C13.0349 10 13.3334 9.70152 13.3334 9.33333V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H7.33335C6.96516 6.66666 6.66669 6.96514 6.66669 7.33333V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333H9.33335C9.70154 13.3333 10 13.0349 10 12.6667Z\" fill=\"currentColor\"/>`;\nclass FullscreenButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-fullscreen-button\",\n    props: {\n      ...toggleButtonProps,\n      target: \"prefer-media\"\n    }\n  });\n  _media;\n  _keyShortcut = \"toggleFullscreen\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    const {\n      fullscreen\n    } = this._media.$store;\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this)),\n      \"data-fullscreen\": fullscreen\n    });\n  }\n  _onPress(event) {\n    const remote = this._media.remote,\n      target = this.$props.target();\n    this._pressed() ? remote.exitFullscreen(target, event) : remote.enterFullscreen(target, event);\n  }\n  _isPressed() {\n    const {\n      fullscreen\n    } = this._media.$store;\n    return fullscreen();\n  }\n  _isHidden() {\n    const {\n      canFullscreen\n    } = this._media.$store;\n    return !canFullscreen();\n  }\n  _getLabel() {\n    const {\n      fullscreen\n    } = this._media.$store;\n    return fullscreen() ? \"Exit Fullscreen\" : \"Enter Fullscreen\";\n  }\n  render() {\n    return [$$_create_component(Icon, {\n      paths: Icon$38,\n      slot: \"enter\"\n    }), $$_create_component(Icon, {\n      paths: Icon$37,\n      slot: \"exit\"\n    })];\n  }\n}\nvar Icon$52 = `<path d=\"M17.5091 24.6594C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3325V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.8036C16.8863 6.47842 17.5091 6.79259 17.5091 7.33977L17.5091 24.6594Z\" fill=\"currentColor\"/> <path d=\"M28.8621 13.6422C29.1225 13.3818 29.1225 12.9597 28.8621 12.6994L27.9193 11.7566C27.659 11.4962 27.2368 11.4962 26.9765 11.7566L24.7134 14.0197C24.6613 14.0717 24.5769 14.0717 24.5248 14.0197L22.262 11.7568C22.0016 11.4964 21.5795 11.4964 21.3191 11.7568L20.3763 12.6996C20.116 12.9599 20.116 13.382 20.3763 13.6424L22.6392 15.9053C22.6913 15.9573 22.6913 16.0418 22.6392 16.0938L20.3768 18.3562C20.1165 18.6166 20.1165 19.0387 20.3768 19.299L21.3196 20.2419C21.58 20.5022 22.0021 20.5022 22.2624 20.2418L24.5248 17.9795C24.5769 17.9274 24.6613 17.9274 24.7134 17.9795L26.976 20.2421C27.2363 20.5024 27.6585 20.5024 27.9188 20.2421L28.8616 19.2992C29.122 19.0389 29.122 18.6168 28.8616 18.3564L26.599 16.0938C26.547 16.0418 26.547 15.9573 26.599 15.9053L28.8621 13.6422Z\" fill=\"currentColor\"/>`;\nvar Icon$101 = `<path d=\"M17.5091 24.6595C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9992 9.36923 19.9992H4.66667C4.29848 19.9992 4 19.7007 4 19.3325V12.6658C4 12.2976 4.29848 11.9992 4.66667 11.9992H9.37115C9.39967 11.9992 9.42745 11.99 9.45039 11.9731L16.4463 6.80363C16.8863 6.47845 17.5091 6.79262 17.5091 7.3398L17.5091 24.6595Z\" fill=\"currentColor\"/> <path d=\"M27.5091 9.33336C27.8773 9.33336 28.1758 9.63184 28.1758 10V22C28.1758 22.3682 27.8773 22.6667 27.5091 22.6667H26.1758C25.8076 22.6667 25.5091 22.3682 25.5091 22V10C25.5091 9.63184 25.8076 9.33336 26.1758 9.33336L27.5091 9.33336Z\" fill=\"currentColor\"/> <path d=\"M22.1758 12C22.544 12 22.8424 12.2985 22.8424 12.6667V19.3334C22.8424 19.7016 22.544 20 22.1758 20H20.8424C20.4743 20 20.1758 19.7016 20.1758 19.3334V12.6667C20.1758 12.2985 20.4743 12 20.8424 12H22.1758Z\" fill=\"currentColor\"/>`;\nvar Icon$102 = `<path d=\"M17.5091 24.6594C17.5091 25.2066 16.8864 25.5207 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3324V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.80358C16.8863 6.4784 17.5091 6.79258 17.5091 7.33975L17.5091 24.6594Z\" fill=\"currentColor\"/> <path d=\"M22.8424 12.6667C22.8424 12.2985 22.544 12 22.1758 12H20.8424C20.4743 12 20.1758 12.2985 20.1758 12.6667V19.3333C20.1758 19.7015 20.4743 20 20.8424 20H22.1758C22.544 20 22.8424 19.7015 22.8424 19.3333V12.6667Z\" fill=\"currentColor\"/>`;\nclass MuteButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-mute-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"toggleMuted\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    setARIALabel(el, this._getLabel.bind(this));\n    this.setAttributes({\n      \"data-muted\": this._pressed,\n      \"data-volume\": this._getVolumeText.bind(this)\n    });\n    super.onAttach(el);\n  }\n  _onPress(event) {\n    const remote = this._media.remote;\n    this._pressed() ? remote.unmute(event) : remote.mute(event);\n  }\n  _isPressed() {\n    const {\n      muted,\n      volume\n    } = this._media.$store;\n    return muted() || volume() === 0;\n  }\n  _getLabel() {\n    return this._pressed() ? \"Unmute\" : \"Mute\";\n  }\n  _getVolumeText() {\n    const {\n        muted,\n        volume\n      } = this._media.$store,\n      $volume = volume();\n    if (muted() || $volume === 0) return \"muted\";else if ($volume >= 0.5) return \"high\";else if ($volume < 0.5) return \"low\";\n  }\n  render() {\n    return [$$_create_component(Icon, {\n      paths: Icon$101,\n      slot: \"volume-high\"\n    }), $$_create_component(Icon, {\n      paths: Icon$102,\n      slot: \"volume-low\"\n    }), $$_create_component(Icon, {\n      paths: Icon$52,\n      slot: \"volume-muted\"\n    })];\n  }\n}\nvar Icon$57 = `<path d=\"M5.33334 26V19.4667C5.33334 19.393 5.39304 19.3333 5.46668 19.3333H7.86668C7.94031 19.3333 8.00001 19.393 8.00001 19.4667V23.3333C8.00001 23.7015 8.29849 24 8.66668 24H23.3333C23.7015 24 24 23.7015 24 23.3333V8.66666C24 8.29847 23.7015 7.99999 23.3333 7.99999H19.4667C19.393 7.99999 19.3333 7.9403 19.3333 7.86666V5.46666C19.3333 5.39302 19.393 5.33333 19.4667 5.33333H26C26.3682 5.33333 26.6667 5.63181 26.6667 5.99999V26C26.6667 26.3682 26.3682 26.6667 26 26.6667H6.00001C5.63182 26.6667 5.33334 26.3682 5.33334 26Z\" fill=\"currentColor\"/> <path d=\"M14.0098 8.42359H10.806C10.6872 8.42359 10.6277 8.56721 10.7117 8.6512L16.5491 14.4886C16.8094 14.7489 16.8094 15.171 16.5491 15.4314L15.3234 16.657C15.0631 16.9174 14.641 16.9174 14.3806 16.657L8.63739 10.9138C8.55339 10.8298 8.40978 10.8893 8.40978 11.0081V14.0236C8.40978 14.3918 8.1113 14.6903 7.74311 14.6903H6.00978C5.64159 14.6903 5.34311 14.3918 5.34311 14.0236L5.34311 6.02359C5.34311 5.6554 5.64159 5.35692 6.00978 5.35692L14.0098 5.35692C14.378 5.35692 14.6764 5.6554 14.6764 6.02359V7.75692C14.6764 8.12511 14.378 8.42359 14.0098 8.42359Z\" fill=\"currentColor\"/>`;\nvar Icon$58 = `<path d=\"M16 15.3333C15.6318 15.3333 15.3333 15.6318 15.3333 16V20C15.3333 20.3682 15.6318 20.6667 16 20.6667H21.3333C21.7015 20.6667 22 20.3682 22 20V16C22 15.6318 21.7015 15.3333 21.3333 15.3333H16Z\" fill=\"currentColor\"/> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5.33333 7.33334C5.33333 6.96515 5.63181 6.66667 5.99999 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V24.6667C26.6667 25.0349 26.3682 25.3333 26 25.3333H5.99999C5.63181 25.3333 5.33333 25.0349 5.33333 24.6667V7.33334ZM7.99999 10C7.99999 9.63182 8.29847 9.33334 8.66666 9.33334H23.3333C23.7015 9.33334 24 9.63182 24 10V22C24 22.3682 23.7015 22.6667 23.3333 22.6667H8.66666C8.29847 22.6667 7.99999 22.3682 7.99999 22V10Z\" fill=\"currentColor\"/>`;\nclass PIPButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-pip-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"togglePictureInPicture\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    const {\n      pictureInPicture\n    } = this._media.$store;\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this)),\n      \"data-pip\": pictureInPicture\n    });\n  }\n  _onPress(event) {\n    const remote = this._media.remote;\n    this._pressed() ? remote.exitPictureInPicture(event) : remote.enterPictureInPicture(event);\n  }\n  _isPressed() {\n    const {\n      pictureInPicture\n    } = this._media.$store;\n    return pictureInPicture();\n  }\n  _isHidden() {\n    const {\n      canPictureInPicture\n    } = this._media.$store;\n    return !canPictureInPicture();\n  }\n  _getLabel() {\n    const {\n      pictureInPicture\n    } = this._media.$store;\n    return pictureInPicture() ? \"Exit Picture In Picture\" : \"Enter Picture In Picture\";\n  }\n  render() {\n    return [$$_create_component(Icon, {\n      paths: Icon$58,\n      slot: \"enter\"\n    }), $$_create_component(Icon, {\n      paths: Icon$57,\n      slot: \"exit\"\n    })];\n  }\n}\nvar Icon$77 = `<path d=\"M15.6038 12.2148C16.0439 12.5399 16.6667 12.2257 16.6667 11.6786V10.1789C16.6667 10.1001 16.7351 10.0384 16.8134 10.0479C20.1116 10.4494 22.6667 13.2593 22.6667 16.6659C22.6667 20.3481 19.6817 23.3332 15.9995 23.3332C12.542 23.3332 9.69927 20.7015 9.36509 17.332C9.32875 16.9655 9.03371 16.6662 8.66548 16.6662L6.66655 16.6666C6.29841 16.6666 5.99769 16.966 6.02187 17.3334C6.36494 22.5454 10.7012 26.6667 16 26.6667C21.5228 26.6667 26 22.1895 26 16.6667C26 11.4103 21.9444 7.10112 16.7916 6.69758C16.7216 6.69209 16.6667 6.63396 16.6667 6.56372V4.98824C16.6667 4.44106 16.0439 4.12689 15.6038 4.45207L11.0765 7.79738C10.7159 8.06387 10.7159 8.60327 11.0766 8.86974L15.6038 12.2148Z\" fill=\"currentColor\"/>`;\nvar Icon$81 = `<path d=\"M16.4167 12.2148C15.9766 12.5399 15.3538 12.2257 15.3538 11.6786V10.1789C15.3538 10.1001 15.2854 10.0384 15.2072 10.0479C11.9089 10.4494 9.35384 13.2593 9.35384 16.6659C9.35384 20.3481 12.3389 23.3332 16.0211 23.3332C19.4785 23.3332 22.3212 20.7015 22.6554 17.332C22.6918 16.9655 22.9868 16.6662 23.355 16.6662L25.354 16.6666C25.7221 16.6666 26.0228 16.966 25.9986 17.3334C25.6556 22.5454 21.3193 26.6667 16.0205 26.6667C10.4977 26.6667 6.02051 22.1895 6.02051 16.6667C6.02051 11.4103 10.0761 7.10112 15.2289 6.69758C15.2989 6.69209 15.3538 6.63396 15.3538 6.56372V4.98824C15.3538 4.44106 15.9766 4.12689 16.4167 4.45207L20.944 7.79738C21.3046 8.06387 21.3046 8.60327 20.9439 8.86974L16.4167 12.2148Z\" fill=\"currentColor\"/>`;\nclass SeekButton extends Component {\n  static el = defineElement({\n    tagName: \"media-seek-button\",\n    props: {\n      disabled: false,\n      defaultAppearance: false,\n      seconds: 30\n    }\n  });\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    new FocusVisibleController(instance);\n    new TooltipController(instance);\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setARIALabel(el, this._getLabel.bind(this));\n    const {\n      seconds,\n      defaultAppearance\n    } = this.$props;\n    this.setAttributes({\n      seconds,\n      \"default-appearance\": defaultAppearance,\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this)),\n      \"data-media-button\": true\n    });\n  }\n  onConnect(el) {\n    onPress(el, this._onPress.bind(this));\n  }\n  _isHidden() {\n    const {\n      canSeek\n    } = this._media.$store;\n    return !canSeek();\n  }\n  _getLabel() {\n    const {\n      seconds\n    } = this.$props;\n    return `Seek ${seconds() > 0 ? \"forward\" : \"backward\"} ${seconds()} seconds`;\n  }\n  _onPress(event) {\n    const {\n      seconds,\n      disabled\n    } = this.$props;\n    if (disabled()) return;\n    const {\n        currentTime\n      } = this._media.$store,\n      seekTo = currentTime() + seconds();\n    this._media.remote.seek(seekTo, event);\n  }\n  render() {\n    return [$$_create_component(Icon, {\n      paths: Icon$77,\n      slot: \"backward\"\n    }), $$_create_component(Icon, {\n      paths: Icon$81,\n      slot: \"forward\"\n    })];\n  }\n}\nconst SliderStoreFactory = new StoreFactory({\n  min: 0,\n  max: 100,\n  value: 50,\n  pointerValue: 0,\n  focused: false,\n  dragging: false,\n  pointing: false,\n  get interactive() {\n    return this.dragging || this.focused || this.pointing;\n  },\n  get fillRate() {\n    return calcRate(this.min, this.max, this.value);\n  },\n  get fillPercent() {\n    return this.fillRate * 100;\n  },\n  get pointerRate() {\n    return calcRate(this.min, this.max, this.pointerValue);\n  },\n  get pointerPercent() {\n    return this.pointerRate * 100;\n  }\n});\nfunction calcRate(min, max, value) {\n  const range = max - min,\n    offset = value - min;\n  return range > 0 ? offset / range : 0;\n}\nconst sliderProps = {\n  min: 0,\n  max: 100,\n  disabled: false,\n  value: 100,\n  step: 1,\n  keyStep: 1,\n  shiftKeyMultiplier: 5,\n  trackClass: null,\n  trackFillClass: null,\n  trackProgressClass: null,\n  thumbContainerClass: null,\n  thumbClass: null\n};\nfunction getClampedValue(min, max, value, step) {\n  return clampNumber(min, round(value, getNumberOfDecimalPlaces(step)), max);\n}\nfunction getValueFromRate(min, max, rate, step) {\n  const boundRate = clampNumber(0, rate, 1),\n    range = max - min,\n    fill = range * boundRate,\n    stepRatio = fill / step,\n    steps = step * stepRatio;\n  return min + steps;\n}\nconst SliderKeyDirection = {\n  Left: -1,\n  ArrowLeft: -1,\n  Up: 1,\n  ArrowUp: 1,\n  Right: 1,\n  ArrowRight: 1,\n  Down: -1,\n  ArrowDown: -1\n};\nclass SliderEventsController extends ComponentController {\n  constructor(instance, _delegate, _media) {\n    super(instance);\n    this._delegate = _delegate;\n    this._media = _media;\n  }\n  onConnect() {\n    effect(this._attachEventListeners.bind(this));\n    effect(this._attachPointerListeners.bind(this));\n    if (this._delegate._swipeGesture) {\n      scopedRaf(() => {\n        const outlet = this._media.player?.querySelector(\"media-outlet\");\n        if (outlet) {\n          this._outlet = outlet;\n          listenEvent(outlet, \"touchstart\", this._onTouchStart.bind(this));\n          listenEvent(outlet, \"touchmove\", this._onTouchMove.bind(this));\n        }\n      });\n    }\n  }\n  _outlet = null;\n  _touchX = null;\n  _touchStartValue = null;\n  _onTouchStart(event) {\n    this._touchX = event.touches[0].clientX;\n  }\n  _onTouchMove(event) {\n    if (isNull(this._touchX)) return;\n    event.preventDefault();\n    if (this.$store.dragging()) return;\n    const diff = event.touches[0].clientX - this._touchX;\n    if (Math.abs(diff) > 20) {\n      this._touchX = event.touches[0].clientX;\n      this._touchStartValue = this.$store.value();\n      this._onStartDragging(this._touchStartValue, event);\n    }\n  }\n  _attachEventListeners() {\n    if (this._delegate._isDisabled()) return;\n    this.listen(\"focus\", this._onFocus.bind(this));\n    this.listen(\"pointerenter\", this._onPointerEnter.bind(this));\n    this.listen(\"pointermove\", this._onPointerMove.bind(this));\n    this.listen(\"pointerleave\", this._onPointerLeave.bind(this));\n    this.listen(\"pointerdown\", this._onPointerDown.bind(this));\n    this.listen(\"keydown\", this._onKeyDown.bind(this));\n    this.listen(\"keyup\", this._onKeyUp.bind(this));\n  }\n  _attachPointerListeners() {\n    if (this._delegate._isDisabled() || !this.$store.dragging()) return;\n    listenEvent(document, \"pointerup\", this._onDocumentPointerUp.bind(this));\n    listenEvent(document, \"pointermove\", this._onDocumentPointerMove.bind(this));\n    if (IS_SAFARI) {\n      listenEvent(document, \"touchmove\", this._onDocumentTouchMove.bind(this), {\n        passive: false\n      });\n    }\n  }\n  _onFocus() {\n    this._updatePointerValue(this.$store.value());\n  }\n  _updateValue(newValue, trigger) {\n    const {\n      value,\n      min,\n      max,\n      dragging\n    } = this.$store;\n    const clampedValue = Math.max(min(), Math.min(newValue, max()));\n    value.set(clampedValue);\n    const event = this.createEvent(\"value-change\", {\n      detail: clampedValue,\n      trigger\n    });\n    this.el.dispatchEvent(event);\n    this._delegate._onValueChange(event);\n    if (dragging()) {\n      const event2 = this.createEvent(\"drag-value-change\", {\n        detail: clampedValue,\n        trigger\n      });\n      this.el.dispatchEvent(event2);\n      this._delegate._onDragValueChange(event2);\n    }\n  }\n  _updatePointerValue(value, trigger) {\n    const {\n      pointerValue,\n      dragging\n    } = this.$store;\n    pointerValue.set(value);\n    this.dispatch(\"pointer-value-change\", {\n      detail: value,\n      trigger\n    });\n    if (dragging()) {\n      const dir = this._delegate._orientation === \"vertical\" ? \"bottom\" : \"left\",\n        size = this._delegate._orientation === \"vertical\" ? \"height\" : \"width\";\n      if (this._trackFill && !this.el?.hasAttribute(\"data-chapters\")) {\n        this._trackFill.style[size] = value + \"%\";\n      }\n      if (this._thumb) {\n        this._thumb.style[dir] = value + \"%\";\n      }\n      this._updateValue(value, trigger);\n    }\n  }\n  _getPointerValue(event) {\n    let thumbPositionRate,\n      rect = this.el.getBoundingClientRect(),\n      {\n        min,\n        max\n      } = this.$store;\n    if (this._delegate._orientation === \"vertical\") {\n      const {\n        bottom: trackBottom,\n        height: trackHeight\n      } = rect;\n      thumbPositionRate = (trackBottom - event.clientY) / trackHeight;\n    } else {\n      if (this._touchX && isNumber(this._touchStartValue)) {\n        const {\n            width\n          } = this._outlet.getBoundingClientRect(),\n          rate = (event.clientX - this._touchX) / width,\n          range = max() - min(),\n          diff = range * Math.abs(rate);\n        thumbPositionRate = (rate < 0 ? this._touchStartValue - diff : this._touchStartValue + diff) / range;\n      } else {\n        const {\n          left: trackLeft,\n          width: trackWidth\n        } = rect;\n        thumbPositionRate = (event.clientX - trackLeft) / trackWidth;\n      }\n    }\n    return Math.max(min(), Math.min(max(), this._delegate._roundValue(getValueFromRate(min(), max(), thumbPositionRate, this._delegate._getStep()))));\n  }\n  _onPointerEnter(event) {\n    this.$store.pointing.set(true);\n  }\n  _onPointerMove(event) {\n    const {\n      dragging\n    } = this.$store;\n    if (dragging()) return;\n    this._updatePointerValue(this._getPointerValue(event), event);\n  }\n  _onPointerLeave(event) {\n    this.$store.pointing.set(false);\n  }\n  _onPointerDown(event) {\n    if (event.button !== 0) return;\n    const value = this._getPointerValue(event);\n    this._onStartDragging(value, event);\n    this._updatePointerValue(value, event);\n  }\n  _thumb = null;\n  _trackFill = null;\n  _onStartDragging(value, trigger) {\n    const {\n      dragging\n    } = this.$store;\n    if (dragging()) return;\n    dragging.set(true);\n    this._thumb = this.el.querySelector('shadow-root > div[part=\"thumb-container\"]');\n    this._trackFill = this.el.querySelector('shadow-root > div[part~=\"track-fill\"]');\n    this._media.remote.pauseUserIdle(trigger);\n    const event = this.createEvent(\"drag-start\", {\n      detail: value,\n      trigger\n    });\n    this.el.dispatchEvent(event);\n    this._delegate._onDragStart(event);\n  }\n  _onStopDragging(value, trigger) {\n    const {\n      dragging\n    } = this.$store;\n    if (!dragging()) return;\n    dragging.set(false);\n    if (this._trackFill) {\n      setStyle(this._trackFill, \"width\", null);\n      this._trackFill = null;\n    }\n    if (this._thumb) {\n      setStyle(this._thumb, \"left\", null);\n      setStyle(this._thumb, \"bottom\", null);\n      this._thumb = null;\n    }\n    this._media.remote.resumeUserIdle(trigger);\n    const event = this.createEvent(\"drag-end\", {\n      detail: value,\n      trigger\n    });\n    this.el.dispatchEvent(event);\n    this._delegate._onDragEnd(event);\n    this._touchX = null;\n    this._touchStartValue = null;\n  }\n  // -------------------------------------------------------------------------------------------\n  // Keyboard Events\n  // -------------------------------------------------------------------------------------------\n  _lastDownKey;\n  _onKeyDown(event) {\n    if (isDOMEvent(event)) {\n      const trigger = event.trigger;\n      if (isKeyboardEvent(trigger)) event = trigger;else return;\n    }\n    const {\n      key\n    } = event;\n    const {\n      min,\n      max\n    } = this.$store;\n    let newValue;\n    if (key === \"Home\" || key === \"PageUp\") {\n      newValue = min();\n    } else if (key === \"End\" || key === \"PageDown\") {\n      newValue = max();\n    } else if (!event.metaKey && /[0-9]/.test(key)) {\n      newValue = (max() - min()) / 10 * Number(key);\n    }\n    if (!isUndefined(newValue)) {\n      this._updatePointerValue(newValue, event);\n      this._updateValue(newValue, event);\n      return;\n    }\n    const value = this._getKeyValue(event);\n    if (!value) return;\n    const repeat = key === this._lastDownKey;\n    if (!this.$store.dragging() && repeat) this._onStartDragging(value, event);\n    this._updatePointerValue(value, event);\n    if (!repeat) this._updateValue(value, event);\n    this._lastDownKey = key;\n  }\n  _onKeyUp(event) {\n    if (isDOMEvent(event)) {\n      const trigger = event.trigger;\n      if (isKeyboardEvent(trigger)) event = trigger;else return;\n    }\n    this._lastDownKey = \"\";\n    const {\n      dragging,\n      value\n    } = this.$store;\n    if (!dragging()) return;\n    const newValue = this._getKeyValue(event) ?? value();\n    this._updatePointerValue(newValue);\n    this._onStopDragging(newValue, event);\n  }\n  _getKeyValue(event) {\n    const {\n        key,\n        shiftKey\n      } = event,\n      isValidKey = Object.keys(SliderKeyDirection).includes(key);\n    if (!isValidKey) return;\n    const {\n      shiftKeyMultiplier\n    } = this.$props;\n    const {\n        value\n      } = this.$store,\n      step = this._delegate._getStep(),\n      keyStep = this._delegate._getKeyStep();\n    const modifiedStep = !shiftKey ? keyStep : keyStep * shiftKeyMultiplier(),\n      direction = Number(SliderKeyDirection[key]),\n      diff = modifiedStep * direction,\n      steps = (value() + diff) / step;\n    return Number((step * steps).toFixed(3));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Document (Pointer Events)\n  // -------------------------------------------------------------------------------------------\n  _onDocumentPointerUp(event) {\n    if (event.button !== 0) return;\n    const value = this._getPointerValue(event);\n    this._updatePointerValue(value, event);\n    this._onStopDragging(value, event);\n  }\n  _onDocumentTouchMove(event) {\n    event.preventDefault();\n  }\n  _onDocumentPointerMove = functionThrottle(event => {\n    this._updatePointerValue(this._getPointerValue(event), event);\n  }, 20, {\n    leading: true\n  });\n}\nconst sliderValueFormatContext = createContext(() => ({}));\nconst $$_templ$h = /* @__PURE__ */$$_create_template(`<!$><div part=\"track\"></div>`),\n  $$_templ_2$6 = /* @__PURE__ */$$_create_template(`<!$><div part=\"track track-fill\"></div>`),\n  $$_templ_3$1 = /* @__PURE__ */$$_create_template(`<!$><div part=\"track track-progress\"></div>`),\n  $$_templ_4 = /* @__PURE__ */$$_create_template(`<!$><div part=\"thumb-container\"><!$><div part=\"thumb\"></div></div>`);\nclass Slider extends Component {\n  static el = defineElement({\n    tagName: \"media-slider\",\n    props: sliderProps,\n    store: SliderStoreFactory\n  });\n  _media;\n  _readonly = false;\n  _orientation = \"\";\n  constructor(instance) {\n    super(instance);\n    provideContext(sliderValueFormatContext);\n    this._media = useMedia();\n    new SliderEventsController(instance, this, this._media);\n    const focus = new FocusVisibleController(instance);\n    this.$store.focused = focus.focused.bind(focus);\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"role\", \"slider\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"aria-orientation\", \"horizontal\");\n    setAttributeIfEmpty(el, \"autocomplete\", \"off\");\n    this._orientation = el.getAttribute(\"aria-orientation\") || \"\";\n    if (!this._readonly) {\n      effect(this._watchMinMax.bind(this));\n      effect(this._watchDisabled.bind(this));\n    }\n    effect(this._watchValue.bind(this));\n    this._setAttrs();\n  }\n  onConnect(el) {\n    this._setupPreview();\n  }\n  render() {\n    const {\n      trackClass,\n      trackFillClass,\n      trackProgressClass,\n      thumbContainerClass,\n      thumbClass\n    } = this.$props;\n    return [(() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$h);\n      $$_effect(() => $$_attr($$_root, \"class\", trackClass()));\n      return $$_root;\n    })(), (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ_2$6);\n      $$_effect(() => $$_attr($$_root, \"class\", trackFillClass()));\n      return $$_root;\n    })(), (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ_3$1);\n      $$_effect(() => $$_attr($$_root, \"class\", trackProgressClass()));\n      return $$_root;\n    })(), (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ_4),\n        $$_el = $$_next_element($$_walker);\n      $$_effect(() => $$_attr($$_root, \"class\", thumbContainerClass()));\n      $$_effect(() => $$_attr($$_el, \"class\", thumbClass()));\n      return $$_root;\n    })()];\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  _getStep() {\n    return this.$props.step();\n  }\n  _getKeyStep() {\n    return this.$props.keyStep();\n  }\n  _roundValue(value) {\n    return Math.round(value);\n  }\n  _isDisabled() {\n    return this.$props.disabled();\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  _watchMinMax() {\n    const {\n      min,\n      max\n    } = this.$props;\n    this.$store.min.set(min());\n    this.$store.max.set(max());\n  }\n  _watchDisabled() {\n    if (!this._isDisabled()) return;\n    const {\n      dragging,\n      pointing\n    } = this.$store;\n    dragging.set(false);\n    pointing.set(false);\n  }\n  _watchValue() {\n    const {\n      dragging,\n      value,\n      min,\n      max\n    } = this.$store;\n    if (peek(dragging)) return;\n    value.set(getClampedValue(min(), max(), value(), this._getStep()));\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  _getARIADisabled() {\n    return ariaBool$1(this._isDisabled());\n  }\n  _getARIAValueMin() {\n    return this.$props.min();\n  }\n  _getARIAValueMax() {\n    return this.$props.max();\n  }\n  _getARIAValueNow() {\n    const {\n      value\n    } = this.$store;\n    return Math.round(value());\n  }\n  _getARIAValueText() {\n    const {\n      value,\n      max\n    } = this.$store;\n    return round(value() / max() * 100, 2) + \"%\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Attributes\n  // -------------------------------------------------------------------------------------------\n  _setAttrs() {\n    const {\n        disabled\n      } = this.$props,\n      {\n        dragging,\n        interactive,\n        pointing\n      } = this.$store;\n    this.setAttributes({\n      disabled,\n      \"data-dragging\": dragging,\n      \"data-pointing\": pointing,\n      \"data-interactive\": interactive,\n      \"aria-disabled\": this._getARIADisabled.bind(this),\n      \"aria-valuemin\": this._getARIAValueMin.bind(this),\n      \"aria-valuemax\": this._getARIAValueMax.bind(this),\n      \"aria-valuenow\": this._getARIAValueNow.bind(this),\n      \"aria-valuetext\": this._getARIAValueText.bind(this),\n      \"data-styled\": this._isStyled.bind(this),\n      \"data-media-slider\": true\n    });\n    effect(this._watchCSSVars.bind(this));\n  }\n  _isStyled() {\n    return !!this.$props.trackClass();\n  }\n  _watchCSSVars() {\n    const {\n      fillPercent,\n      pointerPercent\n    } = this.$store;\n    this._updateSliderVars(round(fillPercent(), 3), round(pointerPercent(), 3));\n  }\n  _updateSliderVars = animationFrameThrottle((fillPercent, pointerPercent) => {\n    this.el?.style.setProperty(\"--slider-fill-percent\", fillPercent + \"%\");\n    this.el?.style.setProperty(\"--slider-pointer-percent\", pointerPercent + \"%\");\n  });\n  // -------------------------------------------------------------------------------------------\n  // Preview\n  // -------------------------------------------------------------------------------------------\n  _preview = null;\n  _setupPreview() {\n    this._preview = this.el.querySelector('[slot=\"preview\"]');\n    if (!this._preview) return;\n    effect(this._watchPreview.bind(this));\n    Promise.resolve().then(function () {\n      return preview;\n    }).then(({\n      setupPreviewStyles\n    }) => {\n      setupPreviewStyles(this._preview, this._orientation);\n    });\n  }\n  _watchPreview() {\n    if (this._isDisabled() || !this._preview) return;\n    window.requestAnimationFrame(this._onPreviewResize);\n    const observer = new ResizeObserver(this._onPreviewResize);\n    observer.observe(this._preview);\n    return () => observer.disconnect();\n  }\n  _onPreviewResize = animationFrameThrottle(() => {\n    if (!this._preview) return;\n    const rect = this._preview.getBoundingClientRect();\n    setStyle(this._preview, \"--computed-width\", rect.width + \"px\");\n    setStyle(this._preview, \"--computed-height\", rect.height + \"px\");\n  });\n  // -------------------------------------------------------------------------------------------\n  // Events\n  // -------------------------------------------------------------------------------------------\n  _onValueChange(event) {}\n  _onDragStart(event) {}\n  _onDragEnd(event) {}\n  _onDragValueChange(event) {}\n}\nconst $$_templ$g = /* @__PURE__ */$$_create_template(`<!$><img part=\"img\" loading=\"eager\" decoding=\"async\" aria-hidden=\"true\" />`);\nclass Thumbnail extends Component {\n  static el = defineElement({\n    tagName: \"media-thumbnail\",\n    props: {\n      time: 0\n    }\n  });\n  _media;\n  _img = null;\n  _coords = null;\n  _styleResets = [];\n  _src = signal(\"\");\n  _loaded = signal(false);\n  _activeCue = signal(null);\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onAttach() {\n    this.setAttributes({\n      \"data-loading\": this._isLoading.bind(this),\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  onConnect() {\n    effect(this._onLoadStart.bind(this));\n    effect(this._onFindActiveCue.bind(this));\n    effect(this._onResolveThumbnail.bind(this));\n  }\n  _onLoadStart() {\n    this._src();\n    this._media.$store.thumbnails();\n    this._loaded.set(false);\n  }\n  _onLoaded() {\n    this._loaded.set(true);\n    this._requestResize();\n  }\n  _isLoading() {\n    return !this._isHidden() && !this._loaded();\n  }\n  _isHidden() {\n    const {\n      duration,\n      thumbnailCues\n    } = this._media.$store;\n    return !Number.isFinite(duration()) || thumbnailCues().length === 0;\n  }\n  _onFindActiveCue() {\n    const {\n        time\n      } = this.$props,\n      {\n        duration,\n        thumbnailCues\n      } = this._media.$store,\n      _cues = thumbnailCues(),\n      _time = time();\n    if (!_cues || !Number.isFinite(duration())) {\n      this._activeCue.set(null);\n      return;\n    }\n    this._activeCue.set(findActiveCue(_time, _cues));\n  }\n  _onImgRef(el) {\n    this._img = el;\n  }\n  _onResolveThumbnail() {\n    const activeCue = this._activeCue(),\n      thumbnails = peek(this._media.$store.thumbnails);\n    if (!thumbnails || !activeCue) {\n      this._src.set(\"\");\n      this._resetStyles();\n      return;\n    }\n    const [_src, _coords = \"\"] = (activeCue.text || \"\").split(\"#\");\n    this._coords = this._resolveThumbnailCoords(_coords);\n    if (!this._coords) {\n      this._resetStyles();\n      return;\n    }\n    this._src.set(this._resolveThumbnailSrc(thumbnails, _src));\n    this._requestResize();\n  }\n  _resolveThumbnailSrc(baseURL, src) {\n    return !/https?:/.test(src) ? `${baseURL.split(\"/\").slice(0, -1).join(\"/\")}${src.replace(/^\\/?/, \"/\")}`.replace(/^\\/\\//, \"/\") : src;\n  }\n  _resolveThumbnailCoords(coords) {\n    const [props, values] = coords.split(\"=\"),\n      resolvedCoords = {},\n      coordValues = values?.split(\",\");\n    if (!props || !values) return null;\n    for (let i = 0; i < props.length; i++) resolvedCoords[props[i]] = +coordValues[i];\n    return resolvedCoords;\n  }\n  _requestResize = animationFrameThrottle(this._resize.bind(this));\n  _resize() {\n    if (!this._img || !this._coords || !this.el) return;\n    const {\n        w,\n        h,\n        x,\n        y\n      } = this._coords,\n      {\n        maxWidth,\n        maxHeight,\n        minWidth,\n        minHeight\n      } = getComputedStyle(this.el),\n      minRatio = Math.max(parseInt(minWidth) / w, parseInt(minHeight) / h),\n      maxRatio = Math.min(parseInt(maxWidth) / w, parseInt(maxHeight) / h),\n      scale = maxRatio < 1 ? maxRatio : minRatio > 1 ? minRatio : 1;\n    this._style(this.el, \"--thumbnail-width\", `${w * scale}px`);\n    this._style(this.el, \"--thumbnail-height\", `${h * scale}px`);\n    this._style(this._img, \"width\", `${this._img.naturalWidth * scale}px`);\n    this._style(this._img, \"height\", `${this._img.naturalHeight * scale}px`);\n    this._style(this._img, \"transform\", `translate(-${x * scale}px, -${y * scale}px)`);\n  }\n  _style(el, name, value) {\n    el.style.setProperty(name, value);\n    this._styleResets.push(() => el.style.removeProperty(name));\n  }\n  _resetStyles() {\n    for (const reset of this._styleResets) reset();\n    this._styleResets = [];\n  }\n  render() {\n    const {\n      crossorigin\n    } = this._media.$store;\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$g);\n      $$_effect(() => $$_attr($$_root, \"src\", this._src()));\n      $$_effect(() => $$_attr($$_root, \"crossorigin\", crossorigin()));\n      $$_listen($$_root, \"load\", this._onLoaded.bind(this));\n      $$_ref($$_root, this._onImgRef.bind(this));\n      return $$_root;\n    })();\n  }\n}\nconst $$_templ$f = /* @__PURE__ */$$_create_template(`<!$><media-thumbnail part=\"thumbnail\" mk-d></media-thumbnail>`);\nclass SliderThumbnail extends Component {\n  static el = defineElement({\n    tagName: \"media-slider-thumbnail\"\n  });\n  static register = [Thumbnail];\n  _media;\n  _slider;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    this._slider = useStore(SliderStoreFactory);\n  }\n  _getTime() {\n    const {\n      duration\n    } = this._media.$store;\n    return this._slider.pointerRate() * duration();\n  }\n  render() {\n    const time = this._getTime.bind(this);\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$f);\n      $$_effect(() => $$_attr($$_root, \"time\", time()));\n      $$_setup_custom_element($$_root);\n      return $$_root;\n    })();\n  }\n}\nconst $$_templ$e = /* @__PURE__ */$$_create_template(`<!$><video muted=\"\" playsinline=\"\" preload=\"auto\" part=\"video\" style=\"max-width: unset\"></video>`);\nclass SliderVideo extends Component {\n  static el = defineElement({\n    tagName: \"media-slider-video\",\n    props: {\n      src: void 0\n    }\n  });\n  _media;\n  _slider;\n  _video = null;\n  _canPlay = signal(false);\n  _error = signal(false);\n  _src;\n  _hidden;\n  onAttach() {\n    this._media = useMedia();\n    this._slider = useStore(SliderStoreFactory);\n    this._src = computed(this._getSrc.bind(this));\n    this._hidden = computed(this._isHidden.bind(this));\n    this.setAttributes({\n      \"data-loading\": this._isLoading.bind(this),\n      \"aria-hidden\": $ariaBool(this._hidden)\n    });\n    effect(this._onSrcChange.bind(this));\n    effect(this._onTimeUpdate.bind(this));\n  }\n  onConnect() {\n    if (this._video.readyState >= 2) this._onCanPlay();\n  }\n  render() {\n    const {\n      crossorigin\n    } = this._media.$store;\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$e);\n      $$_effect(() => $$_attr($$_root, \"src\", this._src()));\n      $$_effect(() => $$_attr($$_root, \"crossorigin\", crossorigin()));\n      $$_listen($$_root, \"canplay\", this._onCanPlay.bind(this));\n      $$_listen($$_root, \"error\", this._onError.bind(this));\n      $$_ref($$_root, this._setVideo.bind(this));\n      return $$_root;\n    })();\n  }\n  _getSrc() {\n    const {\n      canLoad\n    } = this._media.$store;\n    return canLoad() ? this.$props.src() : null;\n  }\n  _isLoading() {\n    return !this._canPlay() && !this._hidden();\n  }\n  _isHidden() {\n    const {\n      duration\n    } = this._media.$store;\n    return !!this._error() || !this._canPlay() || !Number.isFinite(duration());\n  }\n  _onSrcChange() {\n    this._src();\n    this._canPlay.set(false);\n    this._error.set(false);\n  }\n  _onCanPlay(event) {\n    this._canPlay.set(true);\n    this.dispatch(\"can-play\", {\n      trigger: event\n    });\n  }\n  _onError(event) {\n    this._error.set(true);\n    this.dispatch(\"error\", {\n      trigger: event\n    });\n  }\n  _onTimeUpdate() {\n    const {\n      duration\n    } = this._media.$store;\n    const {\n      pointerRate\n    } = this._slider;\n    if (this._canPlay() && this._video && Number.isFinite(duration()) && Number.isFinite(pointerRate())) {\n      this._video.currentTime = pointerRate() * duration();\n    }\n  }\n  _setVideo(el) {\n    this._video = el;\n  }\n}\nfunction padNumberWithZeroes(num, expectedLength) {\n  const str = String(num);\n  const actualLength = str.length;\n  const shouldPad = actualLength < expectedLength;\n  if (shouldPad) {\n    const padLength = expectedLength - actualLength;\n    const padding = `0`.repeat(padLength);\n    return `${padding}${num}`;\n  }\n  return str;\n}\nfunction parseTime(duration) {\n  const hours = Math.trunc(duration / 3600);\n  const minutes = Math.trunc(duration % 3600 / 60);\n  const seconds = Math.trunc(duration % 60);\n  const fraction = Number((duration - Math.trunc(duration)).toPrecision(3));\n  return {\n    hours,\n    minutes,\n    seconds,\n    fraction\n  };\n}\nfunction formatTime(duration, shouldPadHours = false, shouldPadMinutes = false, shouldAlwaysShowHours = false) {\n  const {\n    hours,\n    minutes,\n    seconds\n  } = parseTime(duration);\n  const paddedHours = shouldPadHours ? padNumberWithZeroes(hours, 2) : hours;\n  const paddedMinutes = shouldPadMinutes ? padNumberWithZeroes(minutes, 2) : minutes;\n  const paddedSeconds = padNumberWithZeroes(seconds, 2);\n  if (hours > 0 || shouldAlwaysShowHours) {\n    return `${paddedHours}:${paddedMinutes}:${paddedSeconds}`;\n  }\n  return `${paddedMinutes}:${paddedSeconds}`;\n}\nfunction formatSpokenTime(duration) {\n  const spokenParts = [];\n  const {\n    hours,\n    minutes,\n    seconds\n  } = parseTime(duration);\n  if (hours > 0) {\n    spokenParts.push(`${hours} hour`);\n  }\n  if (minutes > 0) {\n    spokenParts.push(`${minutes} min`);\n  }\n  if (seconds > 0 || spokenParts.length === 0) {\n    spokenParts.push(`${seconds} sec`);\n  }\n  return spokenParts.join(\" \");\n}\nconst $$_templ$d = /* @__PURE__ */$$_create_template(`<!$><span><!$></span>`);\nclass SliderValue extends Component {\n  static el = defineElement({\n    tagName: \"media-slider-value\",\n    props: {\n      type: \"current\",\n      format: void 0,\n      showHours: false,\n      padHours: false,\n      padMinutes: false,\n      decimalPlaces: 2\n    }\n  });\n  _format;\n  _text;\n  _slider;\n  onAttach() {\n    this._slider = useStore(SliderStoreFactory);\n    this._format = useContext(sliderValueFormatContext);\n    this._text = computed(this._getText.bind(this));\n  }\n  _getText() {\n    const {\n      type,\n      format,\n      decimalPlaces,\n      padHours,\n      padMinutes,\n      showHours\n    } = this.$props;\n    const {\n      value: sliderValue,\n      pointerValue,\n      min,\n      max\n    } = this._slider;\n    const value = type() === \"current\" ? sliderValue() : pointerValue();\n    if (format() === \"percent\") {\n      const range = max() - min();\n      const percent = value / range * 100;\n      return (this._format.percent ?? round)(percent, decimalPlaces()) + \"\\uFE6A\";\n    } else if (format() === \"time\") {\n      return (this._format.time ?? formatTime)(value, padHours(), padMinutes(), showHours());\n    } else {\n      return this._format.value?.(value) ?? value.toFixed(2);\n    }\n  }\n  render() {\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$d),\n        $$_expr = $$_walker.nextNode();\n      $$_insert_at_marker_lite($$_expr, this._text);\n      return $$_root;\n    })();\n  }\n}\nclass VolumeSlider extends Slider {\n  static el = defineElement({\n    tagName: \"media-volume-slider\",\n    props: {\n      ...sliderProps,\n      min: defineProp({\n        value: 0,\n        attribute: false\n      }),\n      max: defineProp({\n        value: 100,\n        attribute: false\n      }),\n      value: defineProp({\n        value: 100,\n        attribute: false\n      })\n    },\n    store: SliderStoreFactory\n  });\n  _readonly = true;\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"aria-label\", \"Media volume\");\n    super.onAttach(el);\n    {\n      canChangeVolume().then(canSet => {\n        if (!canSet) setAttribute(el, \"aria-hidden\", \"true\");\n      });\n    }\n    effect(this._watchVolume.bind(this));\n  }\n  _watchVolume() {\n    const {\n      muted,\n      volume\n    } = this._media.$store;\n    const newValue = muted() ? 0 : volume() * 100;\n    this.$store.value.set(newValue);\n    this.dispatch(\"value-change\", {\n      detail: newValue\n    });\n  }\n  _throttleVolumeChange = functionThrottle(this._onVolumeChange.bind(this), 25);\n  _onVolumeChange(event) {\n    if (!event.trigger) return;\n    const mediaVolume = round(event.detail / 100, 3);\n    this._media.remote.changeVolume(mediaVolume, event);\n  }\n  _onValueChange(event) {\n    this._throttleVolumeChange(event);\n  }\n  _onDragValueChange(event) {\n    this._throttleVolumeChange(event);\n  }\n  _getARIAValueMin() {\n    return 0;\n  }\n  _getARIAValueMax() {\n    return 100;\n  }\n}\nclass ClassManager {\n  _root;\n  _observer;\n  _map = /* @__PURE__ */new Map();\n  _classes = signal([]);\n  constructor(el) {\n    this._root = el.firstChild;\n    this._observer = new MutationObserver(this._onMutation.bind(this));\n    this._observer.observe(this._root, {\n      subtree: true,\n      childList: true\n    });\n    effect(this._watch.bind(this));\n    onDispose(this._destroy.bind(this));\n  }\n  _onMutation(records) {\n    const selector = Array.from(this._map.keys()).join(\",\");\n    for (const record of records) {\n      for (const node of record.addedNodes) {\n        if (isDOMElement(node) && node.matches(selector)) this._requestUpdate();\n      }\n    }\n  }\n  _observe(selector, $class) {\n    this._map.set(selector, $class);\n    this._classes.set(c => [...c, $class]);\n    return this;\n  }\n  _requestUpdate = animationFrameThrottle(this._update.bind(this));\n  _update() {\n    for (const [selector, classes] of this._map) {\n      const _class = peek(classes);\n      for (const el of this._root.querySelectorAll(selector)) {\n        setAttribute(el, \"class\", _class);\n      }\n    }\n  }\n  _watch() {\n    for (const c of this._classes()) c();\n    this._requestUpdate();\n  }\n  _destroy() {\n    this._classes.set([]);\n    this._map.clear();\n    this._observer.disconnect();\n  }\n}\nconst $$_templ$c = /* @__PURE__ */$$_create_template(`<div part=\"chapters\"></div>`),\n  $$_templ_2$5 = /* @__PURE__ */$$_create_template(`<div part=\"chapter-container\"><div part=\"chapter\"><div part=\"track\"></div><div part=\"track track-fill\" style=\"width: 0%\"></div><div part=\"track track-progress\" style=\"width: 0%\"></div></div></div>`);\nclass SliderChaptersRenderer {\n  constructor(_media, _slider, _onChange) {\n    this._media = _media;\n    this._slider = _slider;\n    this._onChange = _onChange;\n  }\n  _chapters = [];\n  _refs = [];\n  _activeChapterIndex = 0;\n  _bufferedChapterIndex = 0;\n  render(cues, $class) {\n    return cues?.length ? $$_peek(() => (() => {\n      const $$_root = $$_clone($$_templ$c);\n      $$_effect(() => $$_attr($$_root, \"class\", $class()));\n      $$_insert_lite($$_root, () => this._renderChapters(cues));\n      return $$_root;\n    })()) : null;\n  }\n  _renderChapters(cues) {\n    this._chapters = this._fillChapterGaps(cues);\n    const firstChapter = this._chapters[0];\n    this._onChange(firstChapter.startTime === 0 ? firstChapter.text : \"\");\n    for (let i = 0; i < this._chapters.length; i++) this._refs.push(this._renderChapter());\n    this._updateContainerWidths();\n    effect(this._watchFillPercent.bind(this));\n    effect(this._watchPointerPercent.bind(this));\n    effect(this._watchBufferedPercent.bind(this));\n    onDispose(() => {\n      this._refs = [];\n      this._activeChapterIndex = 0;\n      this._bufferedChapterIndex = 0;\n    });\n    return this._refs;\n  }\n  _renderChapter() {\n    return $$_clone($$_templ_2$5);\n  }\n  _getChapterTrackFill(container) {\n    return container.firstChild.firstChild.nextSibling;\n  }\n  _getChapterTrackProgress(container) {\n    return container.firstChild.lastChild;\n  }\n  _getChaptersEndTime() {\n    return this._chapters[this._chapters.length - 1].endTime;\n  }\n  _updateContainerWidths() {\n    let cue,\n      endTime = this._getChaptersEndTime();\n    for (let i = 0; i < this._chapters.length; i++) {\n      cue = this._chapters[i];\n      this._refs[i].style.width = round((cue.endTime - cue.startTime) / endTime * 100, 3) + \"%\";\n    }\n  }\n  _watchFillPercent() {\n    let {\n        fillPercent,\n        value,\n        pointing\n      } = this._slider,\n      currentChapter = this._chapters[this._activeChapterIndex],\n      activeIndex = this._findActiveChapterIndex(currentChapter.startTime <= peek(value) ? this._activeChapterIndex : 0, fillPercent());\n    if (activeIndex > this._activeChapterIndex) {\n      this._updateTrackFillWidths(this._activeChapterIndex, activeIndex, \"100%\");\n    } else if (activeIndex < this._activeChapterIndex) {\n      this._updateTrackFillWidths(activeIndex + 1, this._activeChapterIndex + 1, \"0%\");\n    }\n    if (!peek(pointing) && this._activeChapterIndex !== activeIndex) {\n      this._onChange(this._chapters[activeIndex].text);\n    }\n    let trackFill = this._getChapterTrackFill(this._refs[activeIndex]),\n      percent = this._calcChapterPercent(this._chapters[activeIndex], fillPercent()) + \"%\";\n    if (trackFill.style.width !== percent) trackFill.style.width = percent;\n    this._activeChapterIndex = activeIndex;\n  }\n  _watchPointerPercent() {\n    let {\n      pointing,\n      pointerPercent\n    } = this._slider;\n    if (!pointing()) return;\n    const activeIndex = this._findActiveChapterIndex(0, pointerPercent());\n    this._onChange(this._chapters[activeIndex].text);\n  }\n  _updateTrackFillWidths(start, end, width) {\n    for (let i = start; i < end; i++) this._getChapterTrackFill(this._refs[i]).style.width = width;\n  }\n  _findActiveChapterIndex(startIndex, percent) {\n    let chapterPercent = 0;\n    for (let i = startIndex; i < this._chapters.length; i++) {\n      chapterPercent = this._calcChapterPercent(this._chapters[i], percent);\n      if (chapterPercent >= 0 && chapterPercent < 100) return i;\n    }\n    return 0;\n  }\n  _watchBufferedPercent() {\n    this._updateBufferedPercent(this._bufferedPercent());\n  }\n  _updateBufferedPercent = animationFrameThrottle(bufferedPercent => {\n    let width;\n    for (let i = this._bufferedChapterIndex; i < this._refs.length; i++) {\n      width = this._calcChapterPercent(this._chapters[i], bufferedPercent);\n      this._getChapterTrackProgress(this._refs[i]).style.width = width + \"%\";\n      if (width < 100) {\n        this._bufferedChapterIndex = i;\n        break;\n      }\n    }\n  });\n  _bufferedPercent = computed(this._calcMediaBufferedPercent.bind(this));\n  _calcMediaBufferedPercent() {\n    const {\n      bufferedEnd,\n      duration\n    } = this._media;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1), 3) * 100;\n  }\n  _calcChapterPercent(cue, percent) {\n    const lastChapter = this._chapters[this._chapters.length - 1],\n      startPercent = cue.startTime / lastChapter.endTime * 100,\n      endPercent = cue.endTime / lastChapter.endTime * 100;\n    return Math.max(0, round(percent >= endPercent ? 100 : (percent - startPercent) / (endPercent - startPercent) * 100, 3));\n  }\n  _fillChapterGaps(cues) {\n    const chapters = [];\n    for (let i = 0; i < cues.length - 1; i++) {\n      const currentCue = cues[i],\n        nextCue = cues[i + 1];\n      chapters.push(currentCue);\n      if (nextCue) {\n        const timeDiff = nextCue.startTime - currentCue.endTime;\n        if (timeDiff > 0) {\n          chapters.push(new window.VTTCue(currentCue.endTime, currentCue.endTime + timeDiff, \"\"));\n        }\n      }\n    }\n    chapters.push(cues[cues.length - 1]);\n    return chapters;\n  }\n}\nclass TimeSlider extends Slider {\n  static el = defineElement({\n    tagName: \"media-time-slider\",\n    props: {\n      ...sliderProps,\n      min: defineProp({\n        value: 0,\n        attribute: false\n      }),\n      max: defineProp({\n        value: 100,\n        attribute: false\n      }),\n      value: defineProp({\n        value: 0,\n        attribute: false\n      }),\n      pauseWhileDragging: false,\n      seekingRequestThrottle: 100,\n      chaptersClass: null,\n      chapterContainerClass: null,\n      chapterClass: null\n    },\n    store: SliderStoreFactory\n  });\n  _readonly = true;\n  _swipeGesture = true;\n  _dispatchSeeking;\n  _track = signal(null);\n  _chaptersRenderer;\n  _classManager;\n  constructor(instance) {\n    super(instance);\n    provideContext(sliderValueFormatContext, {\n      value: this._formatValue.bind(this),\n      time: this._formatTime.bind(this)\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"aria-label\", \"Media time\");\n    super.onAttach(el);\n    this._chaptersRenderer = new SliderChaptersRenderer(this._media.$store, this.$store, this._chapterTitle.set);\n    this.setAttributes({\n      \"data-chapters\": this._hasChapters.bind(this)\n    });\n    this.setStyles({\n      \"--media-buffered-percent\": this._calcBufferedPercent.bind(this)\n    });\n    effect(this._watchCurrentTime.bind(this));\n    effect(this._watchSeekingThrottle.bind(this));\n    effect(this._onTrackChange.bind(this));\n    scopedRaf(() => {\n      effect(this._watchPreviewing.bind(this));\n    });\n  }\n  _calcBufferedPercent() {\n    const {\n      bufferedEnd,\n      duration\n    } = this._media.$store;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1) * 100, 3) + \"%\";\n  }\n  _hasChapters() {\n    const {\n      duration\n    } = this._media.$store;\n    this._classManager?._requestUpdate();\n    return this._track()?.cues.length && Number.isFinite(duration()) && duration() > 0;\n  }\n  onConnect(el) {\n    super.onConnect(el);\n    this._onTrackModeChange();\n    listenEvent(this._media.textTracks, \"mode-change\", this._onTrackModeChange.bind(this));\n    const {\n      chapterContainerClass,\n      chapterClass,\n      trackClass,\n      trackFillClass,\n      trackProgressClass\n    } = this.$props;\n    this._classManager = new ClassManager(el)._observe('[part=\"chapter-container\"]', chapterContainerClass)._observe('[part=\"chapter\"]', chapterClass)._observe('[part=\"track\"]', trackClass)._observe('[part~=\"track-fill\"]', trackFillClass)._observe('[part~=\"track-progress\"]', trackProgressClass);\n  }\n  render() {\n    const tracks = super.render(),\n      {\n        chaptersClass\n      } = this.$props;\n    return [$$_computed(() => this._chaptersRenderer.render(this._track()?.cues, chaptersClass)), tracks];\n  }\n  _watchSeekingThrottle() {\n    this._dispatchSeeking = functionThrottle(this._seeking.bind(this), this.$props.seekingRequestThrottle());\n  }\n  _watchCurrentTime() {\n    const {\n        currentTime\n      } = this._media.$store,\n      {\n        value,\n        dragging\n      } = this.$store,\n      newValue = this._timeToPercent(currentTime());\n    if (!peek(dragging)) {\n      value.set(newValue);\n      this.dispatch(\"value-change\", {\n        detail: newValue\n      });\n    }\n  }\n  _watchPreviewing() {\n    const player = this._media.player;\n    player && this._preview && setAttribute(player, \"data-preview\", this.$store.interactive());\n  }\n  _seeking(time, event) {\n    this._media.remote.seeking(time, event);\n  }\n  _seek(time, percent, event) {\n    this._dispatchSeeking.cancel();\n    const {\n      live\n    } = this._media.$store;\n    if (live() && percent >= 99) {\n      this._media.remote.seekToLiveEdge(event);\n      return;\n    }\n    this._media.remote.seek(time, event);\n  }\n  _playingBeforeDragStart = false;\n  _onDragStart(event) {\n    const {\n      pauseWhileDragging\n    } = this.$props;\n    if (pauseWhileDragging()) {\n      const {\n        paused\n      } = this._media.$store;\n      this._playingBeforeDragStart = !paused();\n      this._media.remote.pause(event);\n    }\n  }\n  _onDragValueChange(event) {\n    this._dispatchSeeking(this._percentToTime(event.detail), event);\n  }\n  _onDragEnd(event) {\n    const percent = event.detail;\n    this._seek(this._percentToTime(percent), percent, event);\n    const {\n      pauseWhileDragging\n    } = this.$props;\n    if (pauseWhileDragging() && this._playingBeforeDragStart) {\n      this._media.remote.play(event);\n      this._playingBeforeDragStart = false;\n    }\n  }\n  _onValueChange(event) {\n    const {\n      dragging\n    } = this.$store;\n    if (dragging() || !event.trigger) return;\n    this._onDragEnd(event);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  _getStep() {\n    const value = this.$props.step() / this._media.$store.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  _getKeyStep() {\n    const value = this.$props.keyStep() / this._media.$store.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  _roundValue(value) {\n    return round(value, 3);\n  }\n  _isDisabled() {\n    const {\n      canSeek\n    } = this._media.$store;\n    return super._isDisabled() || !canSeek();\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  _getARIAValueMin() {\n    return 0;\n  }\n  _getARIAValueMax() {\n    return 100;\n  }\n  _getARIAValueText() {\n    const time = this._percentToTime(this.$store.value()),\n      {\n        duration\n      } = this._media.$store;\n    return Number.isFinite(time) ? `${formatSpokenTime(time)} out of ${formatSpokenTime(duration())}` : \"live\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Format\n  // -------------------------------------------------------------------------------------------\n  _percentToTime(percent) {\n    const {\n      duration\n    } = this._media.$store;\n    return Math.round(percent / 100 * duration());\n  }\n  _timeToPercent(time) {\n    const {\n        liveEdge,\n        duration\n      } = this._media.$store,\n      rate = Math.max(0, Math.min(1, liveEdge() ? 1 : Math.min(time, duration()) / duration()));\n    return Number.isNaN(rate) ? 0 : Number.isFinite(rate) ? rate * 100 : 100;\n  }\n  _formatValue(percent) {\n    const time = this._percentToTime(percent),\n      {\n        live,\n        duration\n      } = this._media.$store;\n    return Number.isFinite(time) ? (live() ? time - duration() : time).toFixed(0) : \"LIVE\";\n  }\n  _formatTime(percent, padHours, padMinutes, showHours) {\n    const time = this._percentToTime(percent),\n      {\n        live,\n        duration\n      } = this._media.$store,\n      value = live() ? time - duration() : time;\n    return Number.isFinite(time) ? `${value < 0 ? \"-\" : \"\"}${formatTime(Math.abs(value), padHours, isNull(padMinutes) ? Math.abs(value) >= 3600 : padMinutes, showHours)}` : \"LIVE\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Chapters\n  // -------------------------------------------------------------------------------------------\n  _chapterTitleEl = null;\n  _chapterTitle = signal(\"\");\n  _onTrackModeChange() {\n    onTrackChapterChange(this._media.textTracks, peek(this._track), this._track.set);\n  }\n  _onTrackChange() {\n    this._track();\n    this._chapterTitleEl = this.el?.querySelector('[part=\"chapter-title\"]') ?? null;\n    if (!this._chapterTitleEl) return;\n    effect(this._onChapterTitleChange.bind(this));\n    return () => {\n      this._chapterTitleEl.textContent = \"\";\n      this._chapterTitleEl = null;\n    };\n  }\n  _onChapterTitleChange() {\n    this._chapterTitleEl.textContent = this._chapterTitle();\n  }\n}\nconst menuContext = createContext();\nconst FOCUSABLE_ELEMENTS_SELECTOR = /* @__PURE__ */[\"a[href]\", \"[tabindex]\", \"input\", \"select\", \"button\"].map(selector => `${selector}:not([aria-hidden])`).join(\",\");\nconst VALID_KEYS = /* @__PURE__ */new Set([\"Escape\", \"Tab\", \"ArrowUp\", \"ArrowDown\", \"Home\", \"PageUp\", \"End\", \"PageDown\", \"Enter\", \" \"]);\nclass MenuFocusController {\n  constructor(_delegate) {\n    this._delegate = _delegate;\n  }\n  _index = 0;\n  _el = null;\n  _elements = [];\n  get _items() {\n    return this._elements;\n  }\n  _attach(el) {\n    listenEvent(el, \"focus\", this._onFocus.bind(this));\n    this._el = el;\n  }\n  _listen() {\n    if (!this._el) return;\n    this._update();\n    listenEvent(this._el, \"keyup\", this._onKeyUp.bind(this));\n    listenEvent(this._el, \"keydown\", this._onKeyDown.bind(this));\n    onDispose(() => {\n      this._index = 0;\n      this._elements = [];\n    });\n  }\n  _update() {\n    this._index = 0;\n    this._elements = this._getFocusableElements();\n  }\n  _scroll(index = this._findActiveIndex()) {\n    const element = this._elements[index],\n      container = this._delegate._getScrollContainer();\n    if (element && container) {\n      requestAnimationFrame(() => {\n        container.scrollTop = element.offsetTop - container.offsetHeight / 2 + element.offsetHeight / 2;\n      });\n    }\n  }\n  _focusAt(index) {\n    this._index = index;\n    this._elements[index]?.focus();\n    this._scroll(index);\n  }\n  _findActiveIndex() {\n    return this._elements.findIndex(el => el.getAttribute(\"aria-checked\") === \"true\");\n  }\n  _onFocus() {\n    setTimeout(() => {\n      const index = this._findActiveIndex();\n      this._focusAt(index >= 0 ? index : 0);\n    }, 100);\n  }\n  _onKeyUp(event) {\n    if (!VALID_KEYS.has(event.key)) return;\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  _onKeyDown(event) {\n    if (!VALID_KEYS.has(event.key)) return;\n    event.stopPropagation();\n    event.preventDefault();\n    switch (event.key) {\n      case \"Escape\":\n        this._delegate._closeMenu(event);\n        break;\n      case \"Tab\":\n        this._focusAt(this._nextIndex(event.shiftKey ? -1 : 1));\n        break;\n      case \"ArrowUp\":\n        this._focusAt(this._nextIndex(-1));\n        break;\n      case \"ArrowDown\":\n        this._focusAt(this._nextIndex(1));\n        break;\n      case \"Home\":\n      case \"PageUp\":\n        this._focusAt(0);\n        break;\n      case \"End\":\n      case \"PageDown\":\n        this._focusAt(this._elements.length - 1);\n        break;\n    }\n  }\n  _nextIndex(delta) {\n    let index = this._index;\n    do {\n      index = (index + delta + this._elements.length) % this._elements.length;\n    } while (this._elements[index].offsetParent === null);\n    return index;\n  }\n  _getFocusableElements() {\n    if (!this._el) return [];\n    const focusableElements = this._el.querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR),\n      elements = [];\n    const is = node => node.hasAttribute(\"data-media-menu-items\");\n    for (const el of focusableElements) {\n      if (el instanceof HTMLElement && el.offsetParent !== null &&\n      // does not have display: none\n      isElementParent(this._el, el, is)) {\n        elements.push(el);\n      }\n    }\n    return elements;\n  }\n}\nvar __defProp$2 = Object.defineProperty;\nvar __getOwnPropDesc$2 = Object.getOwnPropertyDescriptor;\nvar __decorateClass$2 = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$2(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--) if (decorator = decorators[i]) result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result) __defProp$2(target, key, result);\n  return result;\n};\nlet idCount = 0;\nclass Menu extends Component {\n  static el = defineElement({\n    tagName: \"media-menu\",\n    props: {\n      position: null\n    }\n  });\n  _media;\n  _menuId;\n  _menuButtonId;\n  _expanded = signal(false);\n  _disabled = signal(false);\n  _buttonDisabled = signal(false);\n  _parentMenu;\n  _submenus = /* @__PURE__ */new Set();\n  _menuButton = null;\n  _menuItems = null;\n  _menuObserver = null;\n  _focus;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    const currentIdCount = ++idCount;\n    this._menuId = `media-menu-${currentIdCount}`;\n    this._menuButtonId = `media-menu-button-${currentIdCount}`;\n    if (hasProvidedContext(menuContext)) {\n      this._parentMenu = useContext(menuContext);\n    }\n    this._focus = new MenuFocusController({\n      _getScrollContainer: this._findScrollContainer.bind(this),\n      _closeMenu: this.close.bind(this)\n    });\n    provideContext(menuContext, {\n      _expanded: this._expanded,\n      _hint: signal(\"\"),\n      _disable: this._disable.bind(this),\n      _attachMenuButton: this._attachMenuButton.bind(this),\n      _attachMenuItems: this._attachMenuItems.bind(this),\n      _attachObserver: this._attachObserver.bind(this),\n      _disableMenuButton: this._disableMenuButton.bind(this),\n      _addSubmenu: this._addSubmenu.bind(this)\n    });\n  }\n  onAttach(el) {\n    const {\n      position\n    } = this.$props;\n    this.setAttributes({\n      position,\n      \"data-open\": this._expanded,\n      \"data-submenu\": !!this._parentMenu,\n      \"data-disabled\": this._isDisabled.bind(this),\n      \"data-media-menu\": true\n    });\n  }\n  onConnect(el) {\n    if (!this._parentMenu) {\n      effect(this._watchBreakpoint.bind(this));\n    }\n    effect(this._watchExpanded.bind(this));\n    this._parentMenu?._addSubmenu(el);\n    requestAnimationFrame(() => this._onResize());\n  }\n  onDestroy() {\n    this._removePopupMenu();\n    this._menuButton = null;\n    this._menuItems = null;\n    this._menuObserver = null;\n  }\n  _removePopupMenu() {\n    if (!this._menuItems || this.el?.contains(this._menuItems)) return;\n    const menu = this._menuItems?.parentElement;\n    this.el.append(this._menuItems);\n    if (menu?.localName === \"media-menu\") {\n      menu.destroy();\n      menu.remove();\n    }\n  }\n  _watchBreakpoint() {\n    if (!this.el) return;\n    const {\n        breakpointX,\n        breakpointY,\n        viewType,\n        orientation,\n        fullscreen\n      } = this._media.$store,\n      popup = viewType() === \"audio\" ? breakpointX() === \"sm\" : breakpointY() === \"sm\";\n    if (!this._menuItems || this._parentMenu) return;\n    setAttribute(this.el, \"data-popup\", popup);\n    setAttribute(this.el, \"data-popup-wide\", popup && orientation() === \"landscape\");\n    if (popup && !fullscreen()) {\n      if (this.el.contains?.(this._menuItems)) {\n        const menu = this.el.cloneNode();\n        menu.appendChild(this._menuItems);\n        requestAnimationFrame(() => {\n          if (!this.el) return;\n          const mediaRing = \"--media-focus-ring\",\n            mediaRingValue = getComputedStyle(this.el).getPropertyValue(mediaRing);\n          if (mediaRingValue) setStyle(menu, mediaRing, mediaRingValue);\n        });\n        scoped(() => {\n          document.body.append(menu);\n        }, this._media.scope);\n      }\n    }\n    this._onResize();\n    return () => this._removePopupMenu();\n  }\n  _watchExpanded() {\n    const expanded = this._isExpanded();\n    this._onResize();\n    this._updateMenuItemsHidden(expanded);\n    if (!expanded) return;\n    this._focus._listen();\n    const closeTarget = this._getCloseTarget();\n    if (closeTarget) {\n      onPress(closeTarget, this._onCloseTargetPress.bind(this));\n    }\n    this.listen(\"pointerup\", this._onPointerUp.bind(this));\n    listenEvent(window, \"pointerup\", this._onWindowPointerUp.bind(this));\n  }\n  _attachMenuButton(el) {\n    const isMenuItem = !!this._parentMenu,\n      isExpanded = this._isExpanded.bind(this),\n      isARIAExpanded = $ariaBool(isExpanded),\n      isARIADisabled = $ariaBool(this._isDisabled.bind(this));\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitem\" : \"button\");\n    setAttribute(el, \"id\", this._menuButtonId);\n    setAttribute(el, \"aria-controls\", this._menuId);\n    setAttribute(el, \"aria-haspopup\", \"true\");\n    effect(() => {\n      setAttribute(el, \"aria-disabled\", isARIADisabled());\n      setAttribute(el, \"aria-expanded\", isARIAExpanded());\n      if (!isMenuItem) setAttribute(el, \"aria-pressed\", isARIAExpanded());\n      setAttribute(el, \"data-pressed\", isExpanded());\n    });\n    setAttribute(el, \"data-media-button\", !isMenuItem);\n    setAttribute(el, \"data-media-menu-button\", \"\");\n    onPress(el, this._onMenuButtonPress.bind(this));\n    this._menuButton = el;\n  }\n  _attachMenuItems(el) {\n    setAttributeIfEmpty(el, \"role\", \"menu\");\n    setAttributeIfEmpty(el, \"tabindex\", \"-1\");\n    setAttribute(el, \"id\", this._menuId);\n    setAttribute(el, \"aria-describedby\", this._menuButtonId);\n    setAttribute(el, \"data-media-menu-items\", \"\");\n    this._menuItems = el;\n    this._focus._attach(el);\n    this._watchBreakpoint();\n    this._updateMenuItemsHidden(peek(this._expanded));\n  }\n  _attachObserver(observer) {\n    this._menuObserver = observer;\n  }\n  _updateMenuItemsHidden(expanded) {\n    if (this._menuItems) setAttribute(this._menuItems, \"aria-hidden\", ariaBool$1(!expanded));\n  }\n  _disableMenuButton(disabled) {\n    this._buttonDisabled.set(disabled);\n  }\n  _onMenuButtonPress(event) {\n    if (this._parentMenu) event.stopPropagation();\n    if (this._isDisabled()) return;\n    this._expanded.set(expanded => !expanded);\n    this._changeIdleTracking();\n    tick();\n    if (isKeyboardEvent(event)) {\n      this._menuItems?.focus();\n    }\n    this._onChange(event);\n  }\n  _onChange(trigger) {\n    const expanded = peek(this._expanded);\n    this.dispatch(expanded ? \"open\" : \"close\", {\n      trigger\n    });\n    if (expanded) {\n      if (!this._parentMenu) {\n        this._media.activeMenu?.close(trigger);\n        this._media.activeMenu = this;\n      }\n      this._menuObserver?._onOpen?.(trigger);\n    } else {\n      if (!this._parentMenu) {\n        setTimeout(() => {\n          for (const el of this._submenus) el.close(trigger);\n        }, 300);\n        this._media.activeMenu = null;\n      }\n      this._menuObserver?._onClose?.(trigger);\n    }\n    if (expanded && !isKeyboardEvent(trigger)) {\n      requestAnimationFrame(() => {\n        this._focus._update();\n        setTimeout(() => {\n          this._focus._scroll();\n        }, 100);\n      });\n    }\n  }\n  _isExpanded() {\n    return !this._isDisabled() && this._expanded();\n  }\n  _isDisabled() {\n    return this._disabled() || this._buttonDisabled();\n  }\n  _disableBind = this._disable.bind(this);\n  _disable(disabled) {\n    this._disabled.set(disabled);\n  }\n  _onPointerUp(event) {\n    event.stopPropagation();\n  }\n  _onWindowPointerUp() {\n    if (this._parentMenu) return setTimeout(this.close.bind(this), 800);else this.close();\n  }\n  _onCloseTargetPress(event) {\n    event.stopPropagation();\n    this.close(event);\n  }\n  _getCloseTarget() {\n    const target = this.el.querySelector('[slot=\"close-target\"]');\n    return isElementParent(this.el, target) ? target : null;\n  }\n  _findScrollContainer() {\n    if (!this._parentMenu) {\n      return this._menuItems;\n    } else {\n      let el = this.el;\n      while (el && el.tagName !== \"media-menu\" && el.hasAttribute(\"data-submenu\")) {\n        el = el.parentNode;\n      }\n      return el;\n    }\n  }\n  _changeIdleTracking(trigger) {\n    if (this._parentMenu) return;\n    if (this._expanded()) this._media.remote.pauseUserIdle(trigger);else this._media.remote.resumeUserIdle(trigger);\n  }\n  _addSubmenu(el) {\n    this._submenus.add(el);\n    listenEvent(el, \"open\", this._onSubmenuOpenBind);\n    listenEvent(el, \"close\", this._onSubmenuCloseBind);\n    onDispose(this._removeSubmenuBind);\n  }\n  _removeSubmenuBind = this._removeSubmenu.bind(this);\n  _removeSubmenu(el) {\n    this._submenus.delete(el);\n  }\n  _onSubmenuOpenBind = this._onSubmenuOpen.bind(this);\n  _onSubmenuOpen(event) {\n    for (const el of this._submenus) {\n      if (el !== event.target) el.setAttribute(\"aria-hidden\", \"true\");\n    }\n    this._onResize();\n  }\n  _onSubmenuCloseBind = this._onSubmenuClose.bind(this);\n  _onSubmenuClose() {\n    for (const el of this._submenus) el.removeAttribute(\"aria-hidden\");\n    this._onResize();\n  }\n  _onResize() {\n    if (!this._menuItems || false) return;\n    let style = getComputedStyle(this._menuItems),\n      height = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);\n    let children = [...this._menuItems.children];\n    if (children[0]?.localName === \"shadow-root\") {\n      children.push(...children[0].children);\n    }\n    for (const child of children) {\n      height += child.offsetHeight;\n    }\n    requestAnimationFrame(() => {\n      if (!this._menuItems) return;\n      setAttribute(this._menuItems, \"data-resizing\", \"\");\n      setTimeout(() => {\n        if (!this._menuItems) return;\n        setAttribute(this._menuItems, \"data-resizing\", false);\n      }, 250);\n      setStyle(this._menuItems, \"--menu-height\", height + \"px\");\n    });\n  }\n  open(trigger) {\n    if (peek(this._expanded)) return;\n    this._expanded.set(true);\n    tick();\n    this._onChange(trigger);\n    if (isKeyboardEvent(trigger)) {\n      this._menuItems?.focus();\n    }\n    this._changeIdleTracking(trigger);\n  }\n  close(trigger) {\n    if (!peek(this._expanded)) return;\n    this._expanded.set(false);\n    tick();\n    if (isKeyboardEvent(trigger)) {\n      requestAnimationFrame(() => {\n        this._menuButton?.focus();\n      });\n    }\n    this._onChange(trigger);\n    this._changeIdleTracking(trigger);\n  }\n}\n__decorateClass$2([method], Menu.prototype, \"open\", 1);\n__decorateClass$2([method], Menu.prototype, \"close\", 1);\nclass MenuButton extends Component {\n  static el = defineElement({\n    tagName: \"media-menu-button\",\n    props: {\n      disabled: false\n    }\n  });\n  _menu;\n  constructor(instance) {\n    super(instance);\n    this._menu = useContext(menuContext);\n    new FocusVisibleController(instance);\n    new TooltipController(instance);\n  }\n  onAttach(el) {\n    this._menu._attachMenuButton(el);\n    effect(this._watchDisabled.bind(this));\n  }\n  onConnect(el) {\n    const hint = Array.from(el.querySelectorAll('[slot=\"hint\"]')).pop();\n    if (hint) {\n      effect(() => {\n        const text = this._menu._hint();\n        if (text) hint.textContent = text;\n      });\n    }\n  }\n  _watchDisabled() {\n    this._menu._disableMenuButton(this.$props.disabled());\n  }\n}\nclass MenuItems extends Component {\n  static el = defineElement({\n    tagName: \"media-menu-items\"\n  });\n  _menu;\n  constructor(instance) {\n    super(instance);\n    this._menu = useContext(menuContext);\n    new FocusVisibleController(instance);\n  }\n  onAttach(el) {\n    this._menu._attachMenuItems(el);\n  }\n}\nconst radioGroupContext = createContext();\nvar __defProp$1 = Object.defineProperty;\nvar __getOwnPropDesc$1 = Object.getOwnPropertyDescriptor;\nvar __decorateClass$1 = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$1(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--) if (decorator = decorators[i]) result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result) __defProp$1(target, key, result);\n  return result;\n};\nclass RadioGroup extends Component {\n  static el = defineElement({\n    tagName: \"media-radio-group\",\n    props: {\n      value: \"\"\n    }\n  });\n  _group = /* @__PURE__ */new Set();\n  _value = signal(\"\");\n  get values() {\n    return Array.from(this._group).map(radio => radio._value());\n  }\n  get value() {\n    return this._value();\n  }\n  set value(value) {\n    this._onChange(value);\n  }\n  constructor(instance) {\n    super(instance);\n    provideContext(radioGroupContext, {\n      add: this._addRadio.bind(this),\n      remove: this._removeRadio.bind(this)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    if (!isMenuItem) setAttributeIfEmpty(el, \"role\", \"radiogroup\");\n    this._watchValueProp();\n    this.setAttributes({\n      value: this._value\n    });\n  }\n  onConnect() {\n    effect(this._watchValueProp.bind(this));\n  }\n  onDestroy() {\n    this._group.clear();\n  }\n  _addRadio(radio) {\n    if (this._group.has(radio)) return;\n    this._group.add(radio);\n    radio._onCheck = this._onChangeBind;\n    radio._check(radio._value() === this._value());\n  }\n  _removeRadio(radio) {\n    radio._onCheck = null;\n    this._group.delete(radio);\n  }\n  _watchValueProp() {\n    this._onChange(this.$props.value());\n  }\n  _onChangeBind = this._onChange.bind(this);\n  _onChange(newValue, trigger) {\n    const currentValue = peek(this._value);\n    if (!newValue || newValue === currentValue) return;\n    const currentRadio = this._findRadio(currentValue),\n      newRadio = this._findRadio(newValue);\n    currentRadio?._check(false, trigger);\n    newRadio?._check(true, trigger);\n    this._value.set(newValue);\n    this.dispatch(\"change\", {\n      trigger\n    });\n  }\n  _findRadio(newValue) {\n    for (const radio of this._group) {\n      if (newValue === peek(radio._value)) return radio;\n    }\n    return null;\n  }\n}\n__decorateClass$1([prop], RadioGroup.prototype, \"values\", 1);\n__decorateClass$1([prop], RadioGroup.prototype, \"value\", 1);\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--) if (decorator = decorators[i]) result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result) __defProp(target, key, result);\n  return result;\n};\nconst $$_templ$b = /* @__PURE__ */$$_create_template(`<!$><div part=\"check\"></div>`);\nclass Radio extends Component {\n  static el = defineElement({\n    tagName: \"media-radio\",\n    props: {\n      value: \"\"\n    }\n  });\n  _checked = signal(false);\n  _controller = {\n    _value: this.$props.value,\n    _check: this._check.bind(this),\n    _onCheck: null\n  };\n  get checked() {\n    return this._checked();\n  }\n  constructor(instance) {\n    super(instance);\n    new FocusVisibleController(instance);\n  }\n  onAttach() {\n    effect(this._watchValue.bind(this));\n    this._addToGroup();\n    const isMenuItem = hasProvidedContext(menuContext);\n    this.setAttributes({\n      value: this.$props.value,\n      role: isMenuItem ? \"menuitemradio\" : \"radio\",\n      tabindex: isMenuItem ? -1 : 0,\n      \"aria-checked\": $ariaBool(this._checked)\n    });\n  }\n  onConnect(el) {\n    this._addToGroup();\n    onPress(el, this._onPress.bind(this));\n  }\n  onDisconnect() {\n    const group = useContext(radioGroupContext);\n    group.remove(this._controller);\n  }\n  _addToGroup() {\n    const group = useContext(radioGroupContext);\n    group.add(this._controller);\n  }\n  _watchValue() {\n    const {\n        value\n      } = this.$props,\n      newValue = value();\n    if (peek(this._checked)) {\n      this._controller._onCheck?.(newValue);\n    }\n  }\n  _onPress(event) {\n    if (peek(this._checked)) return;\n    this._checked.set(true);\n    this.dispatch(\"change\", {\n      trigger: event\n    });\n    this._controller._onCheck?.(peek(this.$props.value), event);\n  }\n  _check(value, trigger) {\n    if (peek(this._checked) === value) return;\n    this._checked.set(value);\n    this.dispatch(\"change\", {\n      trigger\n    });\n  }\n  render() {\n    return $$_next_template($$_templ$b);\n  }\n}\n__decorateClass([prop], Radio.prototype, \"checked\", 1);\nconst $$_templ$a = /* @__PURE__ */$$_create_template(`<!$><media-radio-group mk-d><!$></media-radio-group>`),\n  $$_templ_2$4 = /* @__PURE__ */$$_create_template(`<!$><media-radio mk-d><!$></media-radio>`);\nfunction renderRadioGroup(props) {\n  const {\n    value,\n    onChange,\n    radioGroupClass\n  } = props;\n  return (() => {\n    const [$$_root, $$_walker] = $$_create_walker($$_templ$a),\n      $$_expr = $$_walker.nextNode();\n    $$_effect(() => $$_attr($$_root, \"class\", radioGroupClass()));\n    $$_listen($$_root, \"change\", onChange);\n    $$_scoped(() => {\n      $$_insert_at_marker_lite($$_expr, () => renderOptions(props));\n    }, $$_setup_custom_element($$_root, {\n      value\n    }));\n    return $$_root;\n  })();\n}\nfunction renderOptions(props) {\n  const {\n    options\n  } = props;\n  return options().map(option => {\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ_2$4),\n        $$_expr = $$_walker.nextNode();\n      $$_attr($$_root, \"part\", props.part);\n      $$_scoped(() => {\n        $$_insert_at_marker_lite($$_expr, option.content);\n      }, $$_setup_custom_element($$_root, {\n        value: option.value\n      }));\n      return $$_root;\n    })();\n  });\n}\nconst $$_templ$9 = /* @__PURE__ */$$_create_template(`<!$><media-thumbnail part=\"thumbnail\" mk-d></media-thumbnail>`),\n  $$_templ_2$3 = /* @__PURE__ */$$_create_template(`<!$><div part=\"content\"><div part=\"title\"><!$></div><div part=\"start-time\"><!$></div><div part=\"duration\"><!$></div></div>`);\nclass ChaptersMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-chapters-menu-items\",\n    props: {\n      containerClass: null,\n      chapterClass: null,\n      thumbnailClass: null,\n      contentClass: null,\n      titleClass: null,\n      startTimeClass: null,\n      durationClass: null\n    }\n  });\n  static register = [Thumbnail, RadioGroup, Radio];\n  _media;\n  _index = signal(0);\n  _track = signal(null);\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onAttach(el) {\n    super.onAttach(el);\n    this._menu._attachObserver({\n      _onOpen: this._onOpen.bind(this)\n    });\n    this.setAttributes({\n      \"data-thumbnails\": this._hasThumbnails.bind(this)\n    });\n  }\n  _onOpen() {\n    peek(() => this._watchCurrentTime());\n  }\n  onConnect(el) {\n    effect(this._watchCurrentTime.bind(this));\n    effect(this._watchControllerDisabled.bind(this));\n    this._onTrackModeChange();\n    listenEvent(this._media.textTracks, \"mode-change\", this._onTrackModeChange.bind(this));\n    const {\n      chapterClass,\n      thumbnailClass,\n      contentClass,\n      titleClass,\n      startTimeClass,\n      durationClass\n    } = this.$props;\n    new ClassManager(el)._observe('[part=\"chapter\"]', chapterClass)._observe('[part=\"thumbnail\"]', thumbnailClass)._observe('[part=\"content\"]', contentClass)._observe('[part=\"title\"]', titleClass)._observe('[part=\"start-time\"]', startTimeClass)._observe('[part=\"duration\"]', durationClass);\n  }\n  _hasThumbnails() {\n    const {\n      thumbnailCues\n    } = this._media.$store;\n    return thumbnailCues().length > 0;\n  }\n  _watchCurrentTime() {\n    if (!this._menu._expanded()) return;\n    const track = this._track();\n    if (!track) {\n      this._index.set(-1);\n      return;\n    }\n    const {\n        currentTime\n      } = this._media.$store,\n      time = currentTime(),\n      activeCueIndex = track.cues.findIndex(cue => isCueActive(cue, time));\n    this._index.set(activeCueIndex);\n    if (activeCueIndex >= 0) {\n      const cue = track.cues[activeCueIndex],\n        radio = this.el.querySelector(`shadow-root media-radio[aria-checked='true']`),\n        playedPercent = (time - cue.startTime) / (cue.endTime - cue.startTime) * 100;\n      radio && setStyle(radio, \"--played-percent\", round(playedPercent, 3) + \"%\");\n    }\n  }\n  _watchControllerDisabled() {\n    this._menu._disable(this._isDisabled());\n  }\n  _isDisabled() {\n    const track = this._track();\n    return !track || !track.cues.length;\n  }\n  _onChange(event) {\n    if (this._isDisabled() || !event.trigger) return;\n    const index = +event.target.value,\n      cues = this._track()?.cues;\n    if (isNumber(index) && cues?.[index]) {\n      this._index.set(index);\n      this._media.remote.seek(cues[index].startTime, event);\n    }\n  }\n  _onTrackModeChange() {\n    onTrackChapterChange(this._media.textTracks, peek(this._track), this._track.set);\n  }\n  _getValue() {\n    return this._index() + \"\";\n  }\n  _getOptions() {\n    const track = this._track();\n    if (!track) return [];\n    return track.cues.map((cue, i) => ({\n      value: i + \"\",\n      content: () => [(() => {\n        const $$_signal = $$_computed(() => this._hasThumbnails() && (() => {\n          const [$$_root, $$_walker] = $$_create_walker($$_templ$9);\n          $$_setup_custom_element($$_root, {\n            time: cue.startTime\n          });\n          return $$_root;\n        })());\n        $$_signal();\n        return $$_signal;\n      })(), (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ_2$3),\n          $$_expr = $$_walker.nextNode(),\n          $$_expr_2 = $$_walker.nextNode(),\n          $$_expr_3 = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, cue.text);\n        $$_insert_at_marker_lite($$_expr_2, () => formatTime(cue.startTime, false, cue.startTime >= 3600));\n        $$_insert_at_marker_lite($$_expr_3, () => formatSpokenTime(cue.endTime - cue.startTime));\n        return $$_root;\n      })()]\n    }));\n  }\n  render() {\n    const {\n      containerClass\n    } = this.$props;\n    return renderRadioGroup({\n      part: \"chapter\",\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass: containerClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\nconst $$_templ$8 = /* @__PURE__ */$$_create_template(`<!$><span part=\"label\"><!$></span>`);\nclass AudioMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-audio-menu-items\",\n    props: {\n      emptyLabel: \"Default\",\n      radioClass: null,\n      radioGroupClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchControllerDisabled.bind(this));\n    effect(this._watchHintText.bind(this));\n    const {\n      radioClass,\n      radioCheckClass\n    } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const {\n        emptyLabel\n      } = this.$props,\n      {\n        audioTrack\n      } = this._media.$store,\n      track = audioTrack();\n    this._menu._hint.set(track?.label ?? emptyLabel());\n  }\n  _watchControllerDisabled() {\n    this._menu._disable(this._isDisabled());\n  }\n  _isDisabled() {\n    const {\n      audioTracks\n    } = this._media.$store;\n    return audioTracks().length === 0;\n  }\n  _onChange(event) {\n    if (this._isDisabled()) return;\n    const radioGroup = event.target;\n    const value = radioGroup.value,\n      index = this._media.audioTracks.toArray().findIndex(track => track.label.toLowerCase() === value);\n    if (index >= 0) this._media.remote.changeAudioTrack(index, event);\n  }\n  _getValue() {\n    const {\n      audioTrack\n    } = this._media.$store;\n    const track = audioTrack();\n    return track ? track.label.toLowerCase() : \"\";\n  }\n  _getOptions() {\n    const {\n      audioTracks\n    } = this._media.$store;\n    return audioTracks().map(track => ({\n      value: track.label.toLowerCase(),\n      content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$8),\n          $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, track.label);\n        return $$_root;\n      })()\n    }));\n  }\n  render() {\n    const {\n      radioGroupClass\n    } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\nvar Icon$51 = `<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.6667 5.99998C26.6667 5.63179 26.3682 5.33331 26 5.33331H11.3333C10.9651 5.33331 10.6667 5.63179 10.6667 5.99998V17.5714C10.6667 17.6694 10.5644 17.7342 10.4741 17.6962C9.91823 17.4625 9.30754 17.3333 8.66667 17.3333C6.08934 17.3333 4 19.4226 4 22C4 24.5773 6.08934 26.6666 8.66667 26.6666C11.244 26.6666 13.3333 24.5773 13.3333 22V8.66665C13.3333 8.29846 13.6318 7.99998 14 7.99998L23.3333 7.99998C23.7015 7.99998 24 8.29846 24 8.66665V14.9048C24 15.0027 23.8978 15.0675 23.8075 15.0296C23.2516 14.7958 22.6409 14.6666 22 14.6666C19.4227 14.6666 17.3333 16.756 17.3333 19.3333C17.3333 21.9106 19.4227 24 22 24C24.5773 24 26.6667 21.9106 26.6667 19.3333V5.99998ZM22 21.3333C23.1046 21.3333 24 20.4379 24 19.3333C24 18.2287 23.1046 17.3333 22 17.3333C20.8954 17.3333 20 18.2287 20 19.3333C20 20.4379 20.8954 21.3333 22 21.3333ZM8.66667 24C9.77124 24 10.6667 23.1045 10.6667 22C10.6667 20.8954 9.77124 20 8.66667 20C7.5621 20 6.66667 20.8954 6.66667 22C6.66667 23.1045 7.5621 24 8.66667 24Z\" fill=\"currentColor\"/>`;\nvar Icon$10 = `<path d=\"M13.0908 14.3334C12.972 14.3334 12.9125 14.1898 12.9965 14.1058L17.7021 9.40022C17.9625 9.13987 17.9625 8.71776 17.7021 8.45741L16.2879 7.04319C16.0275 6.78284 15.6054 6.78284 15.3451 7.04319L6.8598 15.5285C6.59945 15.7888 6.59945 16.2109 6.8598 16.4713L8.27401 17.8855L8.27536 17.8868L15.3453 24.9568C15.6057 25.2172 16.0278 25.2172 16.2881 24.9568L17.7024 23.5426C17.9627 23.2822 17.9627 22.8601 17.7024 22.5998L12.9969 17.8944C12.9129 17.8104 12.9724 17.6668 13.0912 17.6668L26 17.6668C26.3682 17.6668 26.6667 17.3683 26.6667 17.0001V15.0001C26.6667 14.6319 26.3682 14.3334 26 14.3334L13.0908 14.3334Z\" fill=\"currentColor\"/>`;\nvar Icon$18 = `<path d=\"M15.905 17.4809C15.9571 17.533 16.0415 17.533 16.0936 17.4809L22.4111 11.1635C22.6714 10.9031 23.0935 10.9031 23.3539 11.1635L24.9567 12.7662C25.217 13.0266 25.217 13.4487 24.9567 13.709L18.1028 20.5629C18.0937 20.5732 18.0842 20.5833 18.0744 20.5931L16.4716 22.1959C16.2113 22.4562 15.7892 22.4562 15.5288 22.1959L7.04353 13.7106C6.78318 13.4503 6.78318 13.0281 7.04353 12.7678L8.6463 11.165C8.90665 10.9047 9.32876 10.9047 9.58911 11.165L15.905 17.4809Z\" fill=\"currentColor\"/>`;\nconst $$_templ$7 = /* @__PURE__ */$$_create_template(`<!$><span slot=\"label\"><!$></span>`),\n  $$_templ_2$2 = /* @__PURE__ */$$_create_template(`<!$><div slot=\"hint\"></div>`);\nfunction renderMenuButtonContent({\n  label,\n  iconPaths\n}) {\n  return [$$_create_component(Icon, {\n    slot: \"close-icon\",\n    paths: Icon$10\n  }), $$_create_component(Icon, {\n    slot: \"icon\",\n    paths: iconPaths\n  }), (() => {\n    const [$$_root, $$_walker] = $$_create_walker($$_templ$7),\n      $$_expr = $$_walker.nextNode();\n    $$_insert_at_marker_lite($$_expr, label);\n    return $$_root;\n  })(), $$_next_template($$_templ_2$2), $$_create_component(Icon, {\n    slot: \"open-icon\",\n    paths: Icon$18\n  })];\n}\nclass AudioMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-audio-menu-button\",\n    props: {\n      disabled: false,\n      label: \"Audio\"\n    }\n  });\n  render() {\n    const {\n      label\n    } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$51\n    });\n  }\n}\nconst $$_templ$6 = /* @__PURE__ */$$_create_template(`<!$><span part=\"label\"><!$></span>`),\n  $$_templ_2$1 = $$_templ$6;\nclass CaptionsMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-captions-menu-items\",\n    props: {\n      offLabel: \"Off\",\n      radioClass: null,\n      radioGroupClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchControllerDisabled.bind(this));\n    effect(this._watchHintText.bind(this));\n    const {\n      radioClass,\n      radioCheckClass\n    } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const {\n        offLabel\n      } = this.$props,\n      {\n        textTrack\n      } = this._media.$store,\n      track = textTrack();\n    this._menu._hint.set(track && isTrackCaptionKind(track) && track.mode === \"showing\" ? track.label : offLabel());\n  }\n  _watchControllerDisabled() {\n    this._menu._disable(this._isDisabled());\n  }\n  _isDisabled() {\n    const {\n      textTracks\n    } = this._media.$store;\n    return textTracks().filter(isTrackCaptionKind).length === 0;\n  }\n  _onChange(event) {\n    if (this._isDisabled()) return;\n    const radioGroup = event.target;\n    const value = radioGroup.value;\n    if (value === \"off\") {\n      const track = this._media.textTracks.selected;\n      if (track) {\n        const index2 = this._media.textTracks.toArray().indexOf(track);\n        this._media.remote.changeTextTrackMode(index2, \"disabled\", event);\n      }\n      return;\n    }\n    const index = this._media.textTracks.toArray().findIndex(track => track.label.toLowerCase() === value);\n    if (index >= 0) this._media.remote.changeTextTrackMode(index, \"showing\", event);\n  }\n  _getValue() {\n    const {\n        textTrack,\n        textTracks\n      } = this._media.$store,\n      track = textTrack();\n    return track && isTrackCaptionKind(track) && track.mode === \"showing\" ? track.label.toLowerCase() : \"off\";\n  }\n  _getOptions() {\n    const {\n        offLabel\n      } = this.$props,\n      {\n        textTracks\n      } = this._media.$store;\n    return [{\n      value: \"off\",\n      content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$6),\n          $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, offLabel);\n        return $$_root;\n      })()\n    }, ...textTracks().filter(isTrackCaptionKind).map(track => ({\n      value: track.label.toLowerCase(),\n      content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ_2$1),\n          $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, track.label);\n        return $$_root;\n      })()\n    }))];\n  }\n  render() {\n    const {\n      radioGroupClass\n    } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\nclass CaptionsMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-captions-menu-button\",\n    props: {\n      disabled: false,\n      label: \"Captions\"\n    }\n  });\n  render() {\n    const {\n      label\n    } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$25\n    });\n  }\n}\nconst $$_templ$5 = /* @__PURE__ */$$_create_template(`<!$><span part=\"label\"><!$></span>`);\nclass PlaybackRateMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-playback-rate-menu-items\",\n    props: {\n      normalLabel: \"Normal\",\n      rates: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2],\n      radioGroupClass: null,\n      radioClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchHintText.bind(this));\n    const {\n      radioClass,\n      radioCheckClass\n    } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const {\n        normalLabel\n      } = this.$props,\n      {\n        playbackRate\n      } = this._media.$store,\n      rate = playbackRate();\n    this._menu._hint.set(rate === 1 ? normalLabel() : rate + \"\\xD7\");\n  }\n  _onChange(event) {\n    const radioGroup = event.target;\n    this._media.remote.changePlaybackRate(+radioGroup.value, event);\n  }\n  _getValue() {\n    const {\n      playbackRate\n    } = this._media.$store;\n    return playbackRate() + \"\";\n  }\n  _getOptions() {\n    const {\n      rates,\n      normalLabel\n    } = this.$props;\n    return rates().map(rate => ({\n      value: rate + \"\",\n      content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$5),\n          $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, () => rate === 1 ? normalLabel() : rate + \"\\xD7\");\n        return $$_root;\n      })()\n    }));\n  }\n  render() {\n    const {\n      radioGroupClass\n    } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\nvar Icon$55 = `<path d=\"M25.14 25.1089C25.0171 25.2532 24.8356 25.3333 24.646 25.3333H22.8124C22.1084 25.3333 21.7734 24.1872 22.2745 23.6927C23.9161 22.0729 24.9336 19.822 24.9336 17.3333C24.9336 12.3997 20.9336 8.39973 16 8.39973C11.0664 8.39973 7.06641 12.3997 7.06641 17.3333C7.06641 19.822 8.08389 22.0729 9.72555 23.6927C10.2266 24.1872 9.89155 25.3333 9.18762 25.3333H7.35398C7.16436 25.3333 6.98294 25.2532 6.86001 25.1089C5.07703 23.015 4 20.2991 4 17.3333C4 10.7057 9.3724 5.33333 16 5.33333C22.6276 5.33333 28 10.7057 28 17.3333C28 20.2991 26.923 23.015 25.14 25.1089Z\" fill=\"currentColor\"/> <path d=\"M21.1992 14.3399C21.4595 14.0796 21.4595 13.6575 21.1992 13.3971L20.2564 12.4543C19.996 12.194 19.5739 12.194 19.3136 12.4543L16.4492 15.3187C16.4185 15.3493 16.3749 15.3629 16.332 15.3568C16.2236 15.3414 16.1127 15.3334 16 15.3334C14.7113 15.3334 13.6667 16.378 13.6667 17.6667C13.6667 18.9554 14.7113 20 16 20C17.2887 20 18.3333 18.9554 18.3333 17.6667C18.3333 17.5464 18.3242 17.4283 18.3067 17.313C18.3001 17.2696 18.3136 17.2255 18.3446 17.1945L21.1992 14.3399Z\" fill=\"currentColor\"/>`;\nclass PlaybackRateMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-playback-rate-menu-button\",\n    props: {\n      disabled: false,\n      label: \"Speed\"\n    }\n  });\n  render() {\n    const {\n      label\n    } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$55\n    });\n  }\n}\nconst $$_templ$4 = /* @__PURE__ */$$_create_template(`<!$><span><!$></span>`),\n  $$_templ_2 = /* @__PURE__ */$$_create_template(`<!$><span part=\"label\"><!$></span>`),\n  $$_templ_3 = /* @__PURE__ */$$_create_template(`<!$><span part=\"info\"><!$></span>`);\nclass QualityMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-quality-menu-items\",\n    props: {\n      autoLabel: \"Auto\",\n      hideBitrate: false,\n      radioGroupClass: null,\n      radioClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  _sortedQualities = computed(() => {\n    const {\n      qualities\n    } = this._media.$store;\n    return [...qualities()].sort((a, b) => b.height === a.height ? b.bitrate - a.bitrate : b.height - a.height);\n  });\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchControllerDisabled.bind(this));\n    effect(this._watchHintText.bind(this));\n    const {\n      radioClass,\n      radioCheckClass\n    } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const {\n        autoLabel\n      } = this.$props,\n      {\n        autoQuality,\n        quality\n      } = this._media.$store,\n      qualityText = quality() ? quality().height + \"p\" : \"\";\n    this._menu._hint.set(!autoQuality() ? qualityText : autoLabel() + ` (${qualityText})`);\n  }\n  _watchControllerDisabled() {\n    const {\n      qualities\n    } = this._media.$store;\n    this._menu._disable(qualities().length === 0);\n  }\n  _isDisabled() {\n    const {\n      canSetQuality,\n      qualities\n    } = this._media.$store;\n    return !canSetQuality() || qualities().length === 0;\n  }\n  _onChange(event) {\n    if (this._isDisabled()) return;\n    const radioGroup = event.target,\n      value = radioGroup.value;\n    if (value === \"auto\") {\n      this._media.remote.changeQuality(-1, event);\n      return;\n    }\n    const {\n        qualities\n      } = this._media.$store,\n      index = peek(qualities).findIndex(quality => this._getQualityId(quality) === value);\n    if (index >= 0) this._media.remote.changeQuality(index, event);\n  }\n  _getValue() {\n    const {\n      quality,\n      autoQuality\n    } = this._media.$store;\n    if (autoQuality()) return \"auto\";\n    const currentQuality = quality();\n    return currentQuality ? this._getQualityId(currentQuality) : \"auto\";\n  }\n  _getQualityId(quality) {\n    return quality.height + \"_\" + quality.bitrate;\n  }\n  _getOptions() {\n    const {\n      autoLabel,\n      hideBitrate\n    } = this.$props;\n    return [{\n      value: \"auto\",\n      content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$4),\n          $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, autoLabel);\n        return $$_root;\n      })()\n    }, ...this._sortedQualities().map(quality => {\n      const rate = `${round(quality.bitrate / 1e6, 2)} Mbps`;\n      return {\n        value: this._getQualityId(quality),\n        content: () => [(() => {\n          const [$$_root, $$_walker] = $$_create_walker($$_templ_2),\n            $$_expr = $$_walker.nextNode();\n          $$_insert_at_marker_lite($$_expr, quality.height + \"p\");\n          return $$_root;\n        })(), (() => {\n          const $$_signal = $$_computed(() => !hideBitrate() && (() => {\n            const [$$_root, $$_walker] = $$_create_walker($$_templ_3),\n              $$_expr = $$_walker.nextNode();\n            $$_insert_at_marker_lite($$_expr, rate);\n            return $$_root;\n          })());\n          $$_signal();\n          return $$_signal;\n        })()]\n      };\n    })];\n  }\n  render() {\n    const {\n      radioGroupClass\n    } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\nvar Icon$83 = `<path d=\"M18.6669 10.4001C18.6669 10.7683 18.3684 11.0667 18.0002 11.0667H16.2668C15.8987 11.0667 15.6002 10.7683 15.6002 10.4001V9.86674C15.6002 9.7931 15.5405 9.73341 15.4669 9.73341H5.99998C5.63179 9.73341 5.33331 9.43493 5.33331 9.06674V7.33341C5.33331 6.96522 5.63179 6.66674 5.99998 6.66674H15.4669C15.5405 6.66674 15.6002 6.60704 15.6002 6.53341V6.00007C15.6002 5.63188 15.8987 5.3334 16.2668 5.3334H18.0002C18.3684 5.3334 18.6669 5.63188 18.6669 6.00007V10.4001Z\" fill=\"currentColor\"/> <path d=\"M11.3334 18.8668C11.7016 18.8668 12.0001 18.5683 12.0001 18.2001V13.8001C12.0001 13.4319 11.7016 13.1335 11.3334 13.1335H9.60006C9.23187 13.1335 8.93339 13.4319 8.93339 13.8001V14.3335C8.93339 14.4071 8.8737 14.4668 8.80006 14.4668H6.00006C5.63187 14.4668 5.33339 14.7653 5.33339 15.1335V16.8668C5.33339 17.235 5.63187 17.5335 6.00006 17.5335H8.80006C8.8737 17.5335 8.93339 17.5932 8.93339 17.6668V18.2001C8.93339 18.5683 9.23187 18.8668 9.60006 18.8668H11.3334Z\" fill=\"currentColor\"/> <path d=\"M18.6667 26.0001C18.6667 26.3683 18.3682 26.6668 18 26.6668H16.2667C15.8985 26.6668 15.6 26.3683 15.6 26.0001V25.4668C15.6 25.3931 15.5403 25.3334 15.4667 25.3334H6.00014C5.63195 25.3334 5.33348 25.0349 5.33348 24.6668V22.9334C5.33348 22.5652 5.63195 22.2668 6.00014 22.2668H15.4667C15.5403 22.2668 15.6 22.2071 15.6 22.1334V21.6001C15.6 21.2319 15.8985 20.9334 16.2667 20.9334H18C18.3682 20.9334 18.6667 21.2319 18.6667 21.6001V26.0001Z\" fill=\"currentColor\"/> <path d=\"M22 24.6668C22 25.0349 22.2985 25.3334 22.6667 25.3334H26.0001C26.3683 25.3334 26.6668 25.0349 26.6668 24.6668V22.9334C26.6668 22.5652 26.3683 22.2668 26.0001 22.2668H22.6667C22.2985 22.2668 22 22.5652 22 22.9334V24.6668Z\" fill=\"currentColor\"/> <path d=\"M16.0001 17.5335C15.6319 17.5335 15.3334 17.235 15.3334 16.8668V15.1335C15.3334 14.7653 15.6319 14.4668 16.0001 14.4668H26.0001C26.3683 14.4668 26.6667 14.7653 26.6667 15.1335V16.8668C26.6667 17.235 26.3683 17.5335 26.0001 17.5335H16.0001Z\" fill=\"currentColor\"/> <path d=\"M22.0002 9.06674C22.0002 9.43493 22.2987 9.73341 22.6669 9.73341H26C26.3682 9.73341 26.6666 9.43493 26.6666 9.06674V7.3334C26.6666 6.96521 26.3682 6.66674 26 6.66674H22.6669C22.2987 6.66674 22.0002 6.96522 22.0002 7.33341V9.06674Z\" fill=\"currentColor\"/>`;\nclass QualityMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-quality-menu-button\",\n    props: {\n      disabled: false,\n      label: \"Quality\"\n    }\n  });\n  render() {\n    const {\n      label\n    } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$83\n    });\n  }\n}\nclass Gesture extends Component {\n  static el = defineElement({\n    tagName: \"media-gesture\",\n    props: {\n      event: void 0,\n      action: void 0\n    }\n  });\n  _media;\n  _outlet = null;\n  onAttach() {\n    const {\n      event,\n      action\n    } = this.$props;\n    this.setAttributes({\n      event,\n      action\n    });\n  }\n  onConnect() {\n    this._media = useMedia();\n    scopedRaf(() => {\n      this._outlet = this._media.player.querySelector(\"media-outlet\");\n      effect(this._attachListener.bind(this));\n    });\n  }\n  _attachListener() {\n    let eventType = this.$props.event();\n    if (!this._outlet || !eventType) return;\n    if (/^dbl/.test(eventType)) {\n      eventType = eventType.split(/^dbl/)[1];\n    }\n    listenEvent(this._outlet, eventType, this._acceptEvent.bind(this));\n  }\n  _presses = 0;\n  _pressTimerId = -1;\n  _acceptEvent(event) {\n    if (!this._inBounds(event) || isPointerEvent(event) && (event.button !== 0 || this._media.activeMenu)) {\n      return;\n    }\n    event.MEDIA_GESTURE = true;\n    event.preventDefault();\n    const isDblEvent = peek(this.$props.event)?.startsWith(\"dbl\");\n    if (!isDblEvent) {\n      if (this._presses === 0) {\n        setTimeout(() => {\n          if (this._presses === 1) this._handleEvent(event);\n        }, 250);\n      }\n    } else if (this._presses === 1) {\n      queueMicrotask(() => this._handleEvent(event));\n      clearTimeout(this._pressTimerId);\n      this._presses = 0;\n      return;\n    }\n    if (this._presses === 0) {\n      this._pressTimerId = window.setTimeout(() => {\n        this._presses = 0;\n      }, 275);\n    }\n    this._presses++;\n  }\n  _handleEvent(event) {\n    this.el.setAttribute(\"data-triggered\", \"\");\n    requestAnimationFrame(() => {\n      if (this._isTopLayer()) {\n        this._performAction(peek(this.$props.action), event);\n      }\n      requestAnimationFrame(() => {\n        this.el.removeAttribute(\"data-triggered\");\n      });\n    });\n  }\n  /** Validate event occurred in gesture bounds. */\n  _inBounds(event) {\n    if (!this.el) return false;\n    if (isPointerEvent(event) || isMouseEvent(event) || isTouchEvent(event)) {\n      const touch = isTouchEvent(event) ? event.touches[0] : void 0;\n      const clientX = touch?.clientX ?? event.clientX;\n      const clientY = touch?.clientY ?? event.clientY;\n      const rect = this.el.getBoundingClientRect();\n      const inBounds = clientY >= rect.top && clientY <= rect.bottom && clientX >= rect.left && clientX <= rect.right;\n      return event.type.includes(\"leave\") ? !inBounds : inBounds;\n    }\n    return true;\n  }\n  /** Validate gesture has the highest z-index in this triggered group. */\n  _isTopLayer() {\n    const gestures = this._media.player.querySelectorAll(\"media-gesture[data-triggered]\");\n    return Array.from(gestures).sort((a, b) => +getComputedStyle(b).zIndex - +getComputedStyle(a).zIndex)[0]?.component === this;\n  }\n  _performAction(action, trigger) {\n    if (!action) return;\n    const [method, value] = action.replace(/:([a-z])/, \"-$1\").split(\":\");\n    if (action.includes(\":fullscreen\")) {\n      this._media.remote.toggleFullscreen(\"prefer-media\", trigger);\n    } else if (action.includes(\"seek:\")) {\n      this._media.remote.seek(peek(this._media.$store.currentTime) + (+value || 0), trigger);\n    } else {\n      this._media.remote[kebabToCamelCase(method)](trigger);\n    }\n  }\n}\nconst $$_templ$3 = /* @__PURE__ */$$_create_template(`<!$><svg part=\"icon\" fill=\"none\" viewBox=\"0 0 120 120\" aria-hidden=\"true\"><circle part=\"track\" cx=\"60\" cy=\"60\" r=\"54\" stroke=\"currentColor\"></circle><circle part=\"track-fill\" cx=\"60\" cy=\"60\" r=\"54\" stroke=\"currentColor\" pathLength=\"100\"></circle></svg>`);\nclass BufferingIndicator extends Component {\n  static el = defineElement({\n    tagName: \"media-buffering-indicator\"\n  });\n  _media;\n  onAttach() {\n    this._media = useMedia();\n    this.setAttributes({\n      \"data-buffering\": computed(this._isBuffering.bind(this))\n    });\n  }\n  _isBuffering() {\n    const {\n      canPlay,\n      waiting\n    } = this._media.$store;\n    return !canPlay() || waiting();\n  }\n  render() {\n    return $$_next_template($$_templ$3);\n  }\n}\nclass CaptionsTextRenderer {\n  constructor(_renderer) {\n    this._renderer = _renderer;\n  }\n  priority = 10;\n  _track = null;\n  _disposal = createDisposalBin();\n  attach() {}\n  canRender() {\n    return true;\n  }\n  detach() {\n    this._disposal.empty();\n    this._renderer.reset();\n    this._track = null;\n  }\n  changeTrack(track) {\n    if (!track || this._track === track) return;\n    this._disposal.empty();\n    if (track.readyState < 2) {\n      this._renderer.reset();\n      this._disposal.add(listenEvent(track, \"load\", () => this._changeTrack(track), {\n        once: true\n      }));\n    } else {\n      this._changeTrack(track);\n    }\n    this._disposal.add(listenEvent(track, \"add-cue\", event => {\n      this._renderer.addCue(event.detail);\n    }), listenEvent(track, \"remove-cue\", event => {\n      this._renderer.removeCue(event.detail);\n    }));\n    this._track = track;\n  }\n  _changeTrack(track) {\n    this._renderer.changeTrack({\n      cues: [...track.cues],\n      regions: [...track.regions]\n    });\n  }\n}\nclass Captions extends Component {\n  static el = defineElement({\n    tagName: \"media-captions\",\n    props: {\n      textDir: \"ltr\"\n    }\n  });\n  _media;\n  _renderer;\n  _textRenderer;\n  onAttach() {\n    this._media = useMedia();\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  onConnect(el) {\n    this._renderer = new CaptionsRenderer(el);\n    this._textRenderer = new CaptionsTextRenderer(this._renderer);\n    effect(this._watchViewType.bind(this));\n  }\n  onDisconnect() {\n    if (this._textRenderer) {\n      this._textRenderer.detach();\n      this._media.textRenderers.remove(this._textRenderer);\n    }\n    this._renderer?.destroy();\n  }\n  _isHidden() {\n    const {\n        textTrack\n      } = this._media.$store,\n      track = textTrack();\n    return !track || !isTrackCaptionKind(track);\n  }\n  _watchViewType() {\n    const {\n      viewType\n    } = this._media.$store;\n    if (viewType() === \"audio\") {\n      return this._setupAudioView();\n    } else {\n      return this._setupVideoView();\n    }\n  }\n  _setupAudioView() {\n    effect(this._onTrackChange.bind(this));\n    return () => {\n      this.el.textContent = \"\";\n    };\n  }\n  _onTrackChange() {\n    if (this._isHidden()) return;\n    const {\n      textTrack\n    } = this._media.$store;\n    this._onCueChange();\n    listenEvent(textTrack(), \"cue-change\", this._onCueChange.bind(this));\n    effect(this._onUpdateTimedNodes.bind(this));\n  }\n  _onCueChange() {\n    this.el.textContent = \"\";\n    const {\n        currentTime,\n        textTrack\n      } = this._media.$store,\n      time = peek(currentTime),\n      activeCues = peek(textTrack).activeCues;\n    for (const cue of activeCues) {\n      const cueEl = document.createElement(\"div\");\n      cueEl.setAttribute(\"part\", \"cue\");\n      cueEl.innerHTML = renderVTTCueString(cue, time);\n      this.el.append(cueEl);\n    }\n  }\n  _onUpdateTimedNodes() {\n    const {\n      currentTime\n    } = this._media.$store;\n    updateTimedVTTCueNodes(this.el, currentTime());\n  }\n  _setupVideoView() {\n    effect(this._watchTextDirection.bind(this));\n    effect(this._watchMediaTime.bind(this));\n    this._media.textRenderers.add(this._textRenderer);\n    return () => {\n      this.el.textContent = \"\";\n      this._textRenderer.detach();\n      this._media.textRenderers.remove(this._textRenderer);\n    };\n  }\n  _watchTextDirection() {\n    this._renderer.dir = this.$props.textDir();\n  }\n  _watchMediaTime() {\n    if (this._isHidden()) return;\n    const {\n      currentTime\n    } = this._media.$store;\n    this._renderer.currentTime = currentTime();\n  }\n}\nconst $$_templ$2 = /* @__PURE__ */$$_create_template(`<!$><div part=\"container\"><div part=\"text\">LIVE</div></div>`);\nclass LiveIndicator extends Component {\n  static el = defineElement({\n    tagName: \"media-live-indicator\"\n  });\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    new FocusVisibleController(instance);\n  }\n  onAttach(el) {\n    const {\n      live,\n      liveEdge\n    } = this._media.$store;\n    setARIALabel(el, this._getLabel.bind(this));\n    this.setAttributes({\n      tabindex: this._getTabIndex.bind(this),\n      role: this._getRole.bind(this),\n      \"data-live\": live,\n      \"data-live-edge\": liveEdge,\n      \"data-media-button\": true\n    });\n  }\n  onConnect(el) {\n    onPress(el, this._onPress.bind(this));\n  }\n  _getLabel() {\n    const {\n      live\n    } = this._media.$store;\n    return live() ? \"Go live\" : null;\n  }\n  _getTabIndex() {\n    const {\n      live\n    } = this._media.$store;\n    return live() ? 0 : null;\n  }\n  _getRole() {\n    const {\n      live\n    } = this._media.$store;\n    return live() ? \"button\" : null;\n  }\n  _onPress(event) {\n    const {\n      liveEdge\n    } = this._media.$store;\n    if (liveEdge()) return;\n    this._media.remote.seekToLiveEdge(event);\n  }\n  render() {\n    return $$_next_template($$_templ$2);\n  }\n}\nconst $$_templ$1 = /* @__PURE__ */$$_create_template(`<!$><img part=\"img\" />`);\nclass Poster extends Component {\n  static el = defineElement({\n    tagName: \"media-poster\",\n    props: {\n      alt: void 0\n    }\n  });\n  _media;\n  _imgLoading = signal(true);\n  _imgError = signal(false);\n  _imgSrc;\n  _imgAlt;\n  onAttach(el) {\n    this._media = useMedia();\n    this._imgSrc = computed(this._getImgSrc.bind(this));\n    this._imgAlt = this._getImgAlt.bind(this);\n    this.setAttributes({\n      \"data-loading\": this._imgLoading,\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  onConnect(el) {\n    const {\n      canLoad,\n      poster\n    } = this._media.$store;\n    window.requestAnimationFrame(() => {\n      if (!canLoad()) preconnect(poster());\n    });\n    effect(this._onLoadStart.bind(this));\n  }\n  _isHidden() {\n    const {\n      poster\n    } = this._media.$store;\n    return this._imgError() || !poster();\n  }\n  _getImgSrc() {\n    const {\n      canLoad,\n      poster\n    } = this._media.$store;\n    return canLoad() && poster().length ? poster() : null;\n  }\n  _getImgAlt() {\n    return this._imgSrc() ? this.$props.alt() : null;\n  }\n  _onLoadStart() {\n    const {\n      canLoad,\n      poster\n    } = this._media.$store;\n    const isLoading = canLoad() && !!poster();\n    this._imgLoading.set(isLoading);\n    this._imgError.set(false);\n  }\n  _onLoad() {\n    this._imgLoading.set(false);\n  }\n  _onError() {\n    this._imgLoading.set(false);\n    this._imgError.set(true);\n  }\n  render() {\n    const {\n      crossorigin\n    } = this._media.$store;\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$1);\n      $$_effect(() => $$_attr($$_root, \"src\", this._imgSrc()));\n      $$_effect(() => $$_attr($$_root, \"alt\", this._imgAlt()));\n      $$_effect(() => $$_attr($$_root, \"crossorigin\", crossorigin()));\n      $$_listen($$_root, \"load\", this._onLoad.bind(this));\n      $$_listen($$_root, \"error\", this._onError.bind(this));\n      return $$_root;\n    })();\n  }\n}\nconst $$_templ = /* @__PURE__ */$$_create_template(`<!$><span><!$></span>`);\nclass Time extends Component {\n  static el = defineElement({\n    tagName: \"media-time\",\n    props: {\n      type: \"current\",\n      showHours: false,\n      padHours: null,\n      padMinutes: null,\n      remainder: false\n    }\n  });\n  _media;\n  _time;\n  onAttach() {\n    this._media = useMedia();\n    this._time = computed(this._getTime.bind(this));\n  }\n  _getTime() {\n    const {\n        type,\n        remainder,\n        padHours,\n        padMinutes,\n        showHours\n      } = this.$props,\n      seconds = this._getSeconds(type()),\n      duration = this._media.$store.duration();\n    if (!Number.isFinite(seconds + duration)) return \"LIVE\";\n    const time = remainder() ? Math.max(0, duration - seconds) : seconds;\n    return formatTime(time, padHours(), isNull(padMinutes()) ? time >= 3600 : padMinutes(), showHours());\n  }\n  _getSeconds(type) {\n    const {\n      bufferedEnd,\n      duration,\n      currentTime\n    } = this._media.$store;\n    switch (type) {\n      case \"buffered\":\n        return bufferedEnd();\n      case \"duration\":\n        return duration();\n      default:\n        return currentTime();\n    }\n  }\n  render() {\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ),\n        $$_expr = $$_walker.nextNode();\n      $$_insert_at_marker_lite($$_expr, this._time);\n      return $$_root;\n    })();\n  }\n}\nfunction setupPreviewStyles(preview, orientation) {\n  let rect = preview.getBoundingClientRect(),\n    styles = {\n      \"--computed-width\": rect.width + \"px\",\n      \"--computed-height\": rect.height + \"px\",\n      \"--preview-width\": \"var(--media-slider-preview-width, var(--computed-width))\",\n      \"--preview-height\": \"var(--media-slider-preview-height, var(--computed-height))\"\n    };\n  if (orientation !== \"vertical\") {\n    styles = {\n      ...styles,\n      \"--preview-width-half\": \"calc(var(--preview-width) / 2)\",\n      \"--preview-left-clamp\": \"max(var(--preview-width-half), var(--slider-pointer-percent))\",\n      \"--preview-right-clamp\": \"calc(100% - var(--preview-width-half))\",\n      \"--preview-left\": \"min(var(--preview-left-clamp), var(--preview-right-clamp))\"\n    };\n  } else {\n    styles = {\n      ...styles,\n      \"--preview-height-half\": \"calc(var(--preview-height) / 2)\",\n      \"--preview-top-clamp\": \"max(var(--preview-height-half), var(--slider-pointer-percent))\",\n      \"--preview-bottom-clamp\": \"calc(100% - var(--preview-height-half))\",\n      \"--preview-bottom\": \"min(var(--preview-top-clamp), var(--preview-bottom-clamp))\"\n    };\n  }\n  for (const name of Object.keys(styles)) {\n    preview.style.setProperty(name, styles[name]);\n  }\n}\nvar preview = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  setupPreviewStyles: setupPreviewStyles\n});\nexport { AudioMenuButton as A, BufferingIndicator as B, CaptionButton as C, toggleButtonProps as D, SliderStoreFactory as E, FullscreenButton as F, Gesture as G, LiveIndicator as L, MuteButton as M, Poster as P, QualityMenuButton as Q, RadioGroup as R, SeekButton as S, Tooltip as T, VolumeSlider as V, Thumbnail as a, PlayButton as b, PIPButton as c, Slider as d, TimeSlider as e, SliderThumbnail as f, SliderValue as g, SliderVideo as h, Time as i, ToggleButton as j, Captions as k, Menu as l, MenuButton as m, MenuItems as n, Radio as o, AudioMenuItems as p, CaptionsMenuButton as q, CaptionsMenuItems as r, ChaptersMenuItems as s, QualityMenuItems as t, PlaybackRateMenuButton as u, PlaybackRateMenuItems as v, round as w, FocusVisibleController as x, clampNumber as y, getNumberOfDecimalPlaces as z };","map":{"version":3,"names":["signal","effect","createContext","hasProvidedContext","useContext","provideContext","peek","isWriteSignal","StoreFactory","useStore","computed","onDispose","scoped","tick","ComponentController","Component","defineElement","prop","defineProp","method","s","scopedRaf","A","ARIAKeyShortcuts","a","setAttributeIfEmpty","o","onPress","u","useMedia","b","setARIALabel","i","isTrackCaptionKind","I","IS_SAFARI","f","functionThrottle","c","findActiveCue","d","canChangeVolume","e","onTrackChapterChange","g","isElementParent","h","isCueActive","p","preconnect","$$_create_component","$$_create_walker","$$_effect","$$_attr","$$_next_element","$$_create_template","$$_listen","$$_ref","$$_setup_custom_element","$$_insert_at_marker_lite","$$_peek","$$_clone","$$_insert_lite","$$_computed","$$_next_template","$$_scoped","Icon","listenEvent","setAttribute","ariaBool","ariaBool$1","isNull","isNumber","setStyle","isDOMEvent","isKeyboardEvent","isUndefined","animationFrameThrottle","isDOMElement","isPointerEvent","isMouseEvent","isTouchEvent","kebabToCamelCase","createDisposalBin","CaptionsRenderer","renderVTTCueString","updateTimedVTTCueNodes","round","num","decimalPlaces","Number","toFixed","getNumberOfDecimalPlaces","String","split","length","clampNumber","min","value","max","Math","$keyboard","document","set","metaKey","altKey","ctrlKey","FocusVisibleController","_focused","onConnect","el","updateFocusAttr","listen","_onPointerEnter","bind","_onPointerLeave","active","activeElement","_onFocus","_onBlur","focused","updateHoverAttr","isFocused","isHovering","tooltipContext","Tooltip","tagName","props","position","onAttach","isConnected","tooltip","_attachTooltip","setAttributes","$props","id","TooltipController","constructor","instance","tooltipEl","tooltipId","removeAttribute","__defProp$3","Object","defineProperty","__getOwnPropDesc$3","getOwnPropertyDescriptor","__decorateClass$3","decorators","target","key","kind","result","decorator","toggleButtonProps","disabled","defaultPressed","defaultAppearance","ToggleButton","_pressed","_keyShortcut","pressed","_isARIAPressed","_onMaybePress","_onPress","event","stopImmediatePropagation","preventDefault","prototype","Icon$56","Icon$59","Icon$71","PlayButton","_media","_isPressed","_getLabel","paused","ended","$store","remote","pause","play","render","paths","slot","Icon$24","Icon$25","$ariaBool","CaptionButton","_isHidden","toggleCaptions","textTrack","track","textTracks","filter","Icon$37","Icon$38","FullscreenButton","fullscreen","exitFullscreen","enterFullscreen","canFullscreen","Icon$52","Icon$101","Icon$102","MuteButton","_getVolumeText","unmute","mute","muted","volume","$volume","Icon$57","Icon$58","PIPButton","pictureInPicture","exitPictureInPicture","enterPictureInPicture","canPictureInPicture","Icon$77","Icon$81","SeekButton","seconds","canSeek","currentTime","seekTo","seek","SliderStoreFactory","pointerValue","dragging","pointing","interactive","fillRate","calcRate","fillPercent","pointerRate","pointerPercent","range","offset","sliderProps","step","keyStep","shiftKeyMultiplier","trackClass","trackFillClass","trackProgressClass","thumbContainerClass","thumbClass","getClampedValue","getValueFromRate","rate","boundRate","fill","stepRatio","steps","SliderKeyDirection","Left","ArrowLeft","Up","ArrowUp","Right","ArrowRight","Down","ArrowDown","SliderEventsController","_delegate","_attachEventListeners","_attachPointerListeners","_swipeGesture","outlet","player","querySelector","_outlet","_onTouchStart","_onTouchMove","_touchX","_touchStartValue","touches","clientX","diff","abs","_onStartDragging","_isDisabled","_onPointerMove","_onPointerDown","_onKeyDown","_onKeyUp","_onDocumentPointerUp","_onDocumentPointerMove","_onDocumentTouchMove","passive","_updatePointerValue","_updateValue","newValue","trigger","clampedValue","createEvent","detail","dispatchEvent","_onValueChange","event2","_onDragValueChange","dispatch","dir","_orientation","size","_trackFill","hasAttribute","style","_thumb","_getPointerValue","thumbPositionRate","rect","getBoundingClientRect","bottom","trackBottom","height","trackHeight","clientY","width","left","trackLeft","trackWidth","_roundValue","_getStep","button","pauseUserIdle","_onDragStart","_onStopDragging","resumeUserIdle","_onDragEnd","_lastDownKey","test","_getKeyValue","repeat","shiftKey","isValidKey","keys","includes","_getKeyStep","modifiedStep","direction","leading","sliderValueFormatContext","$$_templ$h","$$_templ_2$6","$$_templ_3$1","$$_templ_4","Slider","store","_readonly","focus","getAttribute","_watchMinMax","_watchDisabled","_watchValue","_setAttrs","_setupPreview","$$_root","$$_walker","$$_el","_getARIADisabled","_getARIAValueMin","_getARIAValueMax","_getARIAValueNow","_getARIAValueText","_isStyled","_watchCSSVars","_updateSliderVars","setProperty","_preview","_watchPreview","Promise","resolve","then","preview","setupPreviewStyles","window","requestAnimationFrame","_onPreviewResize","observer","ResizeObserver","observe","disconnect","$$_templ$g","Thumbnail","time","_img","_coords","_styleResets","_src","_loaded","_activeCue","_isLoading","_onLoadStart","_onFindActiveCue","_onResolveThumbnail","thumbnails","_onLoaded","_requestResize","duration","thumbnailCues","isFinite","_cues","_time","_onImgRef","activeCue","_resetStyles","text","_resolveThumbnailCoords","_resolveThumbnailSrc","baseURL","src","slice","join","replace","coords","values","resolvedCoords","coordValues","_resize","w","x","y","maxWidth","maxHeight","minWidth","minHeight","getComputedStyle","minRatio","parseInt","maxRatio","scale","_style","naturalWidth","naturalHeight","name","push","removeProperty","reset","crossorigin","$$_templ$f","SliderThumbnail","register","_slider","_getTime","$$_templ$e","SliderVideo","_video","_canPlay","_error","_hidden","_getSrc","_onSrcChange","_onTimeUpdate","readyState","_onCanPlay","_onError","_setVideo","canLoad","padNumberWithZeroes","expectedLength","str","actualLength","shouldPad","padLength","padding","parseTime","hours","trunc","minutes","fraction","toPrecision","formatTime","shouldPadHours","shouldPadMinutes","shouldAlwaysShowHours","paddedHours","paddedMinutes","paddedSeconds","formatSpokenTime","spokenParts","$$_templ$d","SliderValue","type","format","showHours","padHours","padMinutes","_format","_text","_getText","sliderValue","percent","$$_expr","nextNode","VolumeSlider","attribute","canSet","_watchVolume","_throttleVolumeChange","_onVolumeChange","mediaVolume","changeVolume","ClassManager","_root","_observer","_map","Map","_classes","firstChild","MutationObserver","_onMutation","subtree","childList","_watch","_destroy","records","selector","Array","from","record","node","addedNodes","matches","_requestUpdate","_observe","$class","_update","classes","_class","querySelectorAll","clear","$$_templ$c","$$_templ_2$5","SliderChaptersRenderer","_onChange","_chapters","_refs","_activeChapterIndex","_bufferedChapterIndex","cues","_renderChapters","_fillChapterGaps","firstChapter","startTime","_renderChapter","_updateContainerWidths","_watchFillPercent","_watchPointerPercent","_watchBufferedPercent","_getChapterTrackFill","container","nextSibling","_getChapterTrackProgress","lastChild","_getChaptersEndTime","endTime","cue","currentChapter","activeIndex","_findActiveChapterIndex","_updateTrackFillWidths","trackFill","_calcChapterPercent","start","end","startIndex","chapterPercent","_updateBufferedPercent","_bufferedPercent","bufferedPercent","_calcMediaBufferedPercent","bufferedEnd","lastChapter","startPercent","endPercent","chapters","currentCue","nextCue","timeDiff","VTTCue","TimeSlider","pauseWhileDragging","seekingRequestThrottle","chaptersClass","chapterContainerClass","chapterClass","_dispatchSeeking","_track","_chaptersRenderer","_classManager","_formatValue","_formatTime","_chapterTitle","_hasChapters","setStyles","_calcBufferedPercent","_watchCurrentTime","_watchSeekingThrottle","_onTrackChange","_watchPreviewing","_onTrackModeChange","tracks","_seeking","_timeToPercent","seeking","_seek","cancel","live","seekToLiveEdge","_playingBeforeDragStart","_percentToTime","liveEdge","isNaN","_chapterTitleEl","_onChapterTitleChange","textContent","menuContext","FOCUSABLE_ELEMENTS_SELECTOR","map","VALID_KEYS","Set","MenuFocusController","_index","_el","_elements","_items","_attach","_listen","_getFocusableElements","_scroll","index","_findActiveIndex","element","_getScrollContainer","scrollTop","offsetTop","offsetHeight","_focusAt","findIndex","setTimeout","has","stopPropagation","_closeMenu","_nextIndex","delta","offsetParent","focusableElements","elements","is","HTMLElement","__defProp$2","__getOwnPropDesc$2","__decorateClass$2","idCount","Menu","_menuId","_menuButtonId","_expanded","_disabled","_buttonDisabled","_parentMenu","_submenus","_menuButton","_menuItems","_menuObserver","_focus","currentIdCount","_findScrollContainer","close","_hint","_disable","_attachMenuButton","_attachMenuItems","_attachObserver","_disableMenuButton","_addSubmenu","_watchBreakpoint","_watchExpanded","_onResize","onDestroy","_removePopupMenu","contains","menu","parentElement","append","localName","destroy","remove","breakpointX","breakpointY","viewType","orientation","popup","cloneNode","appendChild","mediaRing","mediaRingValue","getPropertyValue","body","scope","expanded","_isExpanded","_updateMenuItemsHidden","closeTarget","_getCloseTarget","_onCloseTargetPress","_onPointerUp","_onWindowPointerUp","isMenuItem","isExpanded","isARIAExpanded","isARIADisabled","_onMenuButtonPress","_changeIdleTracking","activeMenu","_onOpen","_onClose","_disableBind","parentNode","add","_onSubmenuOpenBind","_onSubmenuCloseBind","_removeSubmenuBind","_removeSubmenu","delete","_onSubmenuOpen","_onSubmenuClose","parseFloat","paddingTop","paddingBottom","children","child","open","MenuButton","_menu","hint","pop","MenuItems","radioGroupContext","__defProp$1","__getOwnPropDesc$1","__decorateClass$1","RadioGroup","_group","_value","radio","_addRadio","_removeRadio","_watchValueProp","_onCheck","_onChangeBind","_check","currentValue","currentRadio","_findRadio","newRadio","__defProp","__getOwnPropDesc","__decorateClass","$$_templ$b","Radio","_checked","_controller","checked","_addToGroup","role","tabindex","onDisconnect","group","$$_templ$a","$$_templ_2$4","renderRadioGroup","onChange","radioGroupClass","renderOptions","options","option","part","content","$$_templ$9","$$_templ_2$3","ChaptersMenuItems","containerClass","thumbnailClass","contentClass","titleClass","startTimeClass","durationClass","_hasThumbnails","_watchControllerDisabled","activeCueIndex","playedPercent","_getValue","_getOptions","$$_signal","$$_expr_2","$$_expr_3","$$_templ$8","AudioMenuItems","emptyLabel","radioClass","radioCheckClass","_watchHintText","audioTrack","label","audioTracks","radioGroup","toArray","toLowerCase","changeAudioTrack","Icon$51","Icon$10","Icon$18","$$_templ$7","$$_templ_2$2","renderMenuButtonContent","iconPaths","AudioMenuButton","$$_templ$6","$$_templ_2$1","CaptionsMenuItems","offLabel","mode","selected","index2","indexOf","changeTextTrackMode","CaptionsMenuButton","$$_templ$5","PlaybackRateMenuItems","normalLabel","rates","playbackRate","changePlaybackRate","Icon$55","PlaybackRateMenuButton","$$_templ$4","$$_templ_2","$$_templ_3","QualityMenuItems","autoLabel","hideBitrate","_sortedQualities","qualities","sort","bitrate","autoQuality","quality","qualityText","canSetQuality","changeQuality","_getQualityId","currentQuality","Icon$83","QualityMenuButton","Gesture","action","_attachListener","eventType","_acceptEvent","_presses","_pressTimerId","_inBounds","MEDIA_GESTURE","isDblEvent","startsWith","_handleEvent","queueMicrotask","clearTimeout","_isTopLayer","_performAction","touch","inBounds","top","right","gestures","zIndex","component","toggleFullscreen","$$_templ$3","BufferingIndicator","_isBuffering","canPlay","waiting","CaptionsTextRenderer","_renderer","priority","_disposal","attach","canRender","detach","empty","changeTrack","_changeTrack","once","addCue","removeCue","regions","Captions","textDir","_textRenderer","_watchViewType","textRenderers","_setupAudioView","_setupVideoView","_onCueChange","_onUpdateTimedNodes","activeCues","cueEl","createElement","innerHTML","_watchTextDirection","_watchMediaTime","$$_templ$2","LiveIndicator","_getTabIndex","_getRole","$$_templ$1","Poster","alt","_imgLoading","_imgError","_imgSrc","_imgAlt","_getImgSrc","_getImgAlt","poster","isLoading","_onLoad","$$_templ","Time","remainder","_getSeconds","styles","freeze","__proto__","B","C","D","E","F","G","L","M","P","Q","R","S","T","V","j","k","l","m","n","q","r","t","v","z"],"sources":["/Users/user/Documents/mobilestreamapp/client/node_modules/vidstack/dist/dev/media-ui.js"],"sourcesContent":["import { signal, effect, createContext, hasProvidedContext, useContext, provideContext, peek, isWriteSignal, StoreFactory, useStore, computed, onDispose, scoped, tick } from 'maverick.js';\nimport { ComponentController, Component, defineElement, prop, defineProp, method } from 'maverick.js/element';\nimport { s as scopedRaf, A as ARIAKeyShortcuts, a as setAttributeIfEmpty, o as onPress, u as useMedia, b as setARIALabel, i as isTrackCaptionKind, I as IS_SAFARI, f as functionThrottle, c as findActiveCue, d as canChangeVolume, e as onTrackChapterChange, g as isElementParent, h as isCueActive, p as preconnect } from './media-core.js';\nimport { $$_create_component, $$_create_walker, $$_effect, $$_attr, $$_next_element, $$_create_template, $$_listen, $$_ref, $$_setup_custom_element, $$_insert_at_marker_lite, $$_peek, $$_clone, $$_insert_lite, $$_computed, $$_next_template, $$_scoped } from 'maverick.js/dom';\nimport { I as Icon } from './icons/icon.js';\nimport { listenEvent, setAttribute, ariaBool as ariaBool$1, isNull, isNumber, setStyle, isDOMEvent, isKeyboardEvent, isUndefined, animationFrameThrottle, isDOMElement, isPointerEvent, isMouseEvent, isTouchEvent, kebabToCamelCase, createDisposalBin } from 'maverick.js/std';\nimport { CaptionsRenderer, renderVTTCueString, updateTimedVTTCueNodes } from 'media-captions';\n\nfunction round(num, decimalPlaces = 2) {\n  return Number(num.toFixed(decimalPlaces));\n}\nfunction getNumberOfDecimalPlaces(num) {\n  return String(num).split(\".\")[1]?.length ?? 0;\n}\nfunction clampNumber(min, value, max) {\n  return Math.max(min, Math.min(max, value));\n}\n\nlet $keyboard = signal(false);\n{\n  listenEvent(document, \"pointerdown\", () => {\n    $keyboard.set(false);\n  });\n  listenEvent(document, \"keydown\", (e) => {\n    if (e.metaKey || e.altKey || e.ctrlKey)\n      return;\n    $keyboard.set(true);\n  });\n}\nclass FocusVisibleController extends ComponentController {\n  _focused = signal(false);\n  onConnect(el) {\n    effect(() => {\n      if (!$keyboard()) {\n        this._focused.set(false);\n        updateFocusAttr(el, false);\n        this.listen(\"pointerenter\", this._onPointerEnter.bind(this));\n        this.listen(\"pointerleave\", this._onPointerLeave.bind(this));\n        return;\n      }\n      const active = document.activeElement === el;\n      this._focused.set(active);\n      updateFocusAttr(el, active);\n      this.listen(\"focus\", this._onFocus.bind(this));\n      this.listen(\"blur\", this._onBlur.bind(this));\n    });\n  }\n  focused() {\n    return this._focused();\n  }\n  _onFocus() {\n    this._focused.set(true);\n    updateFocusAttr(this.el, true);\n  }\n  _onBlur() {\n    this._focused.set(false);\n    updateFocusAttr(this.el, false);\n  }\n  _onPointerEnter() {\n    updateHoverAttr(this.el, true);\n  }\n  _onPointerLeave() {\n    updateHoverAttr(this.el, false);\n  }\n}\nfunction updateFocusAttr(el, isFocused) {\n  setAttribute(el, \"data-focus\", isFocused);\n  setAttribute(el, \"data-hocus\", isFocused);\n}\nfunction updateHoverAttr(el, isHovering) {\n  setAttribute(el, \"data-hocus\", isHovering);\n  setAttribute(el, \"data-hover\", isHovering);\n}\n\nconst tooltipContext = createContext();\n\nclass Tooltip extends Component {\n  static el = defineElement({\n    tagName: \"media-tooltip\",\n    props: { position: \"top center\" }\n  });\n  onAttach(el) {\n    if (hasProvidedContext(tooltipContext)) {\n      scopedRaf(() => {\n        if (!el.isConnected)\n          return;\n        const tooltip = useContext(tooltipContext);\n        tooltip._attachTooltip(el);\n      });\n    }\n    this.setAttributes({\n      position: this.$props.position\n    });\n  }\n}\n\nlet id = 0;\nclass TooltipController extends ComponentController {\n  constructor(instance) {\n    super(instance);\n    provideContext(tooltipContext, {\n      _attachTooltip: this._attachTooltip.bind(this)\n    });\n  }\n  _attachTooltip(tooltipEl) {\n    const tooltipId = `media-tooltip-${++id}`;\n    setAttribute(this.el, \"aria-describedby\", tooltipId);\n    setAttribute(tooltipEl, \"id\", tooltipId);\n    setAttribute(tooltipEl, \"role\", \"tooltip\");\n    this.el.removeAttribute(\"aria-label\");\n  }\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __getOwnPropDesc$3 = Object.getOwnPropertyDescriptor;\nvar __decorateClass$3 = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$3(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp$3(target, key, result);\n  return result;\n};\nconst toggleButtonProps = {\n  disabled: false,\n  defaultPressed: false,\n  defaultAppearance: false\n};\nclass ToggleButton extends Component {\n  static el = defineElement({\n    tagName: \"media-toggle-button\",\n    props: toggleButtonProps\n  });\n  _pressed = signal(false);\n  _keyShortcut;\n  constructor(instance) {\n    super(instance);\n    new FocusVisibleController(instance);\n    new TooltipController(instance);\n    if (this._keyShortcut)\n      new ARIAKeyShortcuts(instance, this._keyShortcut);\n  }\n  get pressed() {\n    return peek(this._pressed);\n  }\n  onAttach(el) {\n    if (isWriteSignal(this._pressed)) {\n      this._pressed.set(this.$props.defaultPressed());\n    }\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    const { disabled, defaultAppearance } = this.$props;\n    this.setAttributes({\n      disabled,\n      \"default-appearance\": defaultAppearance,\n      \"data-pressed\": this._pressed,\n      \"aria-pressed\": this._isARIAPressed.bind(this),\n      \"data-media-button\": true\n    });\n  }\n  onConnect(el) {\n    onPress(el, this._onMaybePress.bind(this));\n  }\n  _isARIAPressed() {\n    return ariaBool$1(this._pressed());\n  }\n  _onPress(event) {\n    if (isWriteSignal(this._pressed)) {\n      this._pressed.set((p) => !p);\n    }\n  }\n  _onMaybePress(event) {\n    const disabled = this.$props.disabled();\n    if (disabled) {\n      if (disabled)\n        event.stopImmediatePropagation();\n      return;\n    }\n    event.preventDefault();\n    this._onPress(event);\n  }\n}\n__decorateClass$3([\n  prop\n], ToggleButton.prototype, \"pressed\", 1);\n\nvar Icon$56 = `<path d=\"M8.66667 6.66667C8.29848 6.66667 8 6.96514 8 7.33333V24.6667C8 25.0349 8.29848 25.3333 8.66667 25.3333H12.6667C13.0349 25.3333 13.3333 25.0349 13.3333 24.6667V7.33333C13.3333 6.96514 13.0349 6.66667 12.6667 6.66667H8.66667Z\" fill=\"currentColor\"/> <path d=\"M19.3333 6.66667C18.9651 6.66667 18.6667 6.96514 18.6667 7.33333V24.6667C18.6667 25.0349 18.9651 25.3333 19.3333 25.3333H23.3333C23.7015 25.3333 24 25.0349 24 24.6667V7.33333C24 6.96514 23.7015 6.66667 23.3333 6.66667H19.3333Z\" fill=\"currentColor\"/>`;\n\nvar Icon$59 = `<path d=\"M10.6667 6.6548C10.6667 6.10764 11.2894 5.79346 11.7295 6.11862L24.377 15.4634C24.7377 15.7298 24.7377 16.2692 24.3771 16.5357L11.7295 25.8813C11.2895 26.2065 10.6667 25.8923 10.6667 25.3451L10.6667 6.6548Z\" fill=\"currentColor\"/>`;\n\nvar Icon$71 = `<path d=\"M15.6038 12.2147C16.0439 12.5399 16.6667 12.2257 16.6667 11.6786V10.1789C16.6667 10.1001 16.7351 10.0384 16.8134 10.0479C20.1116 10.4494 22.6667 13.2593 22.6667 16.6659C22.6667 20.3481 19.6817 23.3332 15.9995 23.3332C12.542 23.3332 9.69927 20.7014 9.36509 17.332C9.32875 16.9655 9.03371 16.6662 8.66548 16.6662L6.66655 16.6666C6.29841 16.6666 5.99769 16.966 6.02187 17.3334C6.36494 22.5454 10.7012 26.6667 16 26.6667C21.5228 26.6667 26 22.1895 26 16.6667C26 11.4103 21.9444 7.10112 16.7916 6.69757C16.7216 6.69209 16.6667 6.63396 16.6667 6.56372V4.98824C16.6667 4.44106 16.0439 4.12689 15.6038 4.45206L11.0765 7.79738C10.7159 8.06387 10.7159 8.60326 11.0766 8.86973L15.6038 12.2147Z\" fill=\"currentColor\"/>`;\n\nclass PlayButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-play-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"togglePaused\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    const { paused, ended } = this._media.$store;\n    this.setAttributes({\n      \"data-paused\": paused,\n      \"data-ended\": ended\n    });\n  }\n  _onPress(event) {\n    const remote = this._media.remote;\n    this._pressed() ? remote.pause(event) : remote.play(event);\n  }\n  _isPressed() {\n    const { paused } = this._media.$store;\n    return !paused();\n  }\n  _getLabel() {\n    const { paused } = this._media.$store;\n    return paused() ? \"Play\" : \"Pause\";\n  }\n  render() {\n    return [\n      $$_create_component(Icon, { paths: Icon$59, slot: \"play\" }),\n      $$_create_component(Icon, { paths: Icon$71, slot: \"replay\" }),\n      $$_create_component(Icon, { paths: Icon$56, slot: \"pause\" })\n    ];\n  }\n}\n\nvar Icon$24 = `<path d=\"M8 28.0003C8 27.6321 8.29848 27.3336 8.66667 27.3336H23.3333C23.7015 27.3336 24 27.6321 24 28.0003V29.3336C24 29.7018 23.7015 30.0003 23.3333 30.0003H8.66667C8.29848 30.0003 8 29.7018 8 29.3336V28.0003Z\" fill=\"currentColor\"/> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.66602 6.66699C4.29783 6.66699 3.99935 6.96547 3.99935 7.33366V24.667C3.99935 25.0352 4.29783 25.3337 4.66602 25.3337H27.3327C27.7009 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.7009 6.66699 27.3327 6.66699H4.66602ZM8.66659 21.3333C8.2984 21.3333 7.99992 21.0349 7.99992 20.6667V11.3333C7.99992 10.9651 8.2984 10.6667 8.66659 10.6667H13.9999C14.3681 10.6667 14.6666 10.9651 14.6666 11.3333V12.6667C14.6666 13.0349 14.3681 13.3333 13.9999 13.3333H10.7999C10.7263 13.3333 10.6666 13.393 10.6666 13.4667V18.5333C10.6666 18.607 10.7263 18.6667 10.7999 18.6667H13.9999C14.3681 18.6667 14.6666 18.9651 14.6666 19.3333V20.6667C14.6666 21.0349 14.3681 21.3333 13.9999 21.3333H8.66659ZM17.9999 21.3333C17.6317 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6317 10.6667 17.9999 10.6667H23.3333C23.7014 10.6667 23.9999 10.9651 23.9999 11.3333V12.6667C23.9999 13.0349 23.7014 13.3333 23.3333 13.3333H20.1333C20.0596 13.3333 19.9999 13.393 19.9999 13.4667V18.5333C19.9999 18.607 20.0596 18.6667 20.1333 18.6667H23.3333C23.7014 18.6667 23.9999 18.9651 23.9999 19.3333V20.6667C23.9999 21.0349 23.7014 21.3333 23.3333 21.3333H17.9999Z\" fill=\"currentColor\"/>`;\n\nvar Icon$25 = `<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.6661 6.66699C4.29791 6.66699 3.99943 6.96547 3.99943 7.33366V24.667C3.99943 25.0352 4.29791 25.3337 4.6661 25.3337H27.3328C27.701 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.701 6.66699 27.3328 6.66699H4.6661ZM8.66667 21.3333C8.29848 21.3333 8 21.0349 8 20.6667V11.3333C8 10.9651 8.29848 10.6667 8.66667 10.6667H14C14.3682 10.6667 14.6667 10.9651 14.6667 11.3333V12.6667C14.6667 13.0349 14.3682 13.3333 14 13.3333H10.8C10.7264 13.3333 10.6667 13.393 10.6667 13.4667V18.5333C10.6667 18.607 10.7264 18.6667 10.8 18.6667H14C14.3682 18.6667 14.6667 18.9651 14.6667 19.3333V20.6667C14.6667 21.0349 14.3682 21.3333 14 21.3333H8.66667ZM18 21.3333C17.6318 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6318 10.6667 18 10.6667H23.3333C23.7015 10.6667 24 10.9651 24 11.3333V12.6667C24 13.0349 23.7015 13.3333 23.3333 13.3333H20.1333C20.0597 13.3333 20 13.393 20 13.4667V18.5333C20 18.607 20.0597 18.6667 20.1333 18.6667H23.3333C23.7015 18.6667 24 18.9651 24 19.3333V20.6667C24 21.0349 23.7015 21.3333 23.3333 21.3333H18Z\" fill=\"currentColor\"/>`;\n\nfunction ariaBool(value) {\n  return value ? \"true\" : \"false\";\n}\nfunction $ariaBool(signal) {\n  return () => ariaBool(signal());\n}\n\nclass CaptionButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-caption-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"toggleCaptions\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  _onPress(event) {\n    this._media.remote.toggleCaptions(event);\n  }\n  _isPressed() {\n    const { textTrack } = this._media.$store, track = textTrack();\n    return !!track && isTrackCaptionKind(track);\n  }\n  _isHidden() {\n    const { textTracks } = this._media.$store;\n    return textTracks().filter(isTrackCaptionKind).length == 0;\n  }\n  _getLabel() {\n    const { textTrack } = this._media.$store;\n    return textTrack() ? \"Closed-Captions Off\" : \"Closed-Captions On\";\n  }\n  render() {\n    return [\n      $$_create_component(Icon, { paths: Icon$24, slot: \"on\" }),\n      $$_create_component(Icon, { paths: Icon$25, slot: \"off\" })\n    ];\n  }\n}\n\nvar Icon$37 = `<path d=\"M19.3334 13.3333C18.9652 13.3333 18.6667 13.0349 18.6667 12.6667L18.6667 7.33333C18.6667 6.96514 18.9652 6.66666 19.3334 6.66666H21.3334C21.7015 6.66666 22 6.96514 22 7.33333V9.86666C22 9.9403 22.0597 10 22.1334 10L24.6667 10C25.0349 10 25.3334 10.2985 25.3334 10.6667V12.6667C25.3334 13.0349 25.0349 13.3333 24.6667 13.3333L19.3334 13.3333Z\" fill=\"currentColor\"/> <path d=\"M13.3334 19.3333C13.3334 18.9651 13.0349 18.6667 12.6667 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V21.3333C6.66669 21.7015 6.96516 22 7.33335 22H9.86669C9.94032 22 10 22.0597 10 22.1333L10 24.6667C10 25.0349 10.2985 25.3333 10.6667 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667L13.3334 19.3333Z\" fill=\"currentColor\"/> <path d=\"M18.6667 24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333H21.3334C21.7015 25.3333 22 25.0349 22 24.6667V22.1333C22 22.0597 22.0597 22 22.1334 22H24.6667C25.0349 22 25.3334 21.7015 25.3334 21.3333V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667L19.3334 18.6667C18.9652 18.6667 18.6667 18.9651 18.6667 19.3333L18.6667 24.6667Z\" fill=\"currentColor\"/> <path d=\"M10.6667 13.3333H12.6667C13.0349 13.3333 13.3334 13.0349 13.3334 12.6667L13.3334 10.6667V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H10.6667C10.2985 6.66666 10 6.96514 10 7.33333L10 9.86666C10 9.9403 9.94033 10 9.86669 10L7.33335 10C6.96516 10 6.66669 10.2985 6.66669 10.6667V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333L10.6667 13.3333Z\" fill=\"currentColor\"/>`;\n\nvar Icon$38 = `<path d=\"M25.3299 7.26517C25.2958 6.929 25.0119 6.66666 24.6667 6.66666H19.3334C18.9652 6.66666 18.6667 6.96514 18.6667 7.33333V9.33333C18.6667 9.70152 18.9652 10 19.3334 10L21.8667 10C21.9403 10 22 10.0597 22 10.1333V12.6667C22 13.0349 22.2985 13.3333 22.6667 13.3333H24.6667C25.0349 13.3333 25.3334 13.0349 25.3334 12.6667V7.33333C25.3334 7.31032 25.3322 7.28758 25.3299 7.26517Z\" fill=\"currentColor\"/> <path d=\"M22 21.8667C22 21.9403 21.9403 22 21.8667 22L19.3334 22C18.9652 22 18.6667 22.2985 18.6667 22.6667V24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333L24.6667 25.3333C25.0349 25.3333 25.3334 25.0349 25.3334 24.6667V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667H22.6667C22.2985 18.6667 22 18.9651 22 19.3333V21.8667Z\" fill=\"currentColor\"/> <path d=\"M12.6667 22H10.1334C10.0597 22 10 21.9403 10 21.8667V19.3333C10 18.9651 9.70154 18.6667 9.33335 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V24.6667C6.66669 25.0349 6.96516 25.3333 7.33335 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667V22.6667C13.3334 22.2985 13.0349 22 12.6667 22Z\" fill=\"currentColor\"/> <path d=\"M10 12.6667V10.1333C10 10.0597 10.0597 10 10.1334 10L12.6667 10C13.0349 10 13.3334 9.70152 13.3334 9.33333V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H7.33335C6.96516 6.66666 6.66669 6.96514 6.66669 7.33333V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333H9.33335C9.70154 13.3333 10 13.0349 10 12.6667Z\" fill=\"currentColor\"/>`;\n\nclass FullscreenButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-fullscreen-button\",\n    props: {\n      ...toggleButtonProps,\n      target: \"prefer-media\"\n    }\n  });\n  _media;\n  _keyShortcut = \"toggleFullscreen\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    const { fullscreen } = this._media.$store;\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this)),\n      \"data-fullscreen\": fullscreen\n    });\n  }\n  _onPress(event) {\n    const remote = this._media.remote, target = this.$props.target();\n    this._pressed() ? remote.exitFullscreen(target, event) : remote.enterFullscreen(target, event);\n  }\n  _isPressed() {\n    const { fullscreen } = this._media.$store;\n    return fullscreen();\n  }\n  _isHidden() {\n    const { canFullscreen } = this._media.$store;\n    return !canFullscreen();\n  }\n  _getLabel() {\n    const { fullscreen } = this._media.$store;\n    return fullscreen() ? \"Exit Fullscreen\" : \"Enter Fullscreen\";\n  }\n  render() {\n    return [\n      $$_create_component(Icon, { paths: Icon$38, slot: \"enter\" }),\n      $$_create_component(Icon, { paths: Icon$37, slot: \"exit\" })\n    ];\n  }\n}\n\nvar Icon$52 = `<path d=\"M17.5091 24.6594C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3325V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.8036C16.8863 6.47842 17.5091 6.79259 17.5091 7.33977L17.5091 24.6594Z\" fill=\"currentColor\"/> <path d=\"M28.8621 13.6422C29.1225 13.3818 29.1225 12.9597 28.8621 12.6994L27.9193 11.7566C27.659 11.4962 27.2368 11.4962 26.9765 11.7566L24.7134 14.0197C24.6613 14.0717 24.5769 14.0717 24.5248 14.0197L22.262 11.7568C22.0016 11.4964 21.5795 11.4964 21.3191 11.7568L20.3763 12.6996C20.116 12.9599 20.116 13.382 20.3763 13.6424L22.6392 15.9053C22.6913 15.9573 22.6913 16.0418 22.6392 16.0938L20.3768 18.3562C20.1165 18.6166 20.1165 19.0387 20.3768 19.299L21.3196 20.2419C21.58 20.5022 22.0021 20.5022 22.2624 20.2418L24.5248 17.9795C24.5769 17.9274 24.6613 17.9274 24.7134 17.9795L26.976 20.2421C27.2363 20.5024 27.6585 20.5024 27.9188 20.2421L28.8616 19.2992C29.122 19.0389 29.122 18.6168 28.8616 18.3564L26.599 16.0938C26.547 16.0418 26.547 15.9573 26.599 15.9053L28.8621 13.6422Z\" fill=\"currentColor\"/>`;\n\nvar Icon$101 = `<path d=\"M17.5091 24.6595C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9992 9.36923 19.9992H4.66667C4.29848 19.9992 4 19.7007 4 19.3325V12.6658C4 12.2976 4.29848 11.9992 4.66667 11.9992H9.37115C9.39967 11.9992 9.42745 11.99 9.45039 11.9731L16.4463 6.80363C16.8863 6.47845 17.5091 6.79262 17.5091 7.3398L17.5091 24.6595Z\" fill=\"currentColor\"/> <path d=\"M27.5091 9.33336C27.8773 9.33336 28.1758 9.63184 28.1758 10V22C28.1758 22.3682 27.8773 22.6667 27.5091 22.6667H26.1758C25.8076 22.6667 25.5091 22.3682 25.5091 22V10C25.5091 9.63184 25.8076 9.33336 26.1758 9.33336L27.5091 9.33336Z\" fill=\"currentColor\"/> <path d=\"M22.1758 12C22.544 12 22.8424 12.2985 22.8424 12.6667V19.3334C22.8424 19.7016 22.544 20 22.1758 20H20.8424C20.4743 20 20.1758 19.7016 20.1758 19.3334V12.6667C20.1758 12.2985 20.4743 12 20.8424 12H22.1758Z\" fill=\"currentColor\"/>`;\n\nvar Icon$102 = `<path d=\"M17.5091 24.6594C17.5091 25.2066 16.8864 25.5207 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3324V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.80358C16.8863 6.4784 17.5091 6.79258 17.5091 7.33975L17.5091 24.6594Z\" fill=\"currentColor\"/> <path d=\"M22.8424 12.6667C22.8424 12.2985 22.544 12 22.1758 12H20.8424C20.4743 12 20.1758 12.2985 20.1758 12.6667V19.3333C20.1758 19.7015 20.4743 20 20.8424 20H22.1758C22.544 20 22.8424 19.7015 22.8424 19.3333V12.6667Z\" fill=\"currentColor\"/>`;\n\nclass MuteButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-mute-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"toggleMuted\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    setARIALabel(el, this._getLabel.bind(this));\n    this.setAttributes({\n      \"data-muted\": this._pressed,\n      \"data-volume\": this._getVolumeText.bind(this)\n    });\n    super.onAttach(el);\n  }\n  _onPress(event) {\n    const remote = this._media.remote;\n    this._pressed() ? remote.unmute(event) : remote.mute(event);\n  }\n  _isPressed() {\n    const { muted, volume } = this._media.$store;\n    return muted() || volume() === 0;\n  }\n  _getLabel() {\n    return this._pressed() ? \"Unmute\" : \"Mute\";\n  }\n  _getVolumeText() {\n    const { muted, volume } = this._media.$store, $volume = volume();\n    if (muted() || $volume === 0)\n      return \"muted\";\n    else if ($volume >= 0.5)\n      return \"high\";\n    else if ($volume < 0.5)\n      return \"low\";\n  }\n  render() {\n    return [\n      $$_create_component(Icon, { paths: Icon$101, slot: \"volume-high\" }),\n      $$_create_component(Icon, { paths: Icon$102, slot: \"volume-low\" }),\n      $$_create_component(Icon, { paths: Icon$52, slot: \"volume-muted\" })\n    ];\n  }\n}\n\nvar Icon$57 = `<path d=\"M5.33334 26V19.4667C5.33334 19.393 5.39304 19.3333 5.46668 19.3333H7.86668C7.94031 19.3333 8.00001 19.393 8.00001 19.4667V23.3333C8.00001 23.7015 8.29849 24 8.66668 24H23.3333C23.7015 24 24 23.7015 24 23.3333V8.66666C24 8.29847 23.7015 7.99999 23.3333 7.99999H19.4667C19.393 7.99999 19.3333 7.9403 19.3333 7.86666V5.46666C19.3333 5.39302 19.393 5.33333 19.4667 5.33333H26C26.3682 5.33333 26.6667 5.63181 26.6667 5.99999V26C26.6667 26.3682 26.3682 26.6667 26 26.6667H6.00001C5.63182 26.6667 5.33334 26.3682 5.33334 26Z\" fill=\"currentColor\"/> <path d=\"M14.0098 8.42359H10.806C10.6872 8.42359 10.6277 8.56721 10.7117 8.6512L16.5491 14.4886C16.8094 14.7489 16.8094 15.171 16.5491 15.4314L15.3234 16.657C15.0631 16.9174 14.641 16.9174 14.3806 16.657L8.63739 10.9138C8.55339 10.8298 8.40978 10.8893 8.40978 11.0081V14.0236C8.40978 14.3918 8.1113 14.6903 7.74311 14.6903H6.00978C5.64159 14.6903 5.34311 14.3918 5.34311 14.0236L5.34311 6.02359C5.34311 5.6554 5.64159 5.35692 6.00978 5.35692L14.0098 5.35692C14.378 5.35692 14.6764 5.6554 14.6764 6.02359V7.75692C14.6764 8.12511 14.378 8.42359 14.0098 8.42359Z\" fill=\"currentColor\"/>`;\n\nvar Icon$58 = `<path d=\"M16 15.3333C15.6318 15.3333 15.3333 15.6318 15.3333 16V20C15.3333 20.3682 15.6318 20.6667 16 20.6667H21.3333C21.7015 20.6667 22 20.3682 22 20V16C22 15.6318 21.7015 15.3333 21.3333 15.3333H16Z\" fill=\"currentColor\"/> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5.33333 7.33334C5.33333 6.96515 5.63181 6.66667 5.99999 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V24.6667C26.6667 25.0349 26.3682 25.3333 26 25.3333H5.99999C5.63181 25.3333 5.33333 25.0349 5.33333 24.6667V7.33334ZM7.99999 10C7.99999 9.63182 8.29847 9.33334 8.66666 9.33334H23.3333C23.7015 9.33334 24 9.63182 24 10V22C24 22.3682 23.7015 22.6667 23.3333 22.6667H8.66666C8.29847 22.6667 7.99999 22.3682 7.99999 22V10Z\" fill=\"currentColor\"/>`;\n\nclass PIPButton extends ToggleButton {\n  static el = defineElement({\n    tagName: \"media-pip-button\",\n    props: toggleButtonProps\n  });\n  _media;\n  _keyShortcut = \"togglePictureInPicture\";\n  onAttach(el) {\n    this._media = useMedia();\n    this._pressed = this._isPressed.bind(this);\n    super.onAttach(el);\n    setARIALabel(el, this._getLabel.bind(this));\n    const { pictureInPicture } = this._media.$store;\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this)),\n      \"data-pip\": pictureInPicture\n    });\n  }\n  _onPress(event) {\n    const remote = this._media.remote;\n    this._pressed() ? remote.exitPictureInPicture(event) : remote.enterPictureInPicture(event);\n  }\n  _isPressed() {\n    const { pictureInPicture } = this._media.$store;\n    return pictureInPicture();\n  }\n  _isHidden() {\n    const { canPictureInPicture } = this._media.$store;\n    return !canPictureInPicture();\n  }\n  _getLabel() {\n    const { pictureInPicture } = this._media.$store;\n    return pictureInPicture() ? \"Exit Picture In Picture\" : \"Enter Picture In Picture\";\n  }\n  render() {\n    return [\n      $$_create_component(Icon, { paths: Icon$58, slot: \"enter\" }),\n      $$_create_component(Icon, { paths: Icon$57, slot: \"exit\" })\n    ];\n  }\n}\n\nvar Icon$77 = `<path d=\"M15.6038 12.2148C16.0439 12.5399 16.6667 12.2257 16.6667 11.6786V10.1789C16.6667 10.1001 16.7351 10.0384 16.8134 10.0479C20.1116 10.4494 22.6667 13.2593 22.6667 16.6659C22.6667 20.3481 19.6817 23.3332 15.9995 23.3332C12.542 23.3332 9.69927 20.7015 9.36509 17.332C9.32875 16.9655 9.03371 16.6662 8.66548 16.6662L6.66655 16.6666C6.29841 16.6666 5.99769 16.966 6.02187 17.3334C6.36494 22.5454 10.7012 26.6667 16 26.6667C21.5228 26.6667 26 22.1895 26 16.6667C26 11.4103 21.9444 7.10112 16.7916 6.69758C16.7216 6.69209 16.6667 6.63396 16.6667 6.56372V4.98824C16.6667 4.44106 16.0439 4.12689 15.6038 4.45207L11.0765 7.79738C10.7159 8.06387 10.7159 8.60327 11.0766 8.86974L15.6038 12.2148Z\" fill=\"currentColor\"/>`;\n\nvar Icon$81 = `<path d=\"M16.4167 12.2148C15.9766 12.5399 15.3538 12.2257 15.3538 11.6786V10.1789C15.3538 10.1001 15.2854 10.0384 15.2072 10.0479C11.9089 10.4494 9.35384 13.2593 9.35384 16.6659C9.35384 20.3481 12.3389 23.3332 16.0211 23.3332C19.4785 23.3332 22.3212 20.7015 22.6554 17.332C22.6918 16.9655 22.9868 16.6662 23.355 16.6662L25.354 16.6666C25.7221 16.6666 26.0228 16.966 25.9986 17.3334C25.6556 22.5454 21.3193 26.6667 16.0205 26.6667C10.4977 26.6667 6.02051 22.1895 6.02051 16.6667C6.02051 11.4103 10.0761 7.10112 15.2289 6.69758C15.2989 6.69209 15.3538 6.63396 15.3538 6.56372V4.98824C15.3538 4.44106 15.9766 4.12689 16.4167 4.45207L20.944 7.79738C21.3046 8.06387 21.3046 8.60327 20.9439 8.86974L16.4167 12.2148Z\" fill=\"currentColor\"/>`;\n\nclass SeekButton extends Component {\n  static el = defineElement({\n    tagName: \"media-seek-button\",\n    props: {\n      disabled: false,\n      defaultAppearance: false,\n      seconds: 30\n    }\n  });\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    new FocusVisibleController(instance);\n    new TooltipController(instance);\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setARIALabel(el, this._getLabel.bind(this));\n    const { seconds, defaultAppearance } = this.$props;\n    this.setAttributes({\n      seconds,\n      \"default-appearance\": defaultAppearance,\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this)),\n      \"data-media-button\": true\n    });\n  }\n  onConnect(el) {\n    onPress(el, this._onPress.bind(this));\n  }\n  _isHidden() {\n    const { canSeek } = this._media.$store;\n    return !canSeek();\n  }\n  _getLabel() {\n    const { seconds } = this.$props;\n    return `Seek ${seconds() > 0 ? \"forward\" : \"backward\"} ${seconds()} seconds`;\n  }\n  _onPress(event) {\n    const { seconds, disabled } = this.$props;\n    if (disabled())\n      return;\n    const { currentTime } = this._media.$store, seekTo = currentTime() + seconds();\n    this._media.remote.seek(seekTo, event);\n  }\n  render() {\n    return [\n      $$_create_component(Icon, { paths: Icon$77, slot: \"backward\" }),\n      $$_create_component(Icon, { paths: Icon$81, slot: \"forward\" })\n    ];\n  }\n}\n\nconst SliderStoreFactory = new StoreFactory({\n  min: 0,\n  max: 100,\n  value: 50,\n  pointerValue: 0,\n  focused: false,\n  dragging: false,\n  pointing: false,\n  get interactive() {\n    return this.dragging || this.focused || this.pointing;\n  },\n  get fillRate() {\n    return calcRate(this.min, this.max, this.value);\n  },\n  get fillPercent() {\n    return this.fillRate * 100;\n  },\n  get pointerRate() {\n    return calcRate(this.min, this.max, this.pointerValue);\n  },\n  get pointerPercent() {\n    return this.pointerRate * 100;\n  }\n});\nfunction calcRate(min, max, value) {\n  const range = max - min, offset = value - min;\n  return range > 0 ? offset / range : 0;\n}\n\nconst sliderProps = {\n  min: 0,\n  max: 100,\n  disabled: false,\n  value: 100,\n  step: 1,\n  keyStep: 1,\n  shiftKeyMultiplier: 5,\n  trackClass: null,\n  trackFillClass: null,\n  trackProgressClass: null,\n  thumbContainerClass: null,\n  thumbClass: null\n};\n\nfunction getClampedValue(min, max, value, step) {\n  return clampNumber(min, round(value, getNumberOfDecimalPlaces(step)), max);\n}\nfunction getValueFromRate(min, max, rate, step) {\n  const boundRate = clampNumber(0, rate, 1), range = max - min, fill = range * boundRate, stepRatio = fill / step, steps = step * stepRatio;\n  return min + steps;\n}\n\nconst SliderKeyDirection = {\n  Left: -1,\n  ArrowLeft: -1,\n  Up: 1,\n  ArrowUp: 1,\n  Right: 1,\n  ArrowRight: 1,\n  Down: -1,\n  ArrowDown: -1\n};\nclass SliderEventsController extends ComponentController {\n  constructor(instance, _delegate, _media) {\n    super(instance);\n    this._delegate = _delegate;\n    this._media = _media;\n  }\n  onConnect() {\n    effect(this._attachEventListeners.bind(this));\n    effect(this._attachPointerListeners.bind(this));\n    if (this._delegate._swipeGesture) {\n      scopedRaf(() => {\n        const outlet = this._media.player?.querySelector(\"media-outlet\");\n        if (outlet) {\n          this._outlet = outlet;\n          listenEvent(outlet, \"touchstart\", this._onTouchStart.bind(this));\n          listenEvent(outlet, \"touchmove\", this._onTouchMove.bind(this));\n        }\n      });\n    }\n  }\n  _outlet = null;\n  _touchX = null;\n  _touchStartValue = null;\n  _onTouchStart(event) {\n    this._touchX = event.touches[0].clientX;\n  }\n  _onTouchMove(event) {\n    if (isNull(this._touchX))\n      return;\n    event.preventDefault();\n    if (this.$store.dragging())\n      return;\n    const diff = event.touches[0].clientX - this._touchX;\n    if (Math.abs(diff) > 20) {\n      this._touchX = event.touches[0].clientX;\n      this._touchStartValue = this.$store.value();\n      this._onStartDragging(this._touchStartValue, event);\n    }\n  }\n  _attachEventListeners() {\n    if (this._delegate._isDisabled())\n      return;\n    this.listen(\"focus\", this._onFocus.bind(this));\n    this.listen(\"pointerenter\", this._onPointerEnter.bind(this));\n    this.listen(\"pointermove\", this._onPointerMove.bind(this));\n    this.listen(\"pointerleave\", this._onPointerLeave.bind(this));\n    this.listen(\"pointerdown\", this._onPointerDown.bind(this));\n    this.listen(\"keydown\", this._onKeyDown.bind(this));\n    this.listen(\"keyup\", this._onKeyUp.bind(this));\n  }\n  _attachPointerListeners() {\n    if (this._delegate._isDisabled() || !this.$store.dragging())\n      return;\n    listenEvent(document, \"pointerup\", this._onDocumentPointerUp.bind(this));\n    listenEvent(document, \"pointermove\", this._onDocumentPointerMove.bind(this));\n    if (IS_SAFARI) {\n      listenEvent(document, \"touchmove\", this._onDocumentTouchMove.bind(this), {\n        passive: false\n      });\n    }\n  }\n  _onFocus() {\n    this._updatePointerValue(this.$store.value());\n  }\n  _updateValue(newValue, trigger) {\n    const { value, min, max, dragging } = this.$store;\n    const clampedValue = Math.max(min(), Math.min(newValue, max()));\n    value.set(clampedValue);\n    const event = this.createEvent(\"value-change\", { detail: clampedValue, trigger });\n    this.el.dispatchEvent(event);\n    this._delegate._onValueChange(event);\n    if (dragging()) {\n      const event2 = this.createEvent(\"drag-value-change\", { detail: clampedValue, trigger });\n      this.el.dispatchEvent(event2);\n      this._delegate._onDragValueChange(event2);\n    }\n  }\n  _updatePointerValue(value, trigger) {\n    const { pointerValue, dragging } = this.$store;\n    pointerValue.set(value);\n    this.dispatch(\"pointer-value-change\", { detail: value, trigger });\n    if (dragging()) {\n      const dir = this._delegate._orientation === \"vertical\" ? \"bottom\" : \"left\", size = this._delegate._orientation === \"vertical\" ? \"height\" : \"width\";\n      if (this._trackFill && !this.el?.hasAttribute(\"data-chapters\")) {\n        this._trackFill.style[size] = value + \"%\";\n      }\n      if (this._thumb) {\n        this._thumb.style[dir] = value + \"%\";\n      }\n      this._updateValue(value, trigger);\n    }\n  }\n  _getPointerValue(event) {\n    let thumbPositionRate, rect = this.el.getBoundingClientRect(), { min, max } = this.$store;\n    if (this._delegate._orientation === \"vertical\") {\n      const { bottom: trackBottom, height: trackHeight } = rect;\n      thumbPositionRate = (trackBottom - event.clientY) / trackHeight;\n    } else {\n      if (this._touchX && isNumber(this._touchStartValue)) {\n        const { width } = this._outlet.getBoundingClientRect(), rate = (event.clientX - this._touchX) / width, range = max() - min(), diff = range * Math.abs(rate);\n        thumbPositionRate = (rate < 0 ? this._touchStartValue - diff : this._touchStartValue + diff) / range;\n      } else {\n        const { left: trackLeft, width: trackWidth } = rect;\n        thumbPositionRate = (event.clientX - trackLeft) / trackWidth;\n      }\n    }\n    return Math.max(\n      min(),\n      Math.min(\n        max(),\n        this._delegate._roundValue(\n          getValueFromRate(min(), max(), thumbPositionRate, this._delegate._getStep())\n        )\n      )\n    );\n  }\n  _onPointerEnter(event) {\n    this.$store.pointing.set(true);\n  }\n  _onPointerMove(event) {\n    const { dragging } = this.$store;\n    if (dragging())\n      return;\n    this._updatePointerValue(this._getPointerValue(event), event);\n  }\n  _onPointerLeave(event) {\n    this.$store.pointing.set(false);\n  }\n  _onPointerDown(event) {\n    if (event.button !== 0)\n      return;\n    const value = this._getPointerValue(event);\n    this._onStartDragging(value, event);\n    this._updatePointerValue(value, event);\n  }\n  _thumb = null;\n  _trackFill = null;\n  _onStartDragging(value, trigger) {\n    const { dragging } = this.$store;\n    if (dragging())\n      return;\n    dragging.set(true);\n    this._thumb = this.el.querySelector(\n      'shadow-root > div[part=\"thumb-container\"]'\n    );\n    this._trackFill = this.el.querySelector(\n      'shadow-root > div[part~=\"track-fill\"]'\n    );\n    this._media.remote.pauseUserIdle(trigger);\n    const event = this.createEvent(\"drag-start\", { detail: value, trigger });\n    this.el.dispatchEvent(event);\n    this._delegate._onDragStart(event);\n  }\n  _onStopDragging(value, trigger) {\n    const { dragging } = this.$store;\n    if (!dragging())\n      return;\n    dragging.set(false);\n    if (this._trackFill) {\n      setStyle(this._trackFill, \"width\", null);\n      this._trackFill = null;\n    }\n    if (this._thumb) {\n      setStyle(this._thumb, \"left\", null);\n      setStyle(this._thumb, \"bottom\", null);\n      this._thumb = null;\n    }\n    this._media.remote.resumeUserIdle(trigger);\n    const event = this.createEvent(\"drag-end\", { detail: value, trigger });\n    this.el.dispatchEvent(event);\n    this._delegate._onDragEnd(event);\n    this._touchX = null;\n    this._touchStartValue = null;\n  }\n  // -------------------------------------------------------------------------------------------\n  // Keyboard Events\n  // -------------------------------------------------------------------------------------------\n  _lastDownKey;\n  _onKeyDown(event) {\n    if (isDOMEvent(event)) {\n      const trigger = event.trigger;\n      if (isKeyboardEvent(trigger))\n        event = trigger;\n      else\n        return;\n    }\n    const { key } = event;\n    const { min, max } = this.$store;\n    let newValue;\n    if (key === \"Home\" || key === \"PageUp\") {\n      newValue = min();\n    } else if (key === \"End\" || key === \"PageDown\") {\n      newValue = max();\n    } else if (!event.metaKey && /[0-9]/.test(key)) {\n      newValue = (max() - min()) / 10 * Number(key);\n    }\n    if (!isUndefined(newValue)) {\n      this._updatePointerValue(newValue, event);\n      this._updateValue(newValue, event);\n      return;\n    }\n    const value = this._getKeyValue(event);\n    if (!value)\n      return;\n    const repeat = key === this._lastDownKey;\n    if (!this.$store.dragging() && repeat)\n      this._onStartDragging(value, event);\n    this._updatePointerValue(value, event);\n    if (!repeat)\n      this._updateValue(value, event);\n    this._lastDownKey = key;\n  }\n  _onKeyUp(event) {\n    if (isDOMEvent(event)) {\n      const trigger = event.trigger;\n      if (isKeyboardEvent(trigger))\n        event = trigger;\n      else\n        return;\n    }\n    this._lastDownKey = \"\";\n    const { dragging, value } = this.$store;\n    if (!dragging())\n      return;\n    const newValue = this._getKeyValue(event) ?? value();\n    this._updatePointerValue(newValue);\n    this._onStopDragging(newValue, event);\n  }\n  _getKeyValue(event) {\n    const { key, shiftKey } = event, isValidKey = Object.keys(SliderKeyDirection).includes(key);\n    if (!isValidKey)\n      return;\n    const { shiftKeyMultiplier } = this.$props;\n    const { value } = this.$store, step = this._delegate._getStep(), keyStep = this._delegate._getKeyStep();\n    const modifiedStep = !shiftKey ? keyStep : keyStep * shiftKeyMultiplier(), direction = Number(SliderKeyDirection[key]), diff = modifiedStep * direction, steps = (value() + diff) / step;\n    return Number((step * steps).toFixed(3));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Document (Pointer Events)\n  // -------------------------------------------------------------------------------------------\n  _onDocumentPointerUp(event) {\n    if (event.button !== 0)\n      return;\n    const value = this._getPointerValue(event);\n    this._updatePointerValue(value, event);\n    this._onStopDragging(value, event);\n  }\n  _onDocumentTouchMove(event) {\n    event.preventDefault();\n  }\n  _onDocumentPointerMove = functionThrottle(\n    (event) => {\n      this._updatePointerValue(this._getPointerValue(event), event);\n    },\n    20,\n    { leading: true }\n  );\n}\n\nconst sliderValueFormatContext = createContext(() => ({}));\n\nconst $$_templ$h = /* @__PURE__ */ $$_create_template(`<!$><div part=\"track\"></div>`), $$_templ_2$6 = /* @__PURE__ */ $$_create_template(`<!$><div part=\"track track-fill\"></div>`), $$_templ_3$1 = /* @__PURE__ */ $$_create_template(`<!$><div part=\"track track-progress\"></div>`), $$_templ_4 = /* @__PURE__ */ $$_create_template(`<!$><div part=\"thumb-container\"><!$><div part=\"thumb\"></div></div>`);\nclass Slider extends Component {\n  static el = defineElement({\n    tagName: \"media-slider\",\n    props: sliderProps,\n    store: SliderStoreFactory\n  });\n  _media;\n  _readonly = false;\n  _orientation = \"\";\n  constructor(instance) {\n    super(instance);\n    provideContext(sliderValueFormatContext);\n    this._media = useMedia();\n    new SliderEventsController(instance, this, this._media);\n    const focus = new FocusVisibleController(instance);\n    this.$store.focused = focus.focused.bind(focus);\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"role\", \"slider\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"aria-orientation\", \"horizontal\");\n    setAttributeIfEmpty(el, \"autocomplete\", \"off\");\n    this._orientation = el.getAttribute(\"aria-orientation\") || \"\";\n    if (!this._readonly) {\n      effect(this._watchMinMax.bind(this));\n      effect(this._watchDisabled.bind(this));\n    }\n    effect(this._watchValue.bind(this));\n    this._setAttrs();\n  }\n  onConnect(el) {\n    this._setupPreview();\n  }\n  render() {\n    const { trackClass, trackFillClass, trackProgressClass, thumbContainerClass, thumbClass } = this.$props;\n    return [\n      (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$h);\n        $$_effect(() => $$_attr($$_root, \"class\", trackClass()));\n        return $$_root;\n      })(),\n      (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ_2$6);\n        $$_effect(() => $$_attr($$_root, \"class\", trackFillClass()));\n        return $$_root;\n      })(),\n      (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ_3$1);\n        $$_effect(() => $$_attr($$_root, \"class\", trackProgressClass()));\n        return $$_root;\n      })(),\n      (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ_4), $$_el = $$_next_element($$_walker);\n        $$_effect(() => $$_attr($$_root, \"class\", thumbContainerClass()));\n        $$_effect(() => $$_attr($$_el, \"class\", thumbClass()));\n        return $$_root;\n      })()\n    ];\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  _getStep() {\n    return this.$props.step();\n  }\n  _getKeyStep() {\n    return this.$props.keyStep();\n  }\n  _roundValue(value) {\n    return Math.round(value);\n  }\n  _isDisabled() {\n    return this.$props.disabled();\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  _watchMinMax() {\n    const { min, max } = this.$props;\n    this.$store.min.set(min());\n    this.$store.max.set(max());\n  }\n  _watchDisabled() {\n    if (!this._isDisabled())\n      return;\n    const { dragging, pointing } = this.$store;\n    dragging.set(false);\n    pointing.set(false);\n  }\n  _watchValue() {\n    const { dragging, value, min, max } = this.$store;\n    if (peek(dragging))\n      return;\n    value.set(getClampedValue(min(), max(), value(), this._getStep()));\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  _getARIADisabled() {\n    return ariaBool$1(this._isDisabled());\n  }\n  _getARIAValueMin() {\n    return this.$props.min();\n  }\n  _getARIAValueMax() {\n    return this.$props.max();\n  }\n  _getARIAValueNow() {\n    const { value } = this.$store;\n    return Math.round(value());\n  }\n  _getARIAValueText() {\n    const { value, max } = this.$store;\n    return round(value() / max() * 100, 2) + \"%\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Attributes\n  // -------------------------------------------------------------------------------------------\n  _setAttrs() {\n    const { disabled } = this.$props, { dragging, interactive, pointing } = this.$store;\n    this.setAttributes({\n      disabled,\n      \"data-dragging\": dragging,\n      \"data-pointing\": pointing,\n      \"data-interactive\": interactive,\n      \"aria-disabled\": this._getARIADisabled.bind(this),\n      \"aria-valuemin\": this._getARIAValueMin.bind(this),\n      \"aria-valuemax\": this._getARIAValueMax.bind(this),\n      \"aria-valuenow\": this._getARIAValueNow.bind(this),\n      \"aria-valuetext\": this._getARIAValueText.bind(this),\n      \"data-styled\": this._isStyled.bind(this),\n      \"data-media-slider\": true\n    });\n    effect(this._watchCSSVars.bind(this));\n  }\n  _isStyled() {\n    return !!this.$props.trackClass();\n  }\n  _watchCSSVars() {\n    const { fillPercent, pointerPercent } = this.$store;\n    this._updateSliderVars(round(fillPercent(), 3), round(pointerPercent(), 3));\n  }\n  _updateSliderVars = animationFrameThrottle(\n    (fillPercent, pointerPercent) => {\n      this.el?.style.setProperty(\"--slider-fill-percent\", fillPercent + \"%\");\n      this.el?.style.setProperty(\"--slider-pointer-percent\", pointerPercent + \"%\");\n    }\n  );\n  // -------------------------------------------------------------------------------------------\n  // Preview\n  // -------------------------------------------------------------------------------------------\n  _preview = null;\n  _setupPreview() {\n    this._preview = this.el.querySelector('[slot=\"preview\"]');\n    if (!this._preview)\n      return;\n    effect(this._watchPreview.bind(this));\n    Promise.resolve().then(function () { return preview; }).then(({ setupPreviewStyles }) => {\n      setupPreviewStyles(this._preview, this._orientation);\n    });\n  }\n  _watchPreview() {\n    if (this._isDisabled() || !this._preview)\n      return;\n    window.requestAnimationFrame(this._onPreviewResize);\n    const observer = new ResizeObserver(this._onPreviewResize);\n    observer.observe(this._preview);\n    return () => observer.disconnect();\n  }\n  _onPreviewResize = animationFrameThrottle(() => {\n    if (!this._preview)\n      return;\n    const rect = this._preview.getBoundingClientRect();\n    setStyle(this._preview, \"--computed-width\", rect.width + \"px\");\n    setStyle(this._preview, \"--computed-height\", rect.height + \"px\");\n  });\n  // -------------------------------------------------------------------------------------------\n  // Events\n  // -------------------------------------------------------------------------------------------\n  _onValueChange(event) {\n  }\n  _onDragStart(event) {\n  }\n  _onDragEnd(event) {\n  }\n  _onDragValueChange(event) {\n  }\n}\n\nconst $$_templ$g = /* @__PURE__ */ $$_create_template(`<!$><img part=\"img\" loading=\"eager\" decoding=\"async\" aria-hidden=\"true\" />`);\nclass Thumbnail extends Component {\n  static el = defineElement({\n    tagName: \"media-thumbnail\",\n    props: { time: 0 }\n  });\n  _media;\n  _img = null;\n  _coords = null;\n  _styleResets = [];\n  _src = signal(\"\");\n  _loaded = signal(false);\n  _activeCue = signal(null);\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onAttach() {\n    this.setAttributes({\n      \"data-loading\": this._isLoading.bind(this),\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  onConnect() {\n    effect(this._onLoadStart.bind(this));\n    effect(this._onFindActiveCue.bind(this));\n    effect(this._onResolveThumbnail.bind(this));\n  }\n  _onLoadStart() {\n    this._src();\n    this._media.$store.thumbnails();\n    this._loaded.set(false);\n  }\n  _onLoaded() {\n    this._loaded.set(true);\n    this._requestResize();\n  }\n  _isLoading() {\n    return !this._isHidden() && !this._loaded();\n  }\n  _isHidden() {\n    const { duration, thumbnailCues } = this._media.$store;\n    return !Number.isFinite(duration()) || thumbnailCues().length === 0;\n  }\n  _onFindActiveCue() {\n    const { time } = this.$props, { duration, thumbnailCues } = this._media.$store, _cues = thumbnailCues(), _time = time();\n    if (!_cues || !Number.isFinite(duration())) {\n      this._activeCue.set(null);\n      return;\n    }\n    this._activeCue.set(findActiveCue(_time, _cues));\n  }\n  _onImgRef(el) {\n    this._img = el;\n  }\n  _onResolveThumbnail() {\n    const activeCue = this._activeCue(), thumbnails = peek(this._media.$store.thumbnails);\n    if (!thumbnails || !activeCue) {\n      this._src.set(\"\");\n      this._resetStyles();\n      return;\n    }\n    const [_src, _coords = \"\"] = (activeCue.text || \"\").split(\"#\");\n    this._coords = this._resolveThumbnailCoords(_coords);\n    if (!this._coords) {\n      this._resetStyles();\n      return;\n    }\n    this._src.set(this._resolveThumbnailSrc(thumbnails, _src));\n    this._requestResize();\n  }\n  _resolveThumbnailSrc(baseURL, src) {\n    return !/https?:/.test(src) ? `${baseURL.split(\"/\").slice(0, -1).join(\"/\")}${src.replace(/^\\/?/, \"/\")}`.replace(\n      /^\\/\\//,\n      \"/\"\n    ) : src;\n  }\n  _resolveThumbnailCoords(coords) {\n    const [props, values] = coords.split(\"=\"), resolvedCoords = {}, coordValues = values?.split(\",\");\n    if (!props || !values)\n      return null;\n    for (let i = 0; i < props.length; i++)\n      resolvedCoords[props[i]] = +coordValues[i];\n    return resolvedCoords;\n  }\n  _requestResize = animationFrameThrottle(this._resize.bind(this));\n  _resize() {\n    if (!this._img || !this._coords || !this.el)\n      return;\n    const { w, h, x, y } = this._coords, { maxWidth, maxHeight, minWidth, minHeight } = getComputedStyle(this.el), minRatio = Math.max(parseInt(minWidth) / w, parseInt(minHeight) / h), maxRatio = Math.min(parseInt(maxWidth) / w, parseInt(maxHeight) / h), scale = maxRatio < 1 ? maxRatio : minRatio > 1 ? minRatio : 1;\n    this._style(this.el, \"--thumbnail-width\", `${w * scale}px`);\n    this._style(this.el, \"--thumbnail-height\", `${h * scale}px`);\n    this._style(this._img, \"width\", `${this._img.naturalWidth * scale}px`);\n    this._style(this._img, \"height\", `${this._img.naturalHeight * scale}px`);\n    this._style(this._img, \"transform\", `translate(-${x * scale}px, -${y * scale}px)`);\n  }\n  _style(el, name, value) {\n    el.style.setProperty(name, value);\n    this._styleResets.push(() => el.style.removeProperty(name));\n  }\n  _resetStyles() {\n    for (const reset of this._styleResets)\n      reset();\n    this._styleResets = [];\n  }\n  render() {\n    const { crossorigin } = this._media.$store;\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$g);\n      $$_effect(() => $$_attr($$_root, \"src\", this._src()));\n      $$_effect(() => $$_attr($$_root, \"crossorigin\", crossorigin()));\n      $$_listen($$_root, \"load\", this._onLoaded.bind(this));\n      $$_ref($$_root, this._onImgRef.bind(this));\n      return $$_root;\n    })();\n  }\n}\n\nconst $$_templ$f = /* @__PURE__ */ $$_create_template(`<!$><media-thumbnail part=\"thumbnail\" mk-d></media-thumbnail>`);\nclass SliderThumbnail extends Component {\n  static el = defineElement({\n    tagName: \"media-slider-thumbnail\"\n  });\n  static register = [Thumbnail];\n  _media;\n  _slider;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    this._slider = useStore(SliderStoreFactory);\n  }\n  _getTime() {\n    const { duration } = this._media.$store;\n    return this._slider.pointerRate() * duration();\n  }\n  render() {\n    const time = this._getTime.bind(this);\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$f);\n      $$_effect(() => $$_attr($$_root, \"time\", time()));\n      $$_setup_custom_element($$_root);\n      return $$_root;\n    })();\n  }\n}\n\nconst $$_templ$e = /* @__PURE__ */ $$_create_template(`<!$><video muted=\"\" playsinline=\"\" preload=\"auto\" part=\"video\" style=\"max-width: unset\"></video>`);\nclass SliderVideo extends Component {\n  static el = defineElement({\n    tagName: \"media-slider-video\",\n    props: { src: void 0 }\n  });\n  _media;\n  _slider;\n  _video = null;\n  _canPlay = signal(false);\n  _error = signal(false);\n  _src;\n  _hidden;\n  onAttach() {\n    this._media = useMedia();\n    this._slider = useStore(SliderStoreFactory);\n    this._src = computed(this._getSrc.bind(this));\n    this._hidden = computed(this._isHidden.bind(this));\n    this.setAttributes({\n      \"data-loading\": this._isLoading.bind(this),\n      \"aria-hidden\": $ariaBool(this._hidden)\n    });\n    effect(this._onSrcChange.bind(this));\n    effect(this._onTimeUpdate.bind(this));\n  }\n  onConnect() {\n    if (this._video.readyState >= 2)\n      this._onCanPlay();\n  }\n  render() {\n    const { crossorigin } = this._media.$store;\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$e);\n      $$_effect(() => $$_attr($$_root, \"src\", this._src()));\n      $$_effect(() => $$_attr($$_root, \"crossorigin\", crossorigin()));\n      $$_listen($$_root, \"canplay\", this._onCanPlay.bind(this));\n      $$_listen($$_root, \"error\", this._onError.bind(this));\n      $$_ref($$_root, this._setVideo.bind(this));\n      return $$_root;\n    })();\n  }\n  _getSrc() {\n    const { canLoad } = this._media.$store;\n    return canLoad() ? this.$props.src() : null;\n  }\n  _isLoading() {\n    return !this._canPlay() && !this._hidden();\n  }\n  _isHidden() {\n    const { duration } = this._media.$store;\n    return !!this._error() || !this._canPlay() || !Number.isFinite(duration());\n  }\n  _onSrcChange() {\n    this._src();\n    this._canPlay.set(false);\n    this._error.set(false);\n  }\n  _onCanPlay(event) {\n    this._canPlay.set(true);\n    this.dispatch(\"can-play\", { trigger: event });\n  }\n  _onError(event) {\n    this._error.set(true);\n    this.dispatch(\"error\", { trigger: event });\n  }\n  _onTimeUpdate() {\n    const { duration } = this._media.$store;\n    const { pointerRate } = this._slider;\n    if (this._canPlay() && this._video && Number.isFinite(duration()) && Number.isFinite(pointerRate())) {\n      this._video.currentTime = pointerRate() * duration();\n    }\n  }\n  _setVideo(el) {\n    this._video = el;\n  }\n}\n\nfunction padNumberWithZeroes(num, expectedLength) {\n  const str = String(num);\n  const actualLength = str.length;\n  const shouldPad = actualLength < expectedLength;\n  if (shouldPad) {\n    const padLength = expectedLength - actualLength;\n    const padding = `0`.repeat(padLength);\n    return `${padding}${num}`;\n  }\n  return str;\n}\nfunction parseTime(duration) {\n  const hours = Math.trunc(duration / 3600);\n  const minutes = Math.trunc(duration % 3600 / 60);\n  const seconds = Math.trunc(duration % 60);\n  const fraction = Number((duration - Math.trunc(duration)).toPrecision(3));\n  return {\n    hours,\n    minutes,\n    seconds,\n    fraction\n  };\n}\nfunction formatTime(duration, shouldPadHours = false, shouldPadMinutes = false, shouldAlwaysShowHours = false) {\n  const { hours, minutes, seconds } = parseTime(duration);\n  const paddedHours = shouldPadHours ? padNumberWithZeroes(hours, 2) : hours;\n  const paddedMinutes = shouldPadMinutes ? padNumberWithZeroes(minutes, 2) : minutes;\n  const paddedSeconds = padNumberWithZeroes(seconds, 2);\n  if (hours > 0 || shouldAlwaysShowHours) {\n    return `${paddedHours}:${paddedMinutes}:${paddedSeconds}`;\n  }\n  return `${paddedMinutes}:${paddedSeconds}`;\n}\nfunction formatSpokenTime(duration) {\n  const spokenParts = [];\n  const { hours, minutes, seconds } = parseTime(duration);\n  if (hours > 0) {\n    spokenParts.push(`${hours} hour`);\n  }\n  if (minutes > 0) {\n    spokenParts.push(`${minutes} min`);\n  }\n  if (seconds > 0 || spokenParts.length === 0) {\n    spokenParts.push(`${seconds} sec`);\n  }\n  return spokenParts.join(\" \");\n}\n\nconst $$_templ$d = /* @__PURE__ */ $$_create_template(`<!$><span><!$></span>`);\nclass SliderValue extends Component {\n  static el = defineElement({\n    tagName: \"media-slider-value\",\n    props: {\n      type: \"current\",\n      format: void 0,\n      showHours: false,\n      padHours: false,\n      padMinutes: false,\n      decimalPlaces: 2\n    }\n  });\n  _format;\n  _text;\n  _slider;\n  onAttach() {\n    this._slider = useStore(SliderStoreFactory);\n    this._format = useContext(sliderValueFormatContext);\n    this._text = computed(this._getText.bind(this));\n  }\n  _getText() {\n    const { type, format, decimalPlaces, padHours, padMinutes, showHours } = this.$props;\n    const { value: sliderValue, pointerValue, min, max } = this._slider;\n    const value = type() === \"current\" ? sliderValue() : pointerValue();\n    if (format() === \"percent\") {\n      const range = max() - min();\n      const percent = value / range * 100;\n      return (this._format.percent ?? round)(percent, decimalPlaces()) + \"\\uFE6A\";\n    } else if (format() === \"time\") {\n      return (this._format.time ?? formatTime)(value, padHours(), padMinutes(), showHours());\n    } else {\n      return this._format.value?.(value) ?? value.toFixed(2);\n    }\n  }\n  render() {\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$d), $$_expr = $$_walker.nextNode();\n      $$_insert_at_marker_lite($$_expr, this._text);\n      return $$_root;\n    })();\n  }\n}\n\nclass VolumeSlider extends Slider {\n  static el = defineElement({\n    tagName: \"media-volume-slider\",\n    props: {\n      ...sliderProps,\n      min: defineProp({ value: 0, attribute: false }),\n      max: defineProp({ value: 100, attribute: false }),\n      value: defineProp({ value: 100, attribute: false })\n    },\n    store: SliderStoreFactory\n  });\n  _readonly = true;\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"aria-label\", \"Media volume\");\n    super.onAttach(el);\n    {\n      canChangeVolume().then((canSet) => {\n        if (!canSet)\n          setAttribute(el, \"aria-hidden\", \"true\");\n      });\n    }\n    effect(this._watchVolume.bind(this));\n  }\n  _watchVolume() {\n    const { muted, volume } = this._media.$store;\n    const newValue = muted() ? 0 : volume() * 100;\n    this.$store.value.set(newValue);\n    this.dispatch(\"value-change\", { detail: newValue });\n  }\n  _throttleVolumeChange = functionThrottle(this._onVolumeChange.bind(this), 25);\n  _onVolumeChange(event) {\n    if (!event.trigger)\n      return;\n    const mediaVolume = round(event.detail / 100, 3);\n    this._media.remote.changeVolume(mediaVolume, event);\n  }\n  _onValueChange(event) {\n    this._throttleVolumeChange(event);\n  }\n  _onDragValueChange(event) {\n    this._throttleVolumeChange(event);\n  }\n  _getARIAValueMin() {\n    return 0;\n  }\n  _getARIAValueMax() {\n    return 100;\n  }\n}\n\nclass ClassManager {\n  _root;\n  _observer;\n  _map = /* @__PURE__ */ new Map();\n  _classes = signal([]);\n  constructor(el) {\n    this._root = el.firstChild;\n    this._observer = new MutationObserver(this._onMutation.bind(this));\n    this._observer.observe(this._root, { subtree: true, childList: true });\n    effect(this._watch.bind(this));\n    onDispose(this._destroy.bind(this));\n  }\n  _onMutation(records) {\n    const selector = Array.from(this._map.keys()).join(\",\");\n    for (const record of records) {\n      for (const node of record.addedNodes) {\n        if (isDOMElement(node) && node.matches(selector))\n          this._requestUpdate();\n      }\n    }\n  }\n  _observe(selector, $class) {\n    this._map.set(selector, $class);\n    this._classes.set((c) => [...c, $class]);\n    return this;\n  }\n  _requestUpdate = animationFrameThrottle(this._update.bind(this));\n  _update() {\n    for (const [selector, classes] of this._map) {\n      const _class = peek(classes);\n      for (const el of this._root.querySelectorAll(selector)) {\n        setAttribute(el, \"class\", _class);\n      }\n    }\n  }\n  _watch() {\n    for (const c of this._classes())\n      c();\n    this._requestUpdate();\n  }\n  _destroy() {\n    this._classes.set([]);\n    this._map.clear();\n    this._observer.disconnect();\n  }\n}\n\nconst $$_templ$c = /* @__PURE__ */ $$_create_template(`<div part=\"chapters\"></div>`), $$_templ_2$5 = /* @__PURE__ */ $$_create_template(`<div part=\"chapter-container\"><div part=\"chapter\"><div part=\"track\"></div><div part=\"track track-fill\" style=\"width: 0%\"></div><div part=\"track track-progress\" style=\"width: 0%\"></div></div></div>`);\nclass SliderChaptersRenderer {\n  constructor(_media, _slider, _onChange) {\n    this._media = _media;\n    this._slider = _slider;\n    this._onChange = _onChange;\n  }\n  _chapters = [];\n  _refs = [];\n  _activeChapterIndex = 0;\n  _bufferedChapterIndex = 0;\n  render(cues, $class) {\n    return cues?.length ? $$_peek(\n      () => (() => {\n        const $$_root = $$_clone($$_templ$c);\n        $$_effect(() => $$_attr($$_root, \"class\", $class()));\n        $$_insert_lite($$_root, () => this._renderChapters(cues));\n        return $$_root;\n      })()\n    ) : null;\n  }\n  _renderChapters(cues) {\n    this._chapters = this._fillChapterGaps(cues);\n    const firstChapter = this._chapters[0];\n    this._onChange(firstChapter.startTime === 0 ? firstChapter.text : \"\");\n    for (let i = 0; i < this._chapters.length; i++)\n      this._refs.push(this._renderChapter());\n    this._updateContainerWidths();\n    effect(this._watchFillPercent.bind(this));\n    effect(this._watchPointerPercent.bind(this));\n    effect(this._watchBufferedPercent.bind(this));\n    onDispose(() => {\n      this._refs = [];\n      this._activeChapterIndex = 0;\n      this._bufferedChapterIndex = 0;\n    });\n    return this._refs;\n  }\n  _renderChapter() {\n    return $$_clone($$_templ_2$5);\n  }\n  _getChapterTrackFill(container) {\n    return container.firstChild.firstChild.nextSibling;\n  }\n  _getChapterTrackProgress(container) {\n    return container.firstChild.lastChild;\n  }\n  _getChaptersEndTime() {\n    return this._chapters[this._chapters.length - 1].endTime;\n  }\n  _updateContainerWidths() {\n    let cue, endTime = this._getChaptersEndTime();\n    for (let i = 0; i < this._chapters.length; i++) {\n      cue = this._chapters[i];\n      this._refs[i].style.width = round((cue.endTime - cue.startTime) / endTime * 100, 3) + \"%\";\n    }\n  }\n  _watchFillPercent() {\n    let { fillPercent, value, pointing } = this._slider, currentChapter = this._chapters[this._activeChapterIndex], activeIndex = this._findActiveChapterIndex(\n      currentChapter.startTime <= peek(value) ? this._activeChapterIndex : 0,\n      fillPercent()\n    );\n    if (activeIndex > this._activeChapterIndex) {\n      this._updateTrackFillWidths(this._activeChapterIndex, activeIndex, \"100%\");\n    } else if (activeIndex < this._activeChapterIndex) {\n      this._updateTrackFillWidths(activeIndex + 1, this._activeChapterIndex + 1, \"0%\");\n    }\n    if (!peek(pointing) && this._activeChapterIndex !== activeIndex) {\n      this._onChange(this._chapters[activeIndex].text);\n    }\n    let trackFill = this._getChapterTrackFill(this._refs[activeIndex]), percent = this._calcChapterPercent(this._chapters[activeIndex], fillPercent()) + \"%\";\n    if (trackFill.style.width !== percent)\n      trackFill.style.width = percent;\n    this._activeChapterIndex = activeIndex;\n  }\n  _watchPointerPercent() {\n    let { pointing, pointerPercent } = this._slider;\n    if (!pointing())\n      return;\n    const activeIndex = this._findActiveChapterIndex(0, pointerPercent());\n    this._onChange(this._chapters[activeIndex].text);\n  }\n  _updateTrackFillWidths(start, end, width) {\n    for (let i = start; i < end; i++)\n      this._getChapterTrackFill(this._refs[i]).style.width = width;\n  }\n  _findActiveChapterIndex(startIndex, percent) {\n    let chapterPercent = 0;\n    for (let i = startIndex; i < this._chapters.length; i++) {\n      chapterPercent = this._calcChapterPercent(this._chapters[i], percent);\n      if (chapterPercent >= 0 && chapterPercent < 100)\n        return i;\n    }\n    return 0;\n  }\n  _watchBufferedPercent() {\n    this._updateBufferedPercent(this._bufferedPercent());\n  }\n  _updateBufferedPercent = animationFrameThrottle((bufferedPercent) => {\n    let width;\n    for (let i = this._bufferedChapterIndex; i < this._refs.length; i++) {\n      width = this._calcChapterPercent(this._chapters[i], bufferedPercent);\n      this._getChapterTrackProgress(this._refs[i]).style.width = width + \"%\";\n      if (width < 100) {\n        this._bufferedChapterIndex = i;\n        break;\n      }\n    }\n  });\n  _bufferedPercent = computed(this._calcMediaBufferedPercent.bind(this));\n  _calcMediaBufferedPercent() {\n    const { bufferedEnd, duration } = this._media;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1), 3) * 100;\n  }\n  _calcChapterPercent(cue, percent) {\n    const lastChapter = this._chapters[this._chapters.length - 1], startPercent = cue.startTime / lastChapter.endTime * 100, endPercent = cue.endTime / lastChapter.endTime * 100;\n    return Math.max(\n      0,\n      round(\n        percent >= endPercent ? 100 : (percent - startPercent) / (endPercent - startPercent) * 100,\n        3\n      )\n    );\n  }\n  _fillChapterGaps(cues) {\n    const chapters = [];\n    for (let i = 0; i < cues.length - 1; i++) {\n      const currentCue = cues[i], nextCue = cues[i + 1];\n      chapters.push(currentCue);\n      if (nextCue) {\n        const timeDiff = nextCue.startTime - currentCue.endTime;\n        if (timeDiff > 0) {\n          chapters.push(new window.VTTCue(currentCue.endTime, currentCue.endTime + timeDiff, \"\"));\n        }\n      }\n    }\n    chapters.push(cues[cues.length - 1]);\n    return chapters;\n  }\n}\n\nclass TimeSlider extends Slider {\n  static el = defineElement({\n    tagName: \"media-time-slider\",\n    props: {\n      ...sliderProps,\n      min: defineProp({ value: 0, attribute: false }),\n      max: defineProp({ value: 100, attribute: false }),\n      value: defineProp({ value: 0, attribute: false }),\n      pauseWhileDragging: false,\n      seekingRequestThrottle: 100,\n      chaptersClass: null,\n      chapterContainerClass: null,\n      chapterClass: null\n    },\n    store: SliderStoreFactory\n  });\n  _readonly = true;\n  _swipeGesture = true;\n  _dispatchSeeking;\n  _track = signal(null);\n  _chaptersRenderer;\n  _classManager;\n  constructor(instance) {\n    super(instance);\n    provideContext(sliderValueFormatContext, {\n      value: this._formatValue.bind(this),\n      time: this._formatTime.bind(this)\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"aria-label\", \"Media time\");\n    super.onAttach(el);\n    this._chaptersRenderer = new SliderChaptersRenderer(\n      this._media.$store,\n      this.$store,\n      this._chapterTitle.set\n    );\n    this.setAttributes({\n      \"data-chapters\": this._hasChapters.bind(this)\n    });\n    this.setStyles({\n      \"--media-buffered-percent\": this._calcBufferedPercent.bind(this)\n    });\n    effect(this._watchCurrentTime.bind(this));\n    effect(this._watchSeekingThrottle.bind(this));\n    effect(this._onTrackChange.bind(this));\n    scopedRaf(() => {\n      effect(this._watchPreviewing.bind(this));\n    });\n  }\n  _calcBufferedPercent() {\n    const { bufferedEnd, duration } = this._media.$store;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1) * 100, 3) + \"%\";\n  }\n  _hasChapters() {\n    const { duration } = this._media.$store;\n    this._classManager?._requestUpdate();\n    return this._track()?.cues.length && Number.isFinite(duration()) && duration() > 0;\n  }\n  onConnect(el) {\n    super.onConnect(el);\n    this._onTrackModeChange();\n    listenEvent(this._media.textTracks, \"mode-change\", this._onTrackModeChange.bind(this));\n    const { chapterContainerClass, chapterClass, trackClass, trackFillClass, trackProgressClass } = this.$props;\n    this._classManager = new ClassManager(el)._observe('[part=\"chapter-container\"]', chapterContainerClass)._observe('[part=\"chapter\"]', chapterClass)._observe('[part=\"track\"]', trackClass)._observe('[part~=\"track-fill\"]', trackFillClass)._observe('[part~=\"track-progress\"]', trackProgressClass);\n  }\n  render() {\n    const tracks = super.render(), { chaptersClass } = this.$props;\n    return [$$_computed(() => this._chaptersRenderer.render(this._track()?.cues, chaptersClass)), tracks];\n  }\n  _watchSeekingThrottle() {\n    this._dispatchSeeking = functionThrottle(\n      this._seeking.bind(this),\n      this.$props.seekingRequestThrottle()\n    );\n  }\n  _watchCurrentTime() {\n    const { currentTime } = this._media.$store, { value, dragging } = this.$store, newValue = this._timeToPercent(currentTime());\n    if (!peek(dragging)) {\n      value.set(newValue);\n      this.dispatch(\"value-change\", { detail: newValue });\n    }\n  }\n  _watchPreviewing() {\n    const player = this._media.player;\n    player && this._preview && setAttribute(player, \"data-preview\", this.$store.interactive());\n  }\n  _seeking(time, event) {\n    this._media.remote.seeking(time, event);\n  }\n  _seek(time, percent, event) {\n    this._dispatchSeeking.cancel();\n    const { live } = this._media.$store;\n    if (live() && percent >= 99) {\n      this._media.remote.seekToLiveEdge(event);\n      return;\n    }\n    this._media.remote.seek(time, event);\n  }\n  _playingBeforeDragStart = false;\n  _onDragStart(event) {\n    const { pauseWhileDragging } = this.$props;\n    if (pauseWhileDragging()) {\n      const { paused } = this._media.$store;\n      this._playingBeforeDragStart = !paused();\n      this._media.remote.pause(event);\n    }\n  }\n  _onDragValueChange(event) {\n    this._dispatchSeeking(this._percentToTime(event.detail), event);\n  }\n  _onDragEnd(event) {\n    const percent = event.detail;\n    this._seek(this._percentToTime(percent), percent, event);\n    const { pauseWhileDragging } = this.$props;\n    if (pauseWhileDragging() && this._playingBeforeDragStart) {\n      this._media.remote.play(event);\n      this._playingBeforeDragStart = false;\n    }\n  }\n  _onValueChange(event) {\n    const { dragging } = this.$store;\n    if (dragging() || !event.trigger)\n      return;\n    this._onDragEnd(event);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  _getStep() {\n    const value = this.$props.step() / this._media.$store.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  _getKeyStep() {\n    const value = this.$props.keyStep() / this._media.$store.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  _roundValue(value) {\n    return round(value, 3);\n  }\n  _isDisabled() {\n    const { canSeek } = this._media.$store;\n    return super._isDisabled() || !canSeek();\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  _getARIAValueMin() {\n    return 0;\n  }\n  _getARIAValueMax() {\n    return 100;\n  }\n  _getARIAValueText() {\n    const time = this._percentToTime(this.$store.value()), { duration } = this._media.$store;\n    return Number.isFinite(time) ? `${formatSpokenTime(time)} out of ${formatSpokenTime(duration())}` : \"live\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Format\n  // -------------------------------------------------------------------------------------------\n  _percentToTime(percent) {\n    const { duration } = this._media.$store;\n    return Math.round(percent / 100 * duration());\n  }\n  _timeToPercent(time) {\n    const { liveEdge, duration } = this._media.$store, rate = Math.max(0, Math.min(1, liveEdge() ? 1 : Math.min(time, duration()) / duration()));\n    return Number.isNaN(rate) ? 0 : Number.isFinite(rate) ? rate * 100 : 100;\n  }\n  _formatValue(percent) {\n    const time = this._percentToTime(percent), { live, duration } = this._media.$store;\n    return Number.isFinite(time) ? (live() ? time - duration() : time).toFixed(0) : \"LIVE\";\n  }\n  _formatTime(percent, padHours, padMinutes, showHours) {\n    const time = this._percentToTime(percent), { live, duration } = this._media.$store, value = live() ? time - duration() : time;\n    return Number.isFinite(time) ? `${value < 0 ? \"-\" : \"\"}${formatTime(\n      Math.abs(value),\n      padHours,\n      isNull(padMinutes) ? Math.abs(value) >= 3600 : padMinutes,\n      showHours\n    )}` : \"LIVE\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Chapters\n  // -------------------------------------------------------------------------------------------\n  _chapterTitleEl = null;\n  _chapterTitle = signal(\"\");\n  _onTrackModeChange() {\n    onTrackChapterChange(this._media.textTracks, peek(this._track), this._track.set);\n  }\n  _onTrackChange() {\n    this._track();\n    this._chapterTitleEl = this.el?.querySelector('[part=\"chapter-title\"]') ?? null;\n    if (!this._chapterTitleEl)\n      return;\n    effect(this._onChapterTitleChange.bind(this));\n    return () => {\n      this._chapterTitleEl.textContent = \"\";\n      this._chapterTitleEl = null;\n    };\n  }\n  _onChapterTitleChange() {\n    this._chapterTitleEl.textContent = this._chapterTitle();\n  }\n}\n\nconst menuContext = createContext();\n\nconst FOCUSABLE_ELEMENTS_SELECTOR = /* @__PURE__ */ [\n  \"a[href]\",\n  \"[tabindex]\",\n  \"input\",\n  \"select\",\n  \"button\"\n].map((selector) => `${selector}:not([aria-hidden])`).join(\",\");\nconst VALID_KEYS = /* @__PURE__ */ new Set([\n  \"Escape\",\n  \"Tab\",\n  \"ArrowUp\",\n  \"ArrowDown\",\n  \"Home\",\n  \"PageUp\",\n  \"End\",\n  \"PageDown\",\n  \"Enter\",\n  \" \"\n]);\nclass MenuFocusController {\n  constructor(_delegate) {\n    this._delegate = _delegate;\n  }\n  _index = 0;\n  _el = null;\n  _elements = [];\n  get _items() {\n    return this._elements;\n  }\n  _attach(el) {\n    listenEvent(el, \"focus\", this._onFocus.bind(this));\n    this._el = el;\n  }\n  _listen() {\n    if (!this._el)\n      return;\n    this._update();\n    listenEvent(this._el, \"keyup\", this._onKeyUp.bind(this));\n    listenEvent(this._el, \"keydown\", this._onKeyDown.bind(this));\n    onDispose(() => {\n      this._index = 0;\n      this._elements = [];\n    });\n  }\n  _update() {\n    this._index = 0;\n    this._elements = this._getFocusableElements();\n  }\n  _scroll(index = this._findActiveIndex()) {\n    const element = this._elements[index], container = this._delegate._getScrollContainer();\n    if (element && container) {\n      requestAnimationFrame(() => {\n        container.scrollTop = element.offsetTop - container.offsetHeight / 2 + element.offsetHeight / 2;\n      });\n    }\n  }\n  _focusAt(index) {\n    this._index = index;\n    this._elements[index]?.focus();\n    this._scroll(index);\n  }\n  _findActiveIndex() {\n    return this._elements.findIndex((el) => el.getAttribute(\"aria-checked\") === \"true\");\n  }\n  _onFocus() {\n    setTimeout(() => {\n      const index = this._findActiveIndex();\n      this._focusAt(index >= 0 ? index : 0);\n    }, 100);\n  }\n  _onKeyUp(event) {\n    if (!VALID_KEYS.has(event.key))\n      return;\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  _onKeyDown(event) {\n    if (!VALID_KEYS.has(event.key))\n      return;\n    event.stopPropagation();\n    event.preventDefault();\n    switch (event.key) {\n      case \"Escape\":\n        this._delegate._closeMenu(event);\n        break;\n      case \"Tab\":\n        this._focusAt(this._nextIndex(event.shiftKey ? -1 : 1));\n        break;\n      case \"ArrowUp\":\n        this._focusAt(this._nextIndex(-1));\n        break;\n      case \"ArrowDown\":\n        this._focusAt(this._nextIndex(1));\n        break;\n      case \"Home\":\n      case \"PageUp\":\n        this._focusAt(0);\n        break;\n      case \"End\":\n      case \"PageDown\":\n        this._focusAt(this._elements.length - 1);\n        break;\n    }\n  }\n  _nextIndex(delta) {\n    let index = this._index;\n    do {\n      index = (index + delta + this._elements.length) % this._elements.length;\n    } while (this._elements[index].offsetParent === null);\n    return index;\n  }\n  _getFocusableElements() {\n    if (!this._el)\n      return [];\n    const focusableElements = this._el.querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR), elements = [];\n    const is = (node) => node.hasAttribute(\"data-media-menu-items\");\n    for (const el of focusableElements) {\n      if (el instanceof HTMLElement && el.offsetParent !== null && // does not have display: none\n      isElementParent(this._el, el, is)) {\n        elements.push(el);\n      }\n    }\n    return elements;\n  }\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __getOwnPropDesc$2 = Object.getOwnPropertyDescriptor;\nvar __decorateClass$2 = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$2(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp$2(target, key, result);\n  return result;\n};\nlet idCount = 0;\nclass Menu extends Component {\n  static el = defineElement({\n    tagName: \"media-menu\",\n    props: { position: null }\n  });\n  _media;\n  _menuId;\n  _menuButtonId;\n  _expanded = signal(false);\n  _disabled = signal(false);\n  _buttonDisabled = signal(false);\n  _parentMenu;\n  _submenus = /* @__PURE__ */ new Set();\n  _menuButton = null;\n  _menuItems = null;\n  _menuObserver = null;\n  _focus;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    const currentIdCount = ++idCount;\n    this._menuId = `media-menu-${currentIdCount}`;\n    this._menuButtonId = `media-menu-button-${currentIdCount}`;\n    if (hasProvidedContext(menuContext)) {\n      this._parentMenu = useContext(menuContext);\n    }\n    this._focus = new MenuFocusController({\n      _getScrollContainer: this._findScrollContainer.bind(this),\n      _closeMenu: this.close.bind(this)\n    });\n    provideContext(menuContext, {\n      _expanded: this._expanded,\n      _hint: signal(\"\"),\n      _disable: this._disable.bind(this),\n      _attachMenuButton: this._attachMenuButton.bind(this),\n      _attachMenuItems: this._attachMenuItems.bind(this),\n      _attachObserver: this._attachObserver.bind(this),\n      _disableMenuButton: this._disableMenuButton.bind(this),\n      _addSubmenu: this._addSubmenu.bind(this)\n    });\n  }\n  onAttach(el) {\n    const { position } = this.$props;\n    this.setAttributes({\n      position,\n      \"data-open\": this._expanded,\n      \"data-submenu\": !!this._parentMenu,\n      \"data-disabled\": this._isDisabled.bind(this),\n      \"data-media-menu\": true\n    });\n  }\n  onConnect(el) {\n    if (!this._parentMenu) {\n      effect(this._watchBreakpoint.bind(this));\n    }\n    effect(this._watchExpanded.bind(this));\n    this._parentMenu?._addSubmenu(el);\n    requestAnimationFrame(() => this._onResize());\n  }\n  onDestroy() {\n    this._removePopupMenu();\n    this._menuButton = null;\n    this._menuItems = null;\n    this._menuObserver = null;\n  }\n  _removePopupMenu() {\n    if (!this._menuItems || this.el?.contains(this._menuItems))\n      return;\n    const menu = this._menuItems?.parentElement;\n    this.el.append(this._menuItems);\n    if (menu?.localName === \"media-menu\") {\n      menu.destroy();\n      menu.remove();\n    }\n  }\n  _watchBreakpoint() {\n    if (!this.el)\n      return;\n    const { breakpointX, breakpointY, viewType, orientation, fullscreen } = this._media.$store, popup = viewType() === \"audio\" ? breakpointX() === \"sm\" : breakpointY() === \"sm\";\n    if (!this._menuItems || this._parentMenu)\n      return;\n    setAttribute(this.el, \"data-popup\", popup);\n    setAttribute(this.el, \"data-popup-wide\", popup && orientation() === \"landscape\");\n    if (popup && !fullscreen()) {\n      if (this.el.contains?.(this._menuItems)) {\n        const menu = this.el.cloneNode();\n        menu.appendChild(this._menuItems);\n        requestAnimationFrame(() => {\n          if (!this.el)\n            return;\n          const mediaRing = \"--media-focus-ring\", mediaRingValue = getComputedStyle(this.el).getPropertyValue(mediaRing);\n          if (mediaRingValue)\n            setStyle(menu, mediaRing, mediaRingValue);\n        });\n        scoped(() => {\n          document.body.append(menu);\n        }, this._media.scope);\n      }\n    }\n    this._onResize();\n    return () => this._removePopupMenu();\n  }\n  _watchExpanded() {\n    const expanded = this._isExpanded();\n    this._onResize();\n    this._updateMenuItemsHidden(expanded);\n    if (!expanded)\n      return;\n    this._focus._listen();\n    const closeTarget = this._getCloseTarget();\n    if (closeTarget) {\n      onPress(closeTarget, this._onCloseTargetPress.bind(this));\n    }\n    this.listen(\"pointerup\", this._onPointerUp.bind(this));\n    listenEvent(window, \"pointerup\", this._onWindowPointerUp.bind(this));\n  }\n  _attachMenuButton(el) {\n    const isMenuItem = !!this._parentMenu, isExpanded = this._isExpanded.bind(this), isARIAExpanded = $ariaBool(isExpanded), isARIADisabled = $ariaBool(this._isDisabled.bind(this));\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitem\" : \"button\");\n    setAttribute(el, \"id\", this._menuButtonId);\n    setAttribute(el, \"aria-controls\", this._menuId);\n    setAttribute(el, \"aria-haspopup\", \"true\");\n    effect(() => {\n      setAttribute(el, \"aria-disabled\", isARIADisabled());\n      setAttribute(el, \"aria-expanded\", isARIAExpanded());\n      if (!isMenuItem)\n        setAttribute(el, \"aria-pressed\", isARIAExpanded());\n      setAttribute(el, \"data-pressed\", isExpanded());\n    });\n    setAttribute(el, \"data-media-button\", !isMenuItem);\n    setAttribute(el, \"data-media-menu-button\", \"\");\n    onPress(el, this._onMenuButtonPress.bind(this));\n    this._menuButton = el;\n  }\n  _attachMenuItems(el) {\n    setAttributeIfEmpty(el, \"role\", \"menu\");\n    setAttributeIfEmpty(el, \"tabindex\", \"-1\");\n    setAttribute(el, \"id\", this._menuId);\n    setAttribute(el, \"aria-describedby\", this._menuButtonId);\n    setAttribute(el, \"data-media-menu-items\", \"\");\n    this._menuItems = el;\n    this._focus._attach(el);\n    this._watchBreakpoint();\n    this._updateMenuItemsHidden(peek(this._expanded));\n  }\n  _attachObserver(observer) {\n    this._menuObserver = observer;\n  }\n  _updateMenuItemsHidden(expanded) {\n    if (this._menuItems)\n      setAttribute(this._menuItems, \"aria-hidden\", ariaBool$1(!expanded));\n  }\n  _disableMenuButton(disabled) {\n    this._buttonDisabled.set(disabled);\n  }\n  _onMenuButtonPress(event) {\n    if (this._parentMenu)\n      event.stopPropagation();\n    if (this._isDisabled())\n      return;\n    this._expanded.set((expanded) => !expanded);\n    this._changeIdleTracking();\n    tick();\n    if (isKeyboardEvent(event)) {\n      this._menuItems?.focus();\n    }\n    this._onChange(event);\n  }\n  _onChange(trigger) {\n    const expanded = peek(this._expanded);\n    this.dispatch(expanded ? \"open\" : \"close\", { trigger });\n    if (expanded) {\n      if (!this._parentMenu) {\n        this._media.activeMenu?.close(trigger);\n        this._media.activeMenu = this;\n      }\n      this._menuObserver?._onOpen?.(trigger);\n    } else {\n      if (!this._parentMenu) {\n        setTimeout(() => {\n          for (const el of this._submenus)\n            el.close(trigger);\n        }, 300);\n        this._media.activeMenu = null;\n      }\n      this._menuObserver?._onClose?.(trigger);\n    }\n    if (expanded && !isKeyboardEvent(trigger)) {\n      requestAnimationFrame(() => {\n        this._focus._update();\n        setTimeout(() => {\n          this._focus._scroll();\n        }, 100);\n      });\n    }\n  }\n  _isExpanded() {\n    return !this._isDisabled() && this._expanded();\n  }\n  _isDisabled() {\n    return this._disabled() || this._buttonDisabled();\n  }\n  _disableBind = this._disable.bind(this);\n  _disable(disabled) {\n    this._disabled.set(disabled);\n  }\n  _onPointerUp(event) {\n    event.stopPropagation();\n  }\n  _onWindowPointerUp() {\n    if (this._parentMenu)\n      return setTimeout(this.close.bind(this), 800);\n    else\n      this.close();\n  }\n  _onCloseTargetPress(event) {\n    event.stopPropagation();\n    this.close(event);\n  }\n  _getCloseTarget() {\n    const target = this.el.querySelector('[slot=\"close-target\"]');\n    return isElementParent(this.el, target) ? target : null;\n  }\n  _findScrollContainer() {\n    if (!this._parentMenu) {\n      return this._menuItems;\n    } else {\n      let el = this.el;\n      while (el && el.tagName !== \"media-menu\" && el.hasAttribute(\"data-submenu\")) {\n        el = el.parentNode;\n      }\n      return el;\n    }\n  }\n  _changeIdleTracking(trigger) {\n    if (this._parentMenu)\n      return;\n    if (this._expanded())\n      this._media.remote.pauseUserIdle(trigger);\n    else\n      this._media.remote.resumeUserIdle(trigger);\n  }\n  _addSubmenu(el) {\n    this._submenus.add(el);\n    listenEvent(el, \"open\", this._onSubmenuOpenBind);\n    listenEvent(el, \"close\", this._onSubmenuCloseBind);\n    onDispose(this._removeSubmenuBind);\n  }\n  _removeSubmenuBind = this._removeSubmenu.bind(this);\n  _removeSubmenu(el) {\n    this._submenus.delete(el);\n  }\n  _onSubmenuOpenBind = this._onSubmenuOpen.bind(this);\n  _onSubmenuOpen(event) {\n    for (const el of this._submenus) {\n      if (el !== event.target)\n        el.setAttribute(\"aria-hidden\", \"true\");\n    }\n    this._onResize();\n  }\n  _onSubmenuCloseBind = this._onSubmenuClose.bind(this);\n  _onSubmenuClose() {\n    for (const el of this._submenus)\n      el.removeAttribute(\"aria-hidden\");\n    this._onResize();\n  }\n  _onResize() {\n    if (!this._menuItems || false)\n      return;\n    let style = getComputedStyle(this._menuItems), height = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);\n    let children = [...this._menuItems.children];\n    if (children[0]?.localName === \"shadow-root\") {\n      children.push(...children[0].children);\n    }\n    for (const child of children) {\n      height += child.offsetHeight;\n    }\n    requestAnimationFrame(() => {\n      if (!this._menuItems)\n        return;\n      setAttribute(this._menuItems, \"data-resizing\", \"\");\n      setTimeout(() => {\n        if (!this._menuItems)\n          return;\n        setAttribute(this._menuItems, \"data-resizing\", false);\n      }, 250);\n      setStyle(this._menuItems, \"--menu-height\", height + \"px\");\n    });\n  }\n  open(trigger) {\n    if (peek(this._expanded))\n      return;\n    this._expanded.set(true);\n    tick();\n    this._onChange(trigger);\n    if (isKeyboardEvent(trigger)) {\n      this._menuItems?.focus();\n    }\n    this._changeIdleTracking(trigger);\n  }\n  close(trigger) {\n    if (!peek(this._expanded))\n      return;\n    this._expanded.set(false);\n    tick();\n    if (isKeyboardEvent(trigger)) {\n      requestAnimationFrame(() => {\n        this._menuButton?.focus();\n      });\n    }\n    this._onChange(trigger);\n    this._changeIdleTracking(trigger);\n  }\n}\n__decorateClass$2([\n  method\n], Menu.prototype, \"open\", 1);\n__decorateClass$2([\n  method\n], Menu.prototype, \"close\", 1);\n\nclass MenuButton extends Component {\n  static el = defineElement({\n    tagName: \"media-menu-button\",\n    props: { disabled: false }\n  });\n  _menu;\n  constructor(instance) {\n    super(instance);\n    this._menu = useContext(menuContext);\n    new FocusVisibleController(instance);\n    new TooltipController(instance);\n  }\n  onAttach(el) {\n    this._menu._attachMenuButton(el);\n    effect(this._watchDisabled.bind(this));\n  }\n  onConnect(el) {\n    const hint = Array.from(el.querySelectorAll('[slot=\"hint\"]')).pop();\n    if (hint) {\n      effect(() => {\n        const text = this._menu._hint();\n        if (text)\n          hint.textContent = text;\n      });\n    }\n  }\n  _watchDisabled() {\n    this._menu._disableMenuButton(this.$props.disabled());\n  }\n}\n\nclass MenuItems extends Component {\n  static el = defineElement({\n    tagName: \"media-menu-items\"\n  });\n  _menu;\n  constructor(instance) {\n    super(instance);\n    this._menu = useContext(menuContext);\n    new FocusVisibleController(instance);\n  }\n  onAttach(el) {\n    this._menu._attachMenuItems(el);\n  }\n}\n\nconst radioGroupContext = createContext();\n\nvar __defProp$1 = Object.defineProperty;\nvar __getOwnPropDesc$1 = Object.getOwnPropertyDescriptor;\nvar __decorateClass$1 = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$1(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp$1(target, key, result);\n  return result;\n};\nclass RadioGroup extends Component {\n  static el = defineElement({\n    tagName: \"media-radio-group\",\n    props: { value: \"\" }\n  });\n  _group = /* @__PURE__ */ new Set();\n  _value = signal(\"\");\n  get values() {\n    return Array.from(this._group).map((radio) => radio._value());\n  }\n  get value() {\n    return this._value();\n  }\n  set value(value) {\n    this._onChange(value);\n  }\n  constructor(instance) {\n    super(instance);\n    provideContext(radioGroupContext, {\n      add: this._addRadio.bind(this),\n      remove: this._removeRadio.bind(this)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    if (!isMenuItem)\n      setAttributeIfEmpty(el, \"role\", \"radiogroup\");\n    this._watchValueProp();\n    this.setAttributes({ value: this._value });\n  }\n  onConnect() {\n    effect(this._watchValueProp.bind(this));\n  }\n  onDestroy() {\n    this._group.clear();\n  }\n  _addRadio(radio) {\n    if (this._group.has(radio))\n      return;\n    this._group.add(radio);\n    radio._onCheck = this._onChangeBind;\n    radio._check(radio._value() === this._value());\n  }\n  _removeRadio(radio) {\n    radio._onCheck = null;\n    this._group.delete(radio);\n  }\n  _watchValueProp() {\n    this._onChange(this.$props.value());\n  }\n  _onChangeBind = this._onChange.bind(this);\n  _onChange(newValue, trigger) {\n    const currentValue = peek(this._value);\n    if (!newValue || newValue === currentValue)\n      return;\n    const currentRadio = this._findRadio(currentValue), newRadio = this._findRadio(newValue);\n    currentRadio?._check(false, trigger);\n    newRadio?._check(true, trigger);\n    this._value.set(newValue);\n    this.dispatch(\"change\", { trigger });\n  }\n  _findRadio(newValue) {\n    for (const radio of this._group) {\n      if (newValue === peek(radio._value))\n        return radio;\n    }\n    return null;\n  }\n}\n__decorateClass$1([\n  prop\n], RadioGroup.prototype, \"values\", 1);\n__decorateClass$1([\n  prop\n], RadioGroup.prototype, \"value\", 1);\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\nconst $$_templ$b = /* @__PURE__ */ $$_create_template(`<!$><div part=\"check\"></div>`);\nclass Radio extends Component {\n  static el = defineElement({\n    tagName: \"media-radio\",\n    props: { value: \"\" }\n  });\n  _checked = signal(false);\n  _controller = {\n    _value: this.$props.value,\n    _check: this._check.bind(this),\n    _onCheck: null\n  };\n  get checked() {\n    return this._checked();\n  }\n  constructor(instance) {\n    super(instance);\n    new FocusVisibleController(instance);\n  }\n  onAttach() {\n    effect(this._watchValue.bind(this));\n    this._addToGroup();\n    const isMenuItem = hasProvidedContext(menuContext);\n    this.setAttributes({\n      value: this.$props.value,\n      role: isMenuItem ? \"menuitemradio\" : \"radio\",\n      tabindex: isMenuItem ? -1 : 0,\n      \"aria-checked\": $ariaBool(this._checked)\n    });\n  }\n  onConnect(el) {\n    this._addToGroup();\n    onPress(el, this._onPress.bind(this));\n  }\n  onDisconnect() {\n    const group = useContext(radioGroupContext);\n    group.remove(this._controller);\n  }\n  _addToGroup() {\n    const group = useContext(radioGroupContext);\n    group.add(this._controller);\n  }\n  _watchValue() {\n    const { value } = this.$props, newValue = value();\n    if (peek(this._checked)) {\n      this._controller._onCheck?.(newValue);\n    }\n  }\n  _onPress(event) {\n    if (peek(this._checked))\n      return;\n    this._checked.set(true);\n    this.dispatch(\"change\", { trigger: event });\n    this._controller._onCheck?.(peek(this.$props.value), event);\n  }\n  _check(value, trigger) {\n    if (peek(this._checked) === value)\n      return;\n    this._checked.set(value);\n    this.dispatch(\"change\", { trigger });\n  }\n  render() {\n    return $$_next_template($$_templ$b);\n  }\n}\n__decorateClass([\n  prop\n], Radio.prototype, \"checked\", 1);\n\nconst $$_templ$a = /* @__PURE__ */ $$_create_template(`<!$><media-radio-group mk-d><!$></media-radio-group>`), $$_templ_2$4 = /* @__PURE__ */ $$_create_template(`<!$><media-radio mk-d><!$></media-radio>`);\nfunction renderRadioGroup(props) {\n  const { value, onChange, radioGroupClass } = props;\n  return (() => {\n    const [$$_root, $$_walker] = $$_create_walker($$_templ$a), $$_expr = $$_walker.nextNode();\n    $$_effect(() => $$_attr($$_root, \"class\", radioGroupClass()));\n    $$_listen($$_root, \"change\", onChange);\n    $$_scoped(() => {\n      $$_insert_at_marker_lite($$_expr, () => renderOptions(props));\n    }, $$_setup_custom_element($$_root, { value }));\n    return $$_root;\n  })();\n}\nfunction renderOptions(props) {\n  const { options } = props;\n  return options().map((option) => {\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ_2$4), $$_expr = $$_walker.nextNode();\n      $$_attr($$_root, \"part\", props.part);\n      $$_scoped(() => {\n        $$_insert_at_marker_lite($$_expr, option.content);\n      }, $$_setup_custom_element($$_root, { value: option.value }));\n      return $$_root;\n    })();\n  });\n}\n\nconst $$_templ$9 = /* @__PURE__ */ $$_create_template(`<!$><media-thumbnail part=\"thumbnail\" mk-d></media-thumbnail>`), $$_templ_2$3 = /* @__PURE__ */ $$_create_template(`<!$><div part=\"content\"><div part=\"title\"><!$></div><div part=\"start-time\"><!$></div><div part=\"duration\"><!$></div></div>`);\nclass ChaptersMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-chapters-menu-items\",\n    props: {\n      containerClass: null,\n      chapterClass: null,\n      thumbnailClass: null,\n      contentClass: null,\n      titleClass: null,\n      startTimeClass: null,\n      durationClass: null\n    }\n  });\n  static register = [Thumbnail, RadioGroup, Radio];\n  _media;\n  _index = signal(0);\n  _track = signal(null);\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onAttach(el) {\n    super.onAttach(el);\n    this._menu._attachObserver({\n      _onOpen: this._onOpen.bind(this)\n    });\n    this.setAttributes({\n      \"data-thumbnails\": this._hasThumbnails.bind(this)\n    });\n  }\n  _onOpen() {\n    peek(() => this._watchCurrentTime());\n  }\n  onConnect(el) {\n    effect(this._watchCurrentTime.bind(this));\n    effect(this._watchControllerDisabled.bind(this));\n    this._onTrackModeChange();\n    listenEvent(this._media.textTracks, \"mode-change\", this._onTrackModeChange.bind(this));\n    const {\n      chapterClass,\n      thumbnailClass,\n      contentClass,\n      titleClass,\n      startTimeClass,\n      durationClass\n    } = this.$props;\n    new ClassManager(el)._observe('[part=\"chapter\"]', chapterClass)._observe('[part=\"thumbnail\"]', thumbnailClass)._observe('[part=\"content\"]', contentClass)._observe('[part=\"title\"]', titleClass)._observe('[part=\"start-time\"]', startTimeClass)._observe('[part=\"duration\"]', durationClass);\n  }\n  _hasThumbnails() {\n    const { thumbnailCues } = this._media.$store;\n    return thumbnailCues().length > 0;\n  }\n  _watchCurrentTime() {\n    if (!this._menu._expanded())\n      return;\n    const track = this._track();\n    if (!track) {\n      this._index.set(-1);\n      return;\n    }\n    const { currentTime } = this._media.$store, time = currentTime(), activeCueIndex = track.cues.findIndex((cue) => isCueActive(cue, time));\n    this._index.set(activeCueIndex);\n    if (activeCueIndex >= 0) {\n      const cue = track.cues[activeCueIndex], radio = this.el.querySelector(`shadow-root media-radio[aria-checked='true']`), playedPercent = (time - cue.startTime) / (cue.endTime - cue.startTime) * 100;\n      radio && setStyle(radio, \"--played-percent\", round(playedPercent, 3) + \"%\");\n    }\n  }\n  _watchControllerDisabled() {\n    this._menu._disable(this._isDisabled());\n  }\n  _isDisabled() {\n    const track = this._track();\n    return !track || !track.cues.length;\n  }\n  _onChange(event) {\n    if (this._isDisabled() || !event.trigger)\n      return;\n    const index = +event.target.value, cues = this._track()?.cues;\n    if (isNumber(index) && cues?.[index]) {\n      this._index.set(index);\n      this._media.remote.seek(cues[index].startTime, event);\n    }\n  }\n  _onTrackModeChange() {\n    onTrackChapterChange(this._media.textTracks, peek(this._track), this._track.set);\n  }\n  _getValue() {\n    return this._index() + \"\";\n  }\n  _getOptions() {\n    const track = this._track();\n    if (!track)\n      return [];\n    return track.cues.map((cue, i) => ({\n      value: i + \"\",\n      content: () => [\n        (() => {\n          const $$_signal = $$_computed(\n            () => this._hasThumbnails() && (() => {\n              const [$$_root, $$_walker] = $$_create_walker($$_templ$9);\n              $$_setup_custom_element($$_root, { time: cue.startTime });\n              return $$_root;\n            })()\n          );\n          $$_signal();\n          return $$_signal;\n        })(),\n        (() => {\n          const [$$_root, $$_walker] = $$_create_walker($$_templ_2$3), $$_expr = $$_walker.nextNode(), $$_expr_2 = $$_walker.nextNode(), $$_expr_3 = $$_walker.nextNode();\n          $$_insert_at_marker_lite($$_expr, cue.text);\n          $$_insert_at_marker_lite($$_expr_2, () => formatTime(cue.startTime, false, cue.startTime >= 3600));\n          $$_insert_at_marker_lite($$_expr_3, () => formatSpokenTime(cue.endTime - cue.startTime));\n          return $$_root;\n        })()\n      ]\n    }));\n  }\n  render() {\n    const { containerClass } = this.$props;\n    return renderRadioGroup({\n      part: \"chapter\",\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass: containerClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\n\nconst $$_templ$8 = /* @__PURE__ */ $$_create_template(`<!$><span part=\"label\"><!$></span>`);\nclass AudioMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-audio-menu-items\",\n    props: {\n      emptyLabel: \"Default\",\n      radioClass: null,\n      radioGroupClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchControllerDisabled.bind(this));\n    effect(this._watchHintText.bind(this));\n    const { radioClass, radioCheckClass } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const { emptyLabel } = this.$props, { audioTrack } = this._media.$store, track = audioTrack();\n    this._menu._hint.set(track?.label ?? emptyLabel());\n  }\n  _watchControllerDisabled() {\n    this._menu._disable(this._isDisabled());\n  }\n  _isDisabled() {\n    const { audioTracks } = this._media.$store;\n    return audioTracks().length === 0;\n  }\n  _onChange(event) {\n    if (this._isDisabled())\n      return;\n    const radioGroup = event.target;\n    const value = radioGroup.value, index = this._media.audioTracks.toArray().findIndex((track) => track.label.toLowerCase() === value);\n    if (index >= 0)\n      this._media.remote.changeAudioTrack(index, event);\n  }\n  _getValue() {\n    const { audioTrack } = this._media.$store;\n    const track = audioTrack();\n    return track ? track.label.toLowerCase() : \"\";\n  }\n  _getOptions() {\n    const { audioTracks } = this._media.$store;\n    return audioTracks().map((track) => ({\n      value: track.label.toLowerCase(),\n      content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$8), $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, track.label);\n        return $$_root;\n      })()\n    }));\n  }\n  render() {\n    const { radioGroupClass } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\n\nvar Icon$51 = `<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.6667 5.99998C26.6667 5.63179 26.3682 5.33331 26 5.33331H11.3333C10.9651 5.33331 10.6667 5.63179 10.6667 5.99998V17.5714C10.6667 17.6694 10.5644 17.7342 10.4741 17.6962C9.91823 17.4625 9.30754 17.3333 8.66667 17.3333C6.08934 17.3333 4 19.4226 4 22C4 24.5773 6.08934 26.6666 8.66667 26.6666C11.244 26.6666 13.3333 24.5773 13.3333 22V8.66665C13.3333 8.29846 13.6318 7.99998 14 7.99998L23.3333 7.99998C23.7015 7.99998 24 8.29846 24 8.66665V14.9048C24 15.0027 23.8978 15.0675 23.8075 15.0296C23.2516 14.7958 22.6409 14.6666 22 14.6666C19.4227 14.6666 17.3333 16.756 17.3333 19.3333C17.3333 21.9106 19.4227 24 22 24C24.5773 24 26.6667 21.9106 26.6667 19.3333V5.99998ZM22 21.3333C23.1046 21.3333 24 20.4379 24 19.3333C24 18.2287 23.1046 17.3333 22 17.3333C20.8954 17.3333 20 18.2287 20 19.3333C20 20.4379 20.8954 21.3333 22 21.3333ZM8.66667 24C9.77124 24 10.6667 23.1045 10.6667 22C10.6667 20.8954 9.77124 20 8.66667 20C7.5621 20 6.66667 20.8954 6.66667 22C6.66667 23.1045 7.5621 24 8.66667 24Z\" fill=\"currentColor\"/>`;\n\nvar Icon$10 = `<path d=\"M13.0908 14.3334C12.972 14.3334 12.9125 14.1898 12.9965 14.1058L17.7021 9.40022C17.9625 9.13987 17.9625 8.71776 17.7021 8.45741L16.2879 7.04319C16.0275 6.78284 15.6054 6.78284 15.3451 7.04319L6.8598 15.5285C6.59945 15.7888 6.59945 16.2109 6.8598 16.4713L8.27401 17.8855L8.27536 17.8868L15.3453 24.9568C15.6057 25.2172 16.0278 25.2172 16.2881 24.9568L17.7024 23.5426C17.9627 23.2822 17.9627 22.8601 17.7024 22.5998L12.9969 17.8944C12.9129 17.8104 12.9724 17.6668 13.0912 17.6668L26 17.6668C26.3682 17.6668 26.6667 17.3683 26.6667 17.0001V15.0001C26.6667 14.6319 26.3682 14.3334 26 14.3334L13.0908 14.3334Z\" fill=\"currentColor\"/>`;\n\nvar Icon$18 = `<path d=\"M15.905 17.4809C15.9571 17.533 16.0415 17.533 16.0936 17.4809L22.4111 11.1635C22.6714 10.9031 23.0935 10.9031 23.3539 11.1635L24.9567 12.7662C25.217 13.0266 25.217 13.4487 24.9567 13.709L18.1028 20.5629C18.0937 20.5732 18.0842 20.5833 18.0744 20.5931L16.4716 22.1959C16.2113 22.4562 15.7892 22.4562 15.5288 22.1959L7.04353 13.7106C6.78318 13.4503 6.78318 13.0281 7.04353 12.7678L8.6463 11.165C8.90665 10.9047 9.32876 10.9047 9.58911 11.165L15.905 17.4809Z\" fill=\"currentColor\"/>`;\n\nconst $$_templ$7 = /* @__PURE__ */ $$_create_template(`<!$><span slot=\"label\"><!$></span>`), $$_templ_2$2 = /* @__PURE__ */ $$_create_template(`<!$><div slot=\"hint\"></div>`);\nfunction renderMenuButtonContent({ label, iconPaths }) {\n  return [\n    $$_create_component(Icon, { slot: \"close-icon\", paths: Icon$10 }),\n    $$_create_component(Icon, { slot: \"icon\", paths: iconPaths }),\n    (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$7), $$_expr = $$_walker.nextNode();\n      $$_insert_at_marker_lite($$_expr, label);\n      return $$_root;\n    })(),\n    $$_next_template($$_templ_2$2),\n    $$_create_component(Icon, { slot: \"open-icon\", paths: Icon$18 })\n  ];\n}\n\nclass AudioMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-audio-menu-button\",\n    props: { disabled: false, label: \"Audio\" }\n  });\n  render() {\n    const { label } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$51\n    });\n  }\n}\n\nconst $$_templ$6 = /* @__PURE__ */ $$_create_template(`<!$><span part=\"label\"><!$></span>`), $$_templ_2$1 = $$_templ$6;\nclass CaptionsMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-captions-menu-items\",\n    props: {\n      offLabel: \"Off\",\n      radioClass: null,\n      radioGroupClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchControllerDisabled.bind(this));\n    effect(this._watchHintText.bind(this));\n    const { radioClass, radioCheckClass } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const { offLabel } = this.$props, { textTrack } = this._media.$store, track = textTrack();\n    this._menu._hint.set(\n      track && isTrackCaptionKind(track) && track.mode === \"showing\" ? track.label : offLabel()\n    );\n  }\n  _watchControllerDisabled() {\n    this._menu._disable(this._isDisabled());\n  }\n  _isDisabled() {\n    const { textTracks } = this._media.$store;\n    return textTracks().filter(isTrackCaptionKind).length === 0;\n  }\n  _onChange(event) {\n    if (this._isDisabled())\n      return;\n    const radioGroup = event.target;\n    const value = radioGroup.value;\n    if (value === \"off\") {\n      const track = this._media.textTracks.selected;\n      if (track) {\n        const index2 = this._media.textTracks.toArray().indexOf(track);\n        this._media.remote.changeTextTrackMode(index2, \"disabled\", event);\n      }\n      return;\n    }\n    const index = this._media.textTracks.toArray().findIndex((track) => track.label.toLowerCase() === value);\n    if (index >= 0)\n      this._media.remote.changeTextTrackMode(index, \"showing\", event);\n  }\n  _getValue() {\n    const { textTrack, textTracks } = this._media.$store, track = textTrack();\n    return track && isTrackCaptionKind(track) && track.mode === \"showing\" ? track.label.toLowerCase() : \"off\";\n  }\n  _getOptions() {\n    const { offLabel } = this.$props, { textTracks } = this._media.$store;\n    return [\n      { value: \"off\", content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$6), $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, offLabel);\n        return $$_root;\n      })() },\n      ...textTracks().filter(isTrackCaptionKind).map((track) => ({\n        value: track.label.toLowerCase(),\n        content: () => (() => {\n          const [$$_root, $$_walker] = $$_create_walker($$_templ_2$1), $$_expr = $$_walker.nextNode();\n          $$_insert_at_marker_lite($$_expr, track.label);\n          return $$_root;\n        })()\n      }))\n    ];\n  }\n  render() {\n    const { radioGroupClass } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\n\nclass CaptionsMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-captions-menu-button\",\n    props: { disabled: false, label: \"Captions\" }\n  });\n  render() {\n    const { label } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$25\n    });\n  }\n}\n\nconst $$_templ$5 = /* @__PURE__ */ $$_create_template(`<!$><span part=\"label\"><!$></span>`);\nclass PlaybackRateMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-playback-rate-menu-items\",\n    props: {\n      normalLabel: \"Normal\",\n      rates: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2],\n      radioGroupClass: null,\n      radioClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchHintText.bind(this));\n    const { radioClass, radioCheckClass } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const { normalLabel } = this.$props, { playbackRate } = this._media.$store, rate = playbackRate();\n    this._menu._hint.set(rate === 1 ? normalLabel() : rate + \"\\xD7\");\n  }\n  _onChange(event) {\n    const radioGroup = event.target;\n    this._media.remote.changePlaybackRate(+radioGroup.value, event);\n  }\n  _getValue() {\n    const { playbackRate } = this._media.$store;\n    return playbackRate() + \"\";\n  }\n  _getOptions() {\n    const { rates, normalLabel } = this.$props;\n    return rates().map((rate) => ({\n      value: rate + \"\",\n      content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$5), $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, () => rate === 1 ? normalLabel() : rate + \"\\xD7\");\n        return $$_root;\n      })()\n    }));\n  }\n  render() {\n    const { radioGroupClass } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\n\nvar Icon$55 = `<path d=\"M25.14 25.1089C25.0171 25.2532 24.8356 25.3333 24.646 25.3333H22.8124C22.1084 25.3333 21.7734 24.1872 22.2745 23.6927C23.9161 22.0729 24.9336 19.822 24.9336 17.3333C24.9336 12.3997 20.9336 8.39973 16 8.39973C11.0664 8.39973 7.06641 12.3997 7.06641 17.3333C7.06641 19.822 8.08389 22.0729 9.72555 23.6927C10.2266 24.1872 9.89155 25.3333 9.18762 25.3333H7.35398C7.16436 25.3333 6.98294 25.2532 6.86001 25.1089C5.07703 23.015 4 20.2991 4 17.3333C4 10.7057 9.3724 5.33333 16 5.33333C22.6276 5.33333 28 10.7057 28 17.3333C28 20.2991 26.923 23.015 25.14 25.1089Z\" fill=\"currentColor\"/> <path d=\"M21.1992 14.3399C21.4595 14.0796 21.4595 13.6575 21.1992 13.3971L20.2564 12.4543C19.996 12.194 19.5739 12.194 19.3136 12.4543L16.4492 15.3187C16.4185 15.3493 16.3749 15.3629 16.332 15.3568C16.2236 15.3414 16.1127 15.3334 16 15.3334C14.7113 15.3334 13.6667 16.378 13.6667 17.6667C13.6667 18.9554 14.7113 20 16 20C17.2887 20 18.3333 18.9554 18.3333 17.6667C18.3333 17.5464 18.3242 17.4283 18.3067 17.313C18.3001 17.2696 18.3136 17.2255 18.3446 17.1945L21.1992 14.3399Z\" fill=\"currentColor\"/>`;\n\nclass PlaybackRateMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-playback-rate-menu-button\",\n    props: { disabled: false, label: \"Speed\" }\n  });\n  render() {\n    const { label } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$55\n    });\n  }\n}\n\nconst $$_templ$4 = /* @__PURE__ */ $$_create_template(`<!$><span><!$></span>`), $$_templ_2 = /* @__PURE__ */ $$_create_template(`<!$><span part=\"label\"><!$></span>`), $$_templ_3 = /* @__PURE__ */ $$_create_template(`<!$><span part=\"info\"><!$></span>`);\nclass QualityMenuItems extends MenuItems {\n  static el = defineElement({\n    tagName: \"media-quality-menu-items\",\n    props: {\n      autoLabel: \"Auto\",\n      hideBitrate: false,\n      radioGroupClass: null,\n      radioClass: null,\n      radioCheckClass: null\n    }\n  });\n  static register = [RadioGroup, Radio];\n  _media;\n  _sortedQualities = computed(() => {\n    const { qualities } = this._media.$store;\n    return [...qualities()].sort(\n      (a, b) => b.height === a.height ? b.bitrate - a.bitrate : b.height - a.height\n    );\n  });\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n  }\n  onConnect(el) {\n    effect(this._watchControllerDisabled.bind(this));\n    effect(this._watchHintText.bind(this));\n    const { radioClass, radioCheckClass } = this.$props;\n    new ClassManager(el)._observe(\"media-radio\", radioClass)._observe('[part=\"check\"]', radioCheckClass);\n  }\n  _watchHintText() {\n    const { autoLabel } = this.$props, { autoQuality, quality } = this._media.$store, qualityText = quality() ? quality().height + \"p\" : \"\";\n    this._menu._hint.set(!autoQuality() ? qualityText : autoLabel() + ` (${qualityText})`);\n  }\n  _watchControllerDisabled() {\n    const { qualities } = this._media.$store;\n    this._menu._disable(qualities().length === 0);\n  }\n  _isDisabled() {\n    const { canSetQuality, qualities } = this._media.$store;\n    return !canSetQuality() || qualities().length === 0;\n  }\n  _onChange(event) {\n    if (this._isDisabled())\n      return;\n    const radioGroup = event.target, value = radioGroup.value;\n    if (value === \"auto\") {\n      this._media.remote.changeQuality(-1, event);\n      return;\n    }\n    const { qualities } = this._media.$store, index = peek(qualities).findIndex((quality) => this._getQualityId(quality) === value);\n    if (index >= 0)\n      this._media.remote.changeQuality(index, event);\n  }\n  _getValue() {\n    const { quality, autoQuality } = this._media.$store;\n    if (autoQuality())\n      return \"auto\";\n    const currentQuality = quality();\n    return currentQuality ? this._getQualityId(currentQuality) : \"auto\";\n  }\n  _getQualityId(quality) {\n    return quality.height + \"_\" + quality.bitrate;\n  }\n  _getOptions() {\n    const { autoLabel, hideBitrate } = this.$props;\n    return [\n      { value: \"auto\", content: () => (() => {\n        const [$$_root, $$_walker] = $$_create_walker($$_templ$4), $$_expr = $$_walker.nextNode();\n        $$_insert_at_marker_lite($$_expr, autoLabel);\n        return $$_root;\n      })() },\n      ...this._sortedQualities().map((quality) => {\n        const rate = `${round(quality.bitrate / 1e6, 2)} Mbps`;\n        return {\n          value: this._getQualityId(quality),\n          content: () => [\n            (() => {\n              const [$$_root, $$_walker] = $$_create_walker($$_templ_2), $$_expr = $$_walker.nextNode();\n              $$_insert_at_marker_lite($$_expr, quality.height + \"p\");\n              return $$_root;\n            })(),\n            (() => {\n              const $$_signal = $$_computed(\n                () => !hideBitrate() && (() => {\n                  const [$$_root, $$_walker] = $$_create_walker($$_templ_3), $$_expr = $$_walker.nextNode();\n                  $$_insert_at_marker_lite($$_expr, rate);\n                  return $$_root;\n                })()\n              );\n              $$_signal();\n              return $$_signal;\n            })()\n          ]\n        };\n      })\n    ];\n  }\n  render() {\n    const { radioGroupClass } = this.$props;\n    return renderRadioGroup({\n      value: this._getValue.bind(this),\n      options: this._getOptions.bind(this),\n      radioGroupClass,\n      onChange: this._onChange.bind(this)\n    });\n  }\n}\n\nvar Icon$83 = `<path d=\"M18.6669 10.4001C18.6669 10.7683 18.3684 11.0667 18.0002 11.0667H16.2668C15.8987 11.0667 15.6002 10.7683 15.6002 10.4001V9.86674C15.6002 9.7931 15.5405 9.73341 15.4669 9.73341H5.99998C5.63179 9.73341 5.33331 9.43493 5.33331 9.06674V7.33341C5.33331 6.96522 5.63179 6.66674 5.99998 6.66674H15.4669C15.5405 6.66674 15.6002 6.60704 15.6002 6.53341V6.00007C15.6002 5.63188 15.8987 5.3334 16.2668 5.3334H18.0002C18.3684 5.3334 18.6669 5.63188 18.6669 6.00007V10.4001Z\" fill=\"currentColor\"/> <path d=\"M11.3334 18.8668C11.7016 18.8668 12.0001 18.5683 12.0001 18.2001V13.8001C12.0001 13.4319 11.7016 13.1335 11.3334 13.1335H9.60006C9.23187 13.1335 8.93339 13.4319 8.93339 13.8001V14.3335C8.93339 14.4071 8.8737 14.4668 8.80006 14.4668H6.00006C5.63187 14.4668 5.33339 14.7653 5.33339 15.1335V16.8668C5.33339 17.235 5.63187 17.5335 6.00006 17.5335H8.80006C8.8737 17.5335 8.93339 17.5932 8.93339 17.6668V18.2001C8.93339 18.5683 9.23187 18.8668 9.60006 18.8668H11.3334Z\" fill=\"currentColor\"/> <path d=\"M18.6667 26.0001C18.6667 26.3683 18.3682 26.6668 18 26.6668H16.2667C15.8985 26.6668 15.6 26.3683 15.6 26.0001V25.4668C15.6 25.3931 15.5403 25.3334 15.4667 25.3334H6.00014C5.63195 25.3334 5.33348 25.0349 5.33348 24.6668V22.9334C5.33348 22.5652 5.63195 22.2668 6.00014 22.2668H15.4667C15.5403 22.2668 15.6 22.2071 15.6 22.1334V21.6001C15.6 21.2319 15.8985 20.9334 16.2667 20.9334H18C18.3682 20.9334 18.6667 21.2319 18.6667 21.6001V26.0001Z\" fill=\"currentColor\"/> <path d=\"M22 24.6668C22 25.0349 22.2985 25.3334 22.6667 25.3334H26.0001C26.3683 25.3334 26.6668 25.0349 26.6668 24.6668V22.9334C26.6668 22.5652 26.3683 22.2668 26.0001 22.2668H22.6667C22.2985 22.2668 22 22.5652 22 22.9334V24.6668Z\" fill=\"currentColor\"/> <path d=\"M16.0001 17.5335C15.6319 17.5335 15.3334 17.235 15.3334 16.8668V15.1335C15.3334 14.7653 15.6319 14.4668 16.0001 14.4668H26.0001C26.3683 14.4668 26.6667 14.7653 26.6667 15.1335V16.8668C26.6667 17.235 26.3683 17.5335 26.0001 17.5335H16.0001Z\" fill=\"currentColor\"/> <path d=\"M22.0002 9.06674C22.0002 9.43493 22.2987 9.73341 22.6669 9.73341H26C26.3682 9.73341 26.6666 9.43493 26.6666 9.06674V7.3334C26.6666 6.96521 26.3682 6.66674 26 6.66674H22.6669C22.2987 6.66674 22.0002 6.96522 22.0002 7.33341V9.06674Z\" fill=\"currentColor\"/>`;\n\nclass QualityMenuButton extends MenuButton {\n  static el = defineElement({\n    tagName: \"media-quality-menu-button\",\n    props: { disabled: false, label: \"Quality\" }\n  });\n  render() {\n    const { label } = this.$props;\n    return renderMenuButtonContent({\n      label,\n      iconPaths: Icon$83\n    });\n  }\n}\n\nclass Gesture extends Component {\n  static el = defineElement({\n    tagName: \"media-gesture\",\n    props: {\n      event: void 0,\n      action: void 0\n    }\n  });\n  _media;\n  _outlet = null;\n  onAttach() {\n    const { event, action } = this.$props;\n    this.setAttributes({\n      event,\n      action\n    });\n  }\n  onConnect() {\n    this._media = useMedia();\n    scopedRaf(() => {\n      this._outlet = this._media.player.querySelector(\"media-outlet\");\n      effect(this._attachListener.bind(this));\n    });\n  }\n  _attachListener() {\n    let eventType = this.$props.event();\n    if (!this._outlet || !eventType)\n      return;\n    if (/^dbl/.test(eventType)) {\n      eventType = eventType.split(/^dbl/)[1];\n    }\n    listenEvent(this._outlet, eventType, this._acceptEvent.bind(this));\n  }\n  _presses = 0;\n  _pressTimerId = -1;\n  _acceptEvent(event) {\n    if (!this._inBounds(event) || isPointerEvent(event) && (event.button !== 0 || this._media.activeMenu)) {\n      return;\n    }\n    event.MEDIA_GESTURE = true;\n    event.preventDefault();\n    const isDblEvent = peek(this.$props.event)?.startsWith(\"dbl\");\n    if (!isDblEvent) {\n      if (this._presses === 0) {\n        setTimeout(() => {\n          if (this._presses === 1)\n            this._handleEvent(event);\n        }, 250);\n      }\n    } else if (this._presses === 1) {\n      queueMicrotask(() => this._handleEvent(event));\n      clearTimeout(this._pressTimerId);\n      this._presses = 0;\n      return;\n    }\n    if (this._presses === 0) {\n      this._pressTimerId = window.setTimeout(() => {\n        this._presses = 0;\n      }, 275);\n    }\n    this._presses++;\n  }\n  _handleEvent(event) {\n    this.el.setAttribute(\"data-triggered\", \"\");\n    requestAnimationFrame(() => {\n      if (this._isTopLayer()) {\n        this._performAction(peek(this.$props.action), event);\n      }\n      requestAnimationFrame(() => {\n        this.el.removeAttribute(\"data-triggered\");\n      });\n    });\n  }\n  /** Validate event occurred in gesture bounds. */\n  _inBounds(event) {\n    if (!this.el)\n      return false;\n    if (isPointerEvent(event) || isMouseEvent(event) || isTouchEvent(event)) {\n      const touch = isTouchEvent(event) ? event.touches[0] : void 0;\n      const clientX = touch?.clientX ?? event.clientX;\n      const clientY = touch?.clientY ?? event.clientY;\n      const rect = this.el.getBoundingClientRect();\n      const inBounds = clientY >= rect.top && clientY <= rect.bottom && clientX >= rect.left && clientX <= rect.right;\n      return event.type.includes(\"leave\") ? !inBounds : inBounds;\n    }\n    return true;\n  }\n  /** Validate gesture has the highest z-index in this triggered group. */\n  _isTopLayer() {\n    const gestures = this._media.player.querySelectorAll(\n      \"media-gesture[data-triggered]\"\n    );\n    return Array.from(gestures).sort(\n      (a, b) => +getComputedStyle(b).zIndex - +getComputedStyle(a).zIndex\n    )[0]?.component === this;\n  }\n  _performAction(action, trigger) {\n    if (!action)\n      return;\n    const [method, value] = action.replace(/:([a-z])/, \"-$1\").split(\":\");\n    if (action.includes(\":fullscreen\")) {\n      this._media.remote.toggleFullscreen(\"prefer-media\", trigger);\n    } else if (action.includes(\"seek:\")) {\n      this._media.remote.seek(peek(this._media.$store.currentTime) + (+value || 0), trigger);\n    } else {\n      this._media.remote[kebabToCamelCase(method)](trigger);\n    }\n  }\n}\n\nconst $$_templ$3 = /* @__PURE__ */ $$_create_template(`<!$><svg part=\"icon\" fill=\"none\" viewBox=\"0 0 120 120\" aria-hidden=\"true\"><circle part=\"track\" cx=\"60\" cy=\"60\" r=\"54\" stroke=\"currentColor\"></circle><circle part=\"track-fill\" cx=\"60\" cy=\"60\" r=\"54\" stroke=\"currentColor\" pathLength=\"100\"></circle></svg>`);\nclass BufferingIndicator extends Component {\n  static el = defineElement({\n    tagName: \"media-buffering-indicator\"\n  });\n  _media;\n  onAttach() {\n    this._media = useMedia();\n    this.setAttributes({\n      \"data-buffering\": computed(this._isBuffering.bind(this))\n    });\n  }\n  _isBuffering() {\n    const { canPlay, waiting } = this._media.$store;\n    return !canPlay() || waiting();\n  }\n  render() {\n    return $$_next_template($$_templ$3);\n  }\n}\n\nclass CaptionsTextRenderer {\n  constructor(_renderer) {\n    this._renderer = _renderer;\n  }\n  priority = 10;\n  _track = null;\n  _disposal = createDisposalBin();\n  attach() {\n  }\n  canRender() {\n    return true;\n  }\n  detach() {\n    this._disposal.empty();\n    this._renderer.reset();\n    this._track = null;\n  }\n  changeTrack(track) {\n    if (!track || this._track === track)\n      return;\n    this._disposal.empty();\n    if (track.readyState < 2) {\n      this._renderer.reset();\n      this._disposal.add(\n        listenEvent(track, \"load\", () => this._changeTrack(track), { once: true })\n      );\n    } else {\n      this._changeTrack(track);\n    }\n    this._disposal.add(\n      listenEvent(track, \"add-cue\", (event) => {\n        this._renderer.addCue(event.detail);\n      }),\n      listenEvent(track, \"remove-cue\", (event) => {\n        this._renderer.removeCue(event.detail);\n      })\n    );\n    this._track = track;\n  }\n  _changeTrack(track) {\n    this._renderer.changeTrack({\n      cues: [...track.cues],\n      regions: [...track.regions]\n    });\n  }\n}\n\nclass Captions extends Component {\n  static el = defineElement({\n    tagName: \"media-captions\",\n    props: { textDir: \"ltr\" }\n  });\n  _media;\n  _renderer;\n  _textRenderer;\n  onAttach() {\n    this._media = useMedia();\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  onConnect(el) {\n    this._renderer = new CaptionsRenderer(el);\n    this._textRenderer = new CaptionsTextRenderer(this._renderer);\n    effect(this._watchViewType.bind(this));\n  }\n  onDisconnect() {\n    if (this._textRenderer) {\n      this._textRenderer.detach();\n      this._media.textRenderers.remove(this._textRenderer);\n    }\n    this._renderer?.destroy();\n  }\n  _isHidden() {\n    const { textTrack } = this._media.$store, track = textTrack();\n    return !track || !isTrackCaptionKind(track);\n  }\n  _watchViewType() {\n    const { viewType } = this._media.$store;\n    if (viewType() === \"audio\") {\n      return this._setupAudioView();\n    } else {\n      return this._setupVideoView();\n    }\n  }\n  _setupAudioView() {\n    effect(this._onTrackChange.bind(this));\n    return () => {\n      this.el.textContent = \"\";\n    };\n  }\n  _onTrackChange() {\n    if (this._isHidden())\n      return;\n    const { textTrack } = this._media.$store;\n    this._onCueChange();\n    listenEvent(textTrack(), \"cue-change\", this._onCueChange.bind(this));\n    effect(this._onUpdateTimedNodes.bind(this));\n  }\n  _onCueChange() {\n    this.el.textContent = \"\";\n    const { currentTime, textTrack } = this._media.$store, time = peek(currentTime), activeCues = peek(textTrack).activeCues;\n    for (const cue of activeCues) {\n      const cueEl = document.createElement(\"div\");\n      cueEl.setAttribute(\"part\", \"cue\");\n      cueEl.innerHTML = renderVTTCueString(cue, time);\n      this.el.append(cueEl);\n    }\n  }\n  _onUpdateTimedNodes() {\n    const { currentTime } = this._media.$store;\n    updateTimedVTTCueNodes(this.el, currentTime());\n  }\n  _setupVideoView() {\n    effect(this._watchTextDirection.bind(this));\n    effect(this._watchMediaTime.bind(this));\n    this._media.textRenderers.add(this._textRenderer);\n    return () => {\n      this.el.textContent = \"\";\n      this._textRenderer.detach();\n      this._media.textRenderers.remove(this._textRenderer);\n    };\n  }\n  _watchTextDirection() {\n    this._renderer.dir = this.$props.textDir();\n  }\n  _watchMediaTime() {\n    if (this._isHidden())\n      return;\n    const { currentTime } = this._media.$store;\n    this._renderer.currentTime = currentTime();\n  }\n}\n\nconst $$_templ$2 = /* @__PURE__ */ $$_create_template(`<!$><div part=\"container\"><div part=\"text\">LIVE</div></div>`);\nclass LiveIndicator extends Component {\n  static el = defineElement({\n    tagName: \"media-live-indicator\"\n  });\n  _media;\n  constructor(instance) {\n    super(instance);\n    this._media = useMedia();\n    new FocusVisibleController(instance);\n  }\n  onAttach(el) {\n    const { live, liveEdge } = this._media.$store;\n    setARIALabel(el, this._getLabel.bind(this));\n    this.setAttributes({\n      tabindex: this._getTabIndex.bind(this),\n      role: this._getRole.bind(this),\n      \"data-live\": live,\n      \"data-live-edge\": liveEdge,\n      \"data-media-button\": true\n    });\n  }\n  onConnect(el) {\n    onPress(el, this._onPress.bind(this));\n  }\n  _getLabel() {\n    const { live } = this._media.$store;\n    return live() ? \"Go live\" : null;\n  }\n  _getTabIndex() {\n    const { live } = this._media.$store;\n    return live() ? 0 : null;\n  }\n  _getRole() {\n    const { live } = this._media.$store;\n    return live() ? \"button\" : null;\n  }\n  _onPress(event) {\n    const { liveEdge } = this._media.$store;\n    if (liveEdge())\n      return;\n    this._media.remote.seekToLiveEdge(event);\n  }\n  render() {\n    return $$_next_template($$_templ$2);\n  }\n}\n\nconst $$_templ$1 = /* @__PURE__ */ $$_create_template(`<!$><img part=\"img\" />`);\nclass Poster extends Component {\n  static el = defineElement({\n    tagName: \"media-poster\",\n    props: { alt: void 0 }\n  });\n  _media;\n  _imgLoading = signal(true);\n  _imgError = signal(false);\n  _imgSrc;\n  _imgAlt;\n  onAttach(el) {\n    this._media = useMedia();\n    this._imgSrc = computed(this._getImgSrc.bind(this));\n    this._imgAlt = this._getImgAlt.bind(this);\n    this.setAttributes({\n      \"data-loading\": this._imgLoading,\n      \"aria-hidden\": $ariaBool(this._isHidden.bind(this))\n    });\n  }\n  onConnect(el) {\n    const { canLoad, poster } = this._media.$store;\n    window.requestAnimationFrame(() => {\n      if (!canLoad())\n        preconnect(poster());\n    });\n    effect(this._onLoadStart.bind(this));\n  }\n  _isHidden() {\n    const { poster } = this._media.$store;\n    return this._imgError() || !poster();\n  }\n  _getImgSrc() {\n    const { canLoad, poster } = this._media.$store;\n    return canLoad() && poster().length ? poster() : null;\n  }\n  _getImgAlt() {\n    return this._imgSrc() ? this.$props.alt() : null;\n  }\n  _onLoadStart() {\n    const { canLoad, poster } = this._media.$store;\n    const isLoading = canLoad() && !!poster();\n    this._imgLoading.set(isLoading);\n    this._imgError.set(false);\n  }\n  _onLoad() {\n    this._imgLoading.set(false);\n  }\n  _onError() {\n    this._imgLoading.set(false);\n    this._imgError.set(true);\n  }\n  render() {\n    const { crossorigin } = this._media.$store;\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ$1);\n      $$_effect(() => $$_attr($$_root, \"src\", this._imgSrc()));\n      $$_effect(() => $$_attr($$_root, \"alt\", this._imgAlt()));\n      $$_effect(() => $$_attr($$_root, \"crossorigin\", crossorigin()));\n      $$_listen($$_root, \"load\", this._onLoad.bind(this));\n      $$_listen($$_root, \"error\", this._onError.bind(this));\n      return $$_root;\n    })();\n  }\n}\n\nconst $$_templ = /* @__PURE__ */ $$_create_template(`<!$><span><!$></span>`);\nclass Time extends Component {\n  static el = defineElement({\n    tagName: \"media-time\",\n    props: {\n      type: \"current\",\n      showHours: false,\n      padHours: null,\n      padMinutes: null,\n      remainder: false\n    }\n  });\n  _media;\n  _time;\n  onAttach() {\n    this._media = useMedia();\n    this._time = computed(this._getTime.bind(this));\n  }\n  _getTime() {\n    const { type, remainder, padHours, padMinutes, showHours } = this.$props, seconds = this._getSeconds(type()), duration = this._media.$store.duration();\n    if (!Number.isFinite(seconds + duration))\n      return \"LIVE\";\n    const time = remainder() ? Math.max(0, duration - seconds) : seconds;\n    return formatTime(\n      time,\n      padHours(),\n      isNull(padMinutes()) ? time >= 3600 : padMinutes(),\n      showHours()\n    );\n  }\n  _getSeconds(type) {\n    const { bufferedEnd, duration, currentTime } = this._media.$store;\n    switch (type) {\n      case \"buffered\":\n        return bufferedEnd();\n      case \"duration\":\n        return duration();\n      default:\n        return currentTime();\n    }\n  }\n  render() {\n    return (() => {\n      const [$$_root, $$_walker] = $$_create_walker($$_templ), $$_expr = $$_walker.nextNode();\n      $$_insert_at_marker_lite($$_expr, this._time);\n      return $$_root;\n    })();\n  }\n}\n\nfunction setupPreviewStyles(preview, orientation) {\n  let rect = preview.getBoundingClientRect(), styles = {\n    \"--computed-width\": rect.width + \"px\",\n    \"--computed-height\": rect.height + \"px\",\n    \"--preview-width\": \"var(--media-slider-preview-width, var(--computed-width))\",\n    \"--preview-height\": \"var(--media-slider-preview-height, var(--computed-height))\"\n  };\n  if (orientation !== \"vertical\") {\n    styles = {\n      ...styles,\n      \"--preview-width-half\": \"calc(var(--preview-width) / 2)\",\n      \"--preview-left-clamp\": \"max(var(--preview-width-half), var(--slider-pointer-percent))\",\n      \"--preview-right-clamp\": \"calc(100% - var(--preview-width-half))\",\n      \"--preview-left\": \"min(var(--preview-left-clamp), var(--preview-right-clamp))\"\n    };\n  } else {\n    styles = {\n      ...styles,\n      \"--preview-height-half\": \"calc(var(--preview-height) / 2)\",\n      \"--preview-top-clamp\": \"max(var(--preview-height-half), var(--slider-pointer-percent))\",\n      \"--preview-bottom-clamp\": \"calc(100% - var(--preview-height-half))\",\n      \"--preview-bottom\": \"min(var(--preview-top-clamp), var(--preview-bottom-clamp))\"\n    };\n  }\n  for (const name of Object.keys(styles)) {\n    preview.style.setProperty(name, styles[name]);\n  }\n}\n\nvar preview = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  setupPreviewStyles: setupPreviewStyles\n});\n\nexport { AudioMenuButton as A, BufferingIndicator as B, CaptionButton as C, toggleButtonProps as D, SliderStoreFactory as E, FullscreenButton as F, Gesture as G, LiveIndicator as L, MuteButton as M, Poster as P, QualityMenuButton as Q, RadioGroup as R, SeekButton as S, Tooltip as T, VolumeSlider as V, Thumbnail as a, PlayButton as b, PIPButton as c, Slider as d, TimeSlider as e, SliderThumbnail as f, SliderValue as g, SliderVideo as h, Time as i, ToggleButton as j, Captions as k, Menu as l, MenuButton as m, MenuItems as n, Radio as o, AudioMenuItems as p, CaptionsMenuButton as q, CaptionsMenuItems as r, ChaptersMenuItems as s, QualityMenuItems as t, PlaybackRateMenuButton as u, PlaybackRateMenuItems as v, round as w, FocusVisibleController as x, clampNumber as y, getNumberOfDecimalPlaces as z };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}